(()=>{var e,t,n,r={74451:(e,t,n)=>{"use strict";n(88146);var r=n(16896),a=n(97335),o=n(60081),i=n(15512),l=n(4527),s=n(76098);const c=(0,s.iv)(["\n  :root {\n    --docsearch-primary-color: ",";\n    --docsearch-text-color: ",";\n    --docsearch-highlight-color: ",";\n    --docsearch-muted-color: #a4a6a8;\n    --docsearch-container-background: rgba(0, 0, 0, 0.5);\n    /* Modal */\n    --docsearch-modal-background: ",";\n    --docsearch-modal-shadow: inset 1px 1px 0 0 #2c2e40, 0 3px 8px 0 #000309;\n    /* Search box */\n    --docsearch-searchbox-background: #2d303e;\n    --docsearch-searchbox-focus-background: #141725;\n    /* Hit */\n    --docsearch-hit-color: ",";\n    --docsearch-hit-active-color: ",";\n    --docsearch-hit-background: ",";\n    --docsearch-hit-shadow: none;\n    /* Footer */\n    --docsearch-footer-background: ",";\n    --docsearch-footer-shadow: inset 0 1px 0 0 rgba(73, 76, 106, 0.5),\n      0 -4px 8px 0 rgba(0, 0, 0, 0.2);\n    /* Keys */\n    --docsearch-key-gradient: linear-gradient(\n      -26.5deg,\n      #32343e 0%,\n      rgb(38, 40, 51) 100%\n    );\n    --docsearch-key-shadow: inset 0 -2px 0 0 #282d55, inset 0 0 1px 1px #51577d,\n      0 2px 2px 0 rgba(3, 4, 9, 0.3);\n\n    // Allotment styling\n    --focus-border: ",";\n    --separator-border: ",";\n    --sash-size: 1.5rem !important;\n    --sash-hover-size: 0.5rem;\n    .allotment-module_splitView__L-yRc.allotment-module_separatorBorder__x-rDS.allotment-module_vertical__WSwwa\n      > .allotment-module_splitViewContainer__rQnVa\n      > .allotment-module_splitViewView__MGZ6O:not(:first-child)::before {\n      height: 2px;\n    }\n    .allotment-module_splitView__L-yRc.allotment-module_separatorBorder__x-rDS.allotment-module_horizontal__7doS8\n      > .allotment-module_splitViewContainer__rQnVa\n      > .allotment-module_splitViewView__MGZ6O:not(:first-child)::before {\n      width: 2px;\n    }\n  }\n  .sash {\n    ::before {\n      transition: none;\n    }\n  }\n\n  .DocSearch-Button {\n    height: 3rem;\n    border-radius: 0.4rem;\n    color: ",";\n    border: 1px solid var(--docsearch-searchbox-background);\n  }\n\n  .DocSearch-Button:hover {\n    background: ",";\n    box-shadow: none;\n  }\n\n  .DocSearch-Button-Placeholder {\n    font-size: 100%;\n  }\n\n  .DocSearch-Button .DocSearch-Search-Icon {\n    color: ",";\n    width: 1.4rem;\n    height: 1.4rem;\n  }\n\n  .DocSearch-Button:hover .DocSearch-Search-Icon {\n    color: ",";\n  }\n\n  .DocSearch-Button-Key {\n    top: 0;\n    padding: 0 4px;\n    background: ",";\n    border-radius: 2px;\n    box-shadow: none;\n    color: ",";\n    font-size: 1.2rem;\n    font-style: inherit;\n    font-family: inherit;\n    font-weight: 600;\n  }\n\n  .DocSearch-Hit-title {\n    font-size: 100%;\n    overflow: hidden;\n  }\n\n  .DocSearch-Logo .cls-1,\n  .DocSearch-Logo .cls-2 {\n    fill: "," !important;\n  }\n"],(({theme:e})=>e.color.pink),(({theme:e})=>e.color.foreground),(({theme:e})=>e.color.pink),(({theme:e})=>e.color.background),(({theme:e})=>e.color.foreground),(({theme:e})=>e.color.foreground),(({theme:e})=>e.color.backgroundLighter),(({theme:e})=>e.color.background),(({theme:e})=>e.color.comment),(({theme:e})=>e.color.backgroundDarker),(({theme:e})=>e.color.foreground),(({theme:e})=>e.color.comment),(({theme:e})=>e.color.foreground),(({theme:e})=>e.color.foreground),(({theme:e})=>e.color.gray2),(({theme:e})=>e.color.black),(({theme:e})=>e.color.foreground)),d=(0,s.vJ)(["\n  ","\n\n  body {\n    color: ",";\n  }\n"],c,(({theme:e})=>e.color.foreground)),u=(0,s.F4)(["\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n"]),m=(0,s.iv)(["\n  animation: "," 1.5s cubic-bezier(0.62, 0.28, 0.23, 0.99) infinite;\n"],u),p=e=>new Promise(((t,n)=>{if(navigator.clipboard&&window.isSecureContext)setTimeout((()=>{navigator.clipboard.writeText(e).then(t).catch(n)}));else{const r=document.createElement("textarea");r.value=e,r.style.position="absolute",r.style.left="-999999px",document.body.prepend(r),r.select();try{document.execCommand("copy")?t():n(new Error("Copy command failed"))}catch(e){n(e)}finally{r.remove()}}}));var g=n(43176),f=n(82529);const h=()=>Intl.DateTimeFormat().resolvedOptions().timeZone,b=(e,t)=>t?(0,g.WU)(new f.N9(e,h()),t):new f.N9(e,h()).toISOString();let y=function(e){return e.MAIN="telemetry",e.CONFIG="telemetry_config",e.WAL="sys.telemetry_wal",e}({});const E="https://fara.questdb.io",w="26px";var C=n(32981),v=n(50307),x=n(95886),_=n(17517),S=n(63137);const k=(e,t={},n=!0)=>{const r="/"===e[0]?"":"/",a=n?`${window.location.origin}${r}${e}`:e;return(0,v.U)(a,t).pipe((0,x.w)((e=>e.ok?e.headers.get("content-type")?.startsWith("application/json")?e.json():Promise.resolve({}):(0,C.of)({error:!0,message:e.statusText}))),(0,_.K)((e=>(console.error(e),(0,C.of)({error:!0,message:e.message})))),(0,S.U)((e=>e.error?e:{data:e,error:!1})))};let T=function(e){return e.DDL="ddl",e.DML="dml",e.DQL="dql",e.ERROR="error",e.NOTICE="notice",e}({}),N=function(e){return e.DISK_FULL="DISK FULL",e.TOO_MANY_OPEN_FILES="TOO MANY OPEN FILES",e.OUT_OF_MMAP_AREAS="OUT OF MMAP AREAS",e.OUT_OF_MEMORY="OUT OF MEMORY",e.UNSUPPORTED_FILE_SYSTEM="UNSUPPORTED FILE SYSTEM",e}({}),I=function(e){return e.EXISTS="Exists",e.DOES_NOT_EXIST="Does not exist",e.RESERVED_NAME="Reserved name",e}({});var R=n(61318);const O=new class{constructor(){this.emitter=new R.Z}publish(e,t){this.emitter.emit(e,t)}subscribe(e,t){this.emitter.on(e,t)}unsubscribe(e,t){this.emitter.off(e,t)}};let A=function(e){return e.MSG_ACTIVE_SIDEBAR="active.panel",e.MSG_EDITOR_FOCUS="editor.focus",e.MSG_EDITOR_INSERT_COLUMN="editor.insert.column",e.GRID_FOCUS="grid.focus",e.MSG_CHART_DRAW="chart.draw",e.MSG_QUERY_CANCEL="query.in.cancel",e.MSG_QUERY_DATASET="query.out.dataset",e.MSG_QUERY_ERROR="query.out.error",e.MSG_QUERY_EXEC="query.in.exec",e.MSG_QUERY_FIND_N_EXEC="query.build.execute",e.MSG_QUERY_OK="query.out.ok",e.MSG_QUERY_RUNNING="query.out.running",e.MSG_QUERY_SCHEMA="query.out.schema",e.MSG_CONNECTION_OK="query.connection.ok",e.MSG_CONNECTION_ERROR="query.connection.error",e.MSG_CONNECTION_UNAUTHORIZED="query.connection.unauthorized",e.MSG_CONNECTION_FORBIDDEN="query.connection.forbidden",e.REACT_READY="react.ready",e.TAB_FOCUS="tab.focus",e.TAB_BLUR="tab.blur",e.METRICS_REFRESH_DATA="metrics.refresh.data",e.BUFFERS_UPDATED="buffers.updated",e}({});const M=new class{authPayload=null;setAuthPayload(e){this.authPayload=e}getAuthPayload(){return this.authPayload}isSSOAuthenticated(){return!!this.authPayload}clearAuthPayload(){this.authPayload=null}};class P{_controllers=[];commonHeaders={};static refreshTokenPending=!1;static numOfPendingQueries=0;refreshTokenMethod=async()=>({});tokenNeedsRefresh(){const e=M.getAuthPayload();return e&&e.refresh_token&&new Date(e.expires_at).getTime()-(new Date).getTime()<3e4}setCommonHeaders(e){this.commonHeaders=e}refreshAuthToken=async()=>{P.refreshTokenPending=!0,await new Promise((e=>{const t=setInterval((async()=>{if(0===P.numOfPendingQueries){clearInterval(t);const n=await this.refreshTokenMethod();return n.access_token&&this.setCommonHeaders({...this.commonHeaders,Authorization:`Bearer ${n.groups_encoded_in_token?n.id_token:n.access_token}`}),P.refreshTokenPending=!1,e(!0)}}),50)}))};static encodeParams=e=>Object.keys(e).filter((t=>void 0!==e[t])).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`)).join("&");abort=()=>{this._controllers.forEach((e=>{e.abort()})),this._controllers=[]};static transformQueryRawResult=e=>{if(e.type===T.DQL){const{columns:t,count:n,dataset:r,timings:a}=e,o=r.map((e=>e.reduce(((e,n,r)=>({...e,[t[r].name]:n})),{})));return{columns:t,count:n,data:o,timings:a,type:T.DQL,...e.explain?{explain:e.explain}:{}}}return e};async query(e,t){const n=await this.queryRaw(e,t);return P.transformQueryRawResult(n)}async queryRaw(e,t){const n=new AbortController,r={count:!0,src:"con",query:e,timings:!0,version:"2",...t};let a;this._controllers.push(n),this.tokenNeedsRefresh()&&!P.refreshTokenPending&&await this.refreshAuthToken(),P.refreshTokenPending&&await new Promise((e=>{const t=setInterval((()=>{if(!P.refreshTokenPending)return clearInterval(t),e(!0)}),50)})),P.numOfPendingQueries++;const o=new Date;try{a=await fetch(`exec?${P.encodeParams(r)}`,{signal:n.signal,headers:this.commonHeaders})}catch(t){const n={position:-1,query:e,type:T.ERROR},r={...n,error:"An error occured, please try again"};return t instanceof DOMException?Promise.reject({...n,error:20===t.code?"Cancelled by user":JSON.stringify(t).toString()}):(O.publish(A.MSG_CONNECTION_ERROR,r),Promise.reject(r))}finally{const e=this._controllers.indexOf(n);e>=0&&this._controllers.splice(e,1),P.numOfPendingQueries--}if(a.ok||400===a.status||a.ok&&403===a.status){let t;try{t=await a.text()}catch(e){return Promise.reject({error:`Failed to read response: ${e}`,type:T.ERROR})}const n=1e6*((new Date).getTime()-o.getTime());let r;try{r=JSON.parse(t)}catch(e){return Promise.reject({error:`Invalid JSON response from the server: ${e}`,type:T.ERROR})}return O.publish(A.MSG_CONNECTION_OK),403===a.status&&O.publish(A.MSG_CONNECTION_FORBIDDEN,r),r.ddl?{query:e,type:T.DDL}:r.dml?{query:e,type:T.DML}:r.error?Promise.reject({...r,type:T.ERROR}):r.notice?{...r,type:T.NOTICE}:{...r,timings:{...r.timings,fetch:n},type:T.DQL}}const i={status:a.status,error:a.statusText};if((e=>408===e.status||e.status>=500)(a)&&(i.error=`QuestDB is not reachable [${a.status}]`,i.position=-1,i.query=e,i.type=T.ERROR,O.publish(A.MSG_CONNECTION_ERROR,i)),401===a.status&&(i.error="Unauthorized",O.publish(A.MSG_CONNECTION_UNAUTHORIZED,i)),403===a.status){const e=(await a.text()).trim();if(e.startsWith("{")){const t=JSON.parse(e);i.error=t.error}else i.error=e;O.publish(A.MSG_CONNECTION_FORBIDDEN,i)}return Promise.reject(i)}async showTables(){const e=await this.query("tables();");return e.type===T.DQL?{...e,data:e.data.slice().sort(((e,t)=>{const n=e.table_name,r=t.table_name;return n>r?1:n<r?-1:0}))}:e}async showPermissions(e){return await this.query(`SHOW PERMISSIONS '${e}';`)}async showColumns(e){return await this.query(`SHOW COLUMNS FROM '${e}';`)}async showSymbolColumnDetails(e,t){return await this.query(`WITH cols as (SHOW COLUMNS FROM '${e}') SELECT symbolCached, symbolCapacity, indexed FROM cols WHERE column = '${t}';`)}async showMatViewDDL(e){return await this.query(`SHOW CREATE MATERIALIZED VIEW '${e}';`)}async showTableDDL(e){return await this.query(`SHOW CREATE TABLE '${e}';`)}async checkCSVFile(e){try{const t=await fetch(`chk?${P.encodeParams({f:"json",j:e,version:"2"})}`,{headers:this.commonHeaders});return await t.json()}catch(e){throw e}}async uploadCSVFile({file:e,name:t,owner:n,settings:r,schema:a,partitionBy:o,timestamp:i,onProgress:l}){const s=new FormData;a&&s.append("schema",JSON.stringify(a)),s.append("data",e);const c={fmt:"json",name:t,owner:n,...o?{partitionBy:o}:{},...i?{timestamp:i}:{},...r?Object.keys(r).reduce(((e,t)=>({...e,[t]:r[t].toString()})),{}):{}};return new Promise(((e,t)=>{let n=new XMLHttpRequest;n.open("POST",`imp?${new URLSearchParams(c)}`),Object.keys(this.commonHeaders).forEach((e=>{n.setRequestHeader(e,this.commonHeaders[e])})),n.upload.addEventListener("progress",(e=>{let t=e.loaded/e.total*100;l(t)})),n.onload=r=>{200===n.status?e(JSON.parse(n.response)):t({status:n.status,statusText:n.statusText})},n.onerror=()=>{t({status:n.status,statusText:n.statusText})},n.send(s)}))}async savePreferences(e){const{version:t,...n}=e,r=await fetch(`settings?version=${t}`,{method:"PUT",headers:this.commonHeaders,body:JSON.stringify(n)});if(!r.ok){let e;try{e=await async function(e){const t=e.headers.get("Content-Type");if(t?.includes("application/json")){const{error:t}=await e.json();return t}return e.text()}(r)}catch(t){e=r.statusText}return{status:r.status,message:e,success:!1}}return{status:r.status,success:!0}}async exportQueryToCsv(e){try{const t=await fetch(`exp?${P.encodeParams({query:e,version:"2"})}`,{headers:this.commonHeaders}),n=await t.blob(),r=t.headers.get("Content-Disposition")?.split("=")[1],a=window.URL.createObjectURL(n),o=document.createElement("a");o.href=a,o.download=r?r.replaceAll('"',""):`questdb-query-${(new Date).getTime()}.csv`,o.click(),window.URL.revokeObjectURL(a)}catch(e){throw e}}async getLatestRelease(){try{const e=await fetch("https://github-api.questdb.io/github/latest");return await e.json()}catch(e){return Promise.reject(e)}}async sendFeedback({email:e,message:t,telemetryConfig:n}){try{const r=await fetch("https://cloud.questdb.com/api/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,message:t,telemetryConfig:n,category:"web-console"})});return await r.json()}catch(e){throw e}}async getNews({category:e,telemetryConfig:t}){try{const n=await fetch(`https://cloud.questdb.com/api/news?category=${e}&telemetryUserId=${t?.id}`);return await n.json()}catch(e){return Promise.reject(e)}}}const L=(e,t,n="...")=>{if(e.length<=t)return e;const r=Math.floor(e.length/2),a=e.length-t+n.length;return e.slice(0,r-Math.floor(a/2))+n+e.slice(r+Math.ceil(a/2))},D=e=>t=>t?t.theme.color[e]:void 0;var B=n(57188);const z=(e,t)=>(0,B.WU)(e,{language:"postgresql",...t}),F={isMacintosh:!1,isWindows:!1,isIOS:!1,isLinux:!1};"object"==typeof navigator&&(F.isMacintosh=-1!==navigator.userAgent.indexOf("Macintosh"),F.isWindows=navigator.userAgent.indexOf("Windows")>=0,F.isIOS=(navigator.userAgent.indexOf("Macintosh")>=0||navigator.userAgent.indexOf("iPad")>=0||navigator.userAgent.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0);const H=()=>navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language;var U=n(87905),Z=n(73751),V=n(68522),q=n(47761),$=n(85412),j=n(666),G=n(9576),W=n(32629);const Q=e=>({"en-GB":U.e,"en-US":Z._,"fr-FR":V.fr,"es-ES":q.es,"de-DE":$.de,"ja-JP":j.ja,"ko-KR":G.ko,"zh-CN":W.U}[e]||Z._),Y=e=>Array.from(new Set(e));let K=function(e){return e[e.SLOW=1500]="SLOW",e[e.REG=200]="REG",e[e.FAST=70]="FAST",e}({});const X=(e,t)=>(0,s.vJ)(["\n  .","-enter {\n    opacity: 0;\n  }\n\n  .","-enter-active {\n    opacity: 1;\n    transition: all ","ms;\n  }\n\n  .","-exit {\n    opacity: 1;\n  }\n\n  .","-exit-active {\n    opacity: 0;\n    transition: all ","ms;\n  }\n"],e,e,t,e,e,t),J=(0,s.iv)(["\n  .collapse-enter {\n    max-height: 0;\n  }\n\n  .collapse-enter-active {\n    max-height: ","px;\n    transition: all ","ms;\n  }\n\n  .collapse-exit {\n    max-height: ","px;\n  }\n\n  .collapse-exit-active {\n    max-height: 0;\n    transition: all ","ms;\n  }\n"],(({_height:e})=>e),(({duration:e})=>e||K.REG),(({_height:e})=>e),(({duration:e})=>e||K.REG)),ee=(K.FAST,K.FAST,(0,s.iv)(["\n  transition: all ","ms cubic-bezier(0, 0, 0.38, 0.9);\n"],K.FAST));function te(){return te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},te.apply(this,arguments)}const ne={fontSize:"md",size:"md",type:"button"},re=({size:e})=>{switch(e){case"sm":return"2rem";case"md":default:return"3rem";case"lg":return"5rem"}},ae=(0,s.iv)(["\n  display: flex;\n  height: ",";\n  padding: 0 1rem;\n  align-items: center;\n  justify-content: center;\n  background: transparent;\n  border-radius: 4px;\n  border: 1px solid transparent;\n  outline: 0;\n  font-size: ",";\n  font-weight: 400;\n  line-height: 1.15;\n  cursor: pointer;\n  ",";\n\n  svg + span {\n    margin-left: 0.5rem;\n  }\n"],re,(({fontSize:e,theme:t})=>t.fontSize[e]),ee),oe=(e,t,n)=>(0,s.iv)(["\n    background: ",";\n    color: ",";\n    border-color: ",";\n\n    &:focus {\n      box-shadow: inset 0 0 0 1px ",";\n    }\n\n    &:hover:not([disabled]) {\n      background: ",";\n      color: ",";\n      border-color: ",";\n    }\n\n    &:active:not([disabled]) {\n      background: ",";\n      filter: brightness(90%);\n    }\n\n    &:disabled {\n      cursor: not-allowed;\n      background: ",";\n      color: ",";\n      border-color: ",";\n    }\n  "],D(e.background),D(e.color),D(e.border),D("foreground"),D(t.background),D(t.color),D(t.border),D(t.background),D(n.background),D(n.color),D(n.border)),ie=s.ZP.button.withConfig({displayName:"Button__PrimaryButtonStyled"})(["\n  ",";\n  ",";\n"],ae,oe({background:"selection",border:"selection",color:"foreground"},{background:"comment",border:"selection",color:"foreground"},{background:"selection",border:"gray1",color:"gray1"})),le=(e,t)=>r.createElement(ie,te({},ne,e,{ref:t}));(0,r.forwardRef)(le).defaultProps=ne;const se=s.ZP.button.withConfig({displayName:"Button__SecondaryButtonStyled"})(["\n  ",";\n  ",";\n"],ae,oe({background:"backgroundLighter",border:"backgroundLighter",color:"foreground"},{background:"comment",border:"comment",color:"foreground"},{background:"gray1",border:"gray1",color:"background"})),ce=(e,t)=>r.createElement(se,te({},ne,e,{ref:t})),de=(0,r.forwardRef)(ce);de.defaultProps=ne;const ue=s.ZP.button.withConfig({displayName:"Button__SuccessButtonStyled"})(["\n  ",";\n  ",";\n"],ae,oe({background:"selection",border:"selection",color:"green"},{background:"comment",border:"selection",color:"green"},{background:"selection",border:"gray1",color:"gray1"})),me=(e,t)=>r.createElement(ue,te({},ne,e,{ref:t}));(0,r.forwardRef)(me).defaultProps=ne;const pe=s.ZP.button.withConfig({displayName:"Button__ErrorButtonStyled"})(["\n  ",";\n  ",";\n"],ae,oe({background:"selection",border:"selection",color:"red"},{background:"comment",border:"selection",color:"red"},{background:"selection",border:"gray1",color:"gray1"})),ge=(e,t)=>r.createElement(pe,te({},ne,e,{ref:t}));(0,r.forwardRef)(ge).defaultProps=ne;const fe=s.ZP.button.withConfig({displayName:"Button__TransparentButtonStyled"})(["\n  ",";\n  ",";\n"],ae,oe({background:"transparent",border:"transparent",color:"foreground"},{background:"comment",border:"transparent",color:"foreground"},{background:"selection",border:"gray1",color:"gray1"})),he=(e,t)=>r.createElement(fe,te({},ne,e,{ref:t})),be=(0,r.forwardRef)(he);be.defaultProps=ne;const ye=s.ZP.div.withConfig({displayName:"CenteredLayout__Root"})(["\n  display: grid;\n  place-items: center;\n  height: 100vh;\n  background: ",";\n  color: ",";\n"],(({theme:e})=>e.color.backgroundDarker),(({theme:e})=>e.color.foreground)),Ee=({children:e})=>r.createElement(ye,null,e);var we=n(23251),Ce=n(92941),ve=n(44947),xe=n(38638);const _e=s.ZP.div.withConfig({displayName:"group-header__GroupHeader"})(["\n  display: flex;\n  justify-content: center;\n  width: 100%;\n  padding: 2rem 0;\n  border-bottom: 0.1rem "," solid;\n"],(({theme:e})=>e.color.selection)),Se=s.ZP.div.withConfig({displayName:"group-item__GroupItem"})(["\n  display: flex;\n  ",";\n  padding: 2rem;\n\n  &:not(:last-child) {\n    border-bottom: 0.1rem "," solid;\n  }\n\n  &:last-child {\n    border-bottom-left-radius: ",";\n    border-bottom-right-radius: ",";\n  }\n\n  ","\n"],(({direction:e})=>"column"===e?"\n    flex-direction: column;\n    align-items: flex-start;\n    flex-wrap: wrap;\n    width: 100%;\n  ":"\n    justify-content: space-between;\n    flex-wrap: initial;\n  "),(({theme:e})=>e.color.backgroundLighter),(({theme:e})=>e.borderRadius),(({theme:e})=>e.borderRadius),(({theme:e,withLink:t})=>t&&`\n    &:hover {\n      cursor: pointer;\n      background-color: ${e.color.black};\n    }\n  `)),ke=s.ZP.div.attrs((e=>({flexDirection:e.flexDirection||"row",gap:e.gap||"1rem",margin:e.margin||"0",align:e.align||"center",justifyContent:e.justifyContent||"flex-start"}))).withConfig({displayName:"Box"})(["\n  display: flex;\n  flex-direction: ",";\n  gap: ",";\n  margin: ",";\n  align-items: ",";\n  justify-content: ",";\n"],(({flexDirection:e})=>e),(({gap:e})=>e),(({margin:e})=>e),(({align:e})=>e),(({justifyContent:e})=>e)),Te=(0,s.ZP)(ke).attrs({gap:"1rem",justifyContent:"flex-end",align:"center"}).withConfig({displayName:"actions__Actions"})(["\n  width: 100%;\n  padding-left: 2rem;\n  padding-right: 2rem;\n  height: 7rem;\n"]),Ne=(0,s.ZP)(ke).attrs({gap:"0",flexDirection:"column"}).withConfig({displayName:"content-wrapper__ContentWrapper"})(["\n  width: 100%;\n  /*\n    4.5rem = top bar\n    4.5rem = drawer title\n    4rem = footer\n  */\n  height: ",";\n  form {\n    width: 100%;\n    height: 100%;\n  }\n"],(({mode:e})=>"side"===e?"calc(100vh - 4.5rem - 4.5rem - 4rem)":"calc(100vh - 4.5rem)")),Ie=s.ZP.div.withConfig({displayName:"PaneMenu"})(["\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n  height: 4.5rem;\n  padding: 0 1rem;\n  align-items: center;\n  background: ",";\n  border-top: 1px solid transparent;\n"],D("backgroundLighter"));function Re(){return Re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Re.apply(this,arguments)}const Oe=(0,s.iv)(["\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"]),Ae=(0,s.iv)(["\n  color: ",";\n  font-family: ",";\n  font-size: ",";\n  font-style: ",";\n  font-weight: ",";\n  text-transform: ",";\n  ",";\n  ",";\n"],(e=>e.color?D(e.color):"inherit"),(({code:e,theme:t})=>e&&t.fontMonospace),(({size:e,theme:t})=>e?t.fontSize[e]:"inherit"),(({_style:e})=>e??"inherit"),(({weight:e})=>e),(({transform:e})=>e),(({align:e})=>e?`text-align: ${e}`:""),(({ellipsis:e})=>e&&Oe)),Me=s.ZP.label.withConfig({displayName:"Text__TextStyled"})(["\n  ",";\n"],Ae),Pe=({type:e,...t})=>r.createElement(Me,Re({as:e},t,{type:e}));Pe.defaultProps={color:"black",type:"span"};const Le=s.ZP.div.withConfig({displayName:"header__Root"})(["\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n  height: 4.5rem;\n  padding: 0 1rem;\n  align-items: center;\n  background: ",";\n  border-top: 1px solid transparent;\n  z-index: 5;\n\n  ","\n"],D("backgroundLighter"),(({shadow:e})=>e&&"\n      box-shadow: 0 2px 10px 0 rgba(23, 23, 23, 0.65)\n  ")),De=(0,s.ZP)(Pe).withConfig({displayName:"header__Title"})(["\n  display: flex;\n  align-items: center;\n  padding-left: 1rem;\n  font-size: 1.8rem;\n  font-weight: 600;\n"]),Be=({children:e})=>e;function ze(){return ze=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ze.apply(this,arguments)}Be.Header=({title:e,afterTitle:t,shadow:n})=>r.createElement(Le,{shadow:n},e&&r.createElement(De,{color:"foreground"},e),t);const Fe=(0,s.iv)(["\n  @keyframes animateShow {\n    from {\n      transform: translateX(100%);\n    }\n    to {\n      transform: translateX(0);\n    }\n  }\n"]),He=(0,s.iv)(["\n  @keyframes animateHide {\n    from {\n      transform: translateX(0);\n    }\n    to {\n      transform: translateX(100%);\n    }\n  }\n"]),Ue=(0,s.ZP)(we.VY).attrs({forceMount:!0}).withConfig({displayName:"Drawer__DrawerContent"})(["\n  background-color: ",";\n  border-left: 0.2rem "," solid;\n  position: ",";\n  top: 0;\n  right: 0;\n  width: ",";\n  max-width: 100%;\n  height: 100%;\n  overflow: auto;\n  z-index: 101;\n\n  ","\n  ","\n\n  ",";\n"],(({theme:e})=>e.color.backgroundLighter),(({theme:e})=>e.color.background),(({mode:e})=>"modal"===e?"fixed":"inherit"),(({width:e})=>e??"50rem"),Fe,He,(({mode:e})=>"modal"===e&&'\n  &[data-state="open"] {\n    animation: animateShow 0.5s cubic-bezier(0.16, 1, 0.3, 1);\n  }\n\n  &[data-state="closed"] {\n    animation: animateHide 0.5s cubic-bezier(0.16, 1, 0.3, 1);\n  }\n\n  &:focus {\n    outline: none;\n  }\n  ')),Ze=(0,s.ZP)(we.x8).attrs({"aria-label":"Close",asChild:!0}).withConfig({displayName:"Drawer__StyledClose"})(["\n  appearance: initial;\n  margin-left: auto;\n  cursor: pointer;\n  color: ",";\n"],(({theme:e})=>e.color.foreground)),Ve=({mode:e="modal",children:t,trigger:n,title:a,afterTitle:o,width:i,open:l,onOpenChange:s,onDismiss:c,withCloseButton:d,closeOnOverlayClick:u=!0,closeOnEscape:m=!0})=>r.createElement(we.fC,{onOpenChange:s,open:l,modal:"modal"===e},r.createElement(we.xz,{asChild:!0},r.createElement(Ce.A,null,n)),r.createElement(we.h_,"side"===e&&{container:document.getElementById("side-panel-right")},"modal"===e&&r.createElement(Ce.A,null,r.createElement(ve.a,{primitive:we.aV})),r.createElement(Ue,ze({mode:e,width:i},c&&{onEscapeKeyDown:m?c:void 0,onInteractOutside:u?c:void 0},"side"===e&&{onInteractOutside:e=>e.preventDefault(),onEscapeKeyDown:e=>e.preventDefault(),onPointerDownOutside:e=>e.preventDefault()}),(a||d)&&r.createElement(Be.Header,ze({title:a,afterTitle:o},d&&{afterTitle:r.createElement(Ze,c?{onClick:c}:{},r.createElement(xe.x,{size:"18px"}))})),t)));Ve.GroupHeader=_e,Ve.GroupItem=Se,Ve.Actions=Te,Ve.ContentWrapper=Ne;const qe=(e,t)=>{const[n,a]=(0,r.useState)(!1),o=n=>{n.key===e&&(t?.preventDefault&&n.preventDefault(),a(!0))},i=n=>{n.key===e&&(t?.preventDefault&&n.preventDefault(),a(!1))};return(0,r.useEffect)((()=>(window.addEventListener("keydown",o),window.addEventListener("keyup",i),()=>{window.removeEventListener("keydown",o),window.removeEventListener("keyup",i)}))),n},$e=(e,t)=>{(0,r.useEffect)((()=>{const n=Object.entries(t).reduce(((e,[t,n])=>`${e} ${t}: ${n};`),"z-index: 1000;");e.setAttribute("style",n)}),[e,t])};var je=n(31095),Ge=function(e){return e[e.SM=767]="SM",e}(Ge||{});const We=(0,r.createContext)({sm:window.innerWidth<=Ge.SM}),Qe=({children:e})=>{const[t,n]=(0,r.useState)({sm:window.innerWidth<=Ge.SM}),[a,i]=(0,r.useState)();return(0,r.useEffect)((()=>{const e=(0,je.P)(16,(()=>{i({sm:window.innerWidth<=Ge.SM})}));return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),(0,r.useEffect)((()=>{a&&!(0,o.wU)(a,t)&&n(a)}),[t,a]),r.createElement(We.Provider,{value:t},e)},Ye=()=>(0,r.useContext)(We),Ke=(e,t,n,a)=>{(0,r.useEffect)((()=>{if(clearTimeout(n.current),t&&!document.body.contains(e))return document.body.appendChild(e),void(null!=a&&a());t||(n.current=window.setTimeout((()=>{document.body.contains(e)&&document.body.removeChild(e)}),K.REG))}),[t,e,n,a])},Xe=({icon:e,tooltip:t,placement:n,textAlign:a})=>r.createElement(dt,{placement:n,trigger:e},r.createElement(xt,{textAlign:a},t));function Je(){return Je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Je.apply(this,arguments)}const et={size:"md",type:"text"},tt=s.ZP.input.withConfig({displayName:"Input__InputStyled"})(["\n  height: ",";\n  border: none;\n  padding: 0 1rem;\n  line-height: 1.5;\n  outline: none;\n  background: ",";\n  border-radius: 4px;\n  color: ",";\n\n  &:focus {\n    box-shadow: inset 0 0 0 1px ",";\n  }\n\n  &::placeholder {\n    color: ",";\n  }\n"],re,D("selection"),D("foreground"),D("foreground"),D("gray2")),nt=(e,t)=>r.createElement(tt,Je({},et,e,{ref:t}));(0,r.forwardRef)(nt).defaultProps=et;const rt=Pe.defaultProps,at=s.ZP.a.withConfig({displayName:"Link__Wrapper"})(["\n  ",";\n  text-decoration: none;\n  line-height: 1;\n\n  &:hover:not([disabled]),\n  &:focus:not([disabled]) {\n    color: ",";\n  }\n"],Ae,(e=>e.hoverColor?D(e.hoverColor):"inherit")),ot=e=>r.createElement(at,e);ot.defaultProps=rt;const it=s.ZP.div.withConfig({displayName:"PaneContent"})(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  background: ",";\n  overflow: auto;\n"],D("backgroundLighter")),lt=s.ZP.div.withConfig({displayName:"PaneWrapper"})(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n"]);var st=n(46317),ct=n(1264);const dt=({children:e,delay:t,modifiers:n,placement:o,trigger:i})=>{const[l]=(0,r.useState)(document.createElement("div")),s=(0,r.useRef)(),c=(0,r.useRef)(),[d,u]=(0,r.useState)(!1),[m,p]=(0,r.useState)(null),[g,f]=(0,r.useState)(null),{attributes:h,styles:b,forceUpdate:y}=(0,st.D)(m,l,{modifiers:[{name:"arrow",options:{element:g}},{name:"offset",options:{offset:[0,6]}},{name:"eventListeners",enabled:d},...n],placement:o}),E=(0,r.useCallback)((()=>{t?s.current=window.setTimeout((()=>{u(!0)}),t):u(!0)}),[t]),w=(0,r.useCallback)((()=>{clearTimeout(s.current),u(!1)}),[]);return(0,r.useEffect)((()=>()=>{clearTimeout(c.current),clearTimeout(s.current),document.body.contains(l)&&document.body.removeChild(l)}),[l]),$e(l,b.popper),Ke(l,d,c,y),r.createElement(r.Fragment,null,r.isValidElement(i)&&r.cloneElement(i,{onMouseEnter:E,onMouseLeave:w,ref:p}),a.createPortal(r.createElement(ct.Z,{classNames:"fade-reg",in:d,timeout:K.REG,unmountOnExit:!0},r.isValidElement(e)&&r.cloneElement(e,{...h.popper,arrow:{setArrowElement:f,styles:b.arrow}})),l))};dt.defaultProps={modifiers:[],placement:"auto"};const ut=({active:e,children:t,modifiers:n,onToggle:o,placement:i,trigger:l})=>{const[s]=(0,r.useState)(document.createElement("div")),c=(0,r.useRef)(),[d,u]=(0,r.useState)(!1),[m,p]=(0,r.useState)(null),{attributes:g,styles:f}=(0,st.D)(m,s,{modifiers:[...n,{name:"eventListeners",enabled:d}],placement:i}),h=(0,r.useCallback)((()=>{const e=!d;u(e),o&&o(e)}),[d,o]),b=(0,r.useCallback)((e=>{const t=e.target;s.contains(t)||m?.contains(t)||d&&(u(!1),o&&o(!1))}),[s,o,m,d]),y=(0,r.useCallback)((e=>{"Escape"===e.key&&d&&(u(!1),o&&o(!1))}),[d,o]);return $e(s,f.popper),Ke(s,d,c),(0,r.useEffect)((()=>{void 0!==e&&u(e)}),[e]),(0,r.useEffect)((()=>(document.body.appendChild(s),()=>{clearTimeout(c.current),document.body.contains(s)&&document.body.removeChild(s)})),[s]),(0,r.useEffect)((()=>(document.addEventListener("mousedown",b),document.addEventListener("touchstart",b),document.addEventListener("keydown",y),()=>{document.removeEventListener("mousedown",b),document.removeEventListener("touchstart",b),document.removeEventListener("keydown",y)})),[b,y]),r.createElement(r.Fragment,null,r.isValidElement(l)&&r.cloneElement(l,{onClick:h,ref:p}),r.isValidElement(t)&&r.createElement(ct.Z,{classNames:"fade-reg",in:d,timeout:K.REG,unmountOnExit:!0},r.createElement(r.Fragment,null,a.createPortal(r.cloneElement(t,{...g.popper}),s))))};function mt(){return mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mt.apply(this,arguments)}ut.defaultProps={modifiers:[],placement:"auto"};const pt={direction:"bottom",fontSize:"md",selected:!1,size:"md",type:"button",readOnly:!1},gt=(0,s.iv)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: ",";\n  border: none;\n  outline: 0;\n  font-size: ",";\n  font-weight: 400;\n  line-height: 1.15;\n  width: 3.5rem;\n  height: 3.5rem;\n  border-radius: 0.4rem;\n  cursor: pointer;\n  ",";\n  ",";\n  color: ",";\n\n  svg + span,\n  img + span {\n    margin-left: 1rem;\n  }\n"],(({selected:e,theme:t})=>e?"#2d303e":"transparent"),(({fontSize:e,theme:t})=>t.fontSize[e]),ee,(({disabled:e})=>e&&"cursor: default; pointer-events: none;"),(({selected:e,theme:t})=>t.color[e?"green":"offWhite"])),ft=s.ZP.button.withConfig({displayName:"ToggleButton__PrimaryToggleButtonStyled"})(["\n  ",";\n  ",";\n"],gt,(ht={background:"comment"},(0,s.iv)(["\n    &:hover:not([disabled]) {\n      background: ",";\n      opacity: 1;\n    }\n\n    &:active:not([disabled]) {\n      filter: brightness(90%);\n    }\n\n    ","\n  "],D(ht.background),(({readOnly:e})=>e&&"\n      filter: brightness(0.5);\n      cursor: default;\n    "))));var ht;const bt=(e,t)=>r.createElement(ft,mt({},pt,e,{ref:t,"data-selected":e.selected})),yt=(0,r.forwardRef)(bt);function Et(){return Et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Et.apply(this,arguments)}yt.defaultProps=pt;const wt=(0,s.iv)(["\n  position: absolute;\n  width: 7px;\n  height: 7px;\n"]),Ct=s.ZP.div.withConfig({displayName:"Tooltip__TooltipArrow"})(["\n  ",";\n\n  &::before {\n    ",';\n    top: 0;\n    left: 0;\n    content: "";\n    transform: rotate(45deg);\n    background: ',";\n    border: 1px solid ",";\n    border-radius: 1px;\n  }\n"],wt,wt,D("backgroundDarker"),D("gray1")),vt=s.ZP.div.withConfig({displayName:"Tooltip__Wrapper"})(["\n  position: relative;\n  max-width: 460px;\n  padding: 1rem;\n  background: ",";\n  border: 1px solid ",';\n  border-radius: 1px;\n\n  &[data-popper-placement^="right"] ',' {\n    left: -4px;\n\n    &::before {\n      border-right: none;\n      border-top: none;\n    }\n  }\n\n  &[data-popper-placement^="left"] ',' {\n    right: -4px;\n\n    &::before {\n      border-left: none;\n      border-bottom: none;\n    }\n  }\n\n  &[data-popper-placement^="top"] ',' {\n    bottom: -4px;\n\n    &::before {\n      border-left: none;\n      border-top: none;\n    }\n  }\n\n  &[data-popper-placement^="bottom"] '," {\n    top: -4px;\n\n    &::before {\n      border-right: none;\n      border-bottom: none;\n    }\n  }\n"],D("backgroundDarker"),D("gray1"),Ct,Ct,Ct,Ct),xt=({arrow:e,children:t,textAlign:n="left",...a})=>r.createElement(vt,Et({},a,{"data-hook":"tooltip",style:{textAlign:n}}),r.createElement(Pe,{color:"foreground"},t),e&&r.createElement(Ct,{ref:e.setArrowElement,style:e.styles}));var _t=n(44631);function St(){return St=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},St.apply(this,arguments)}const kt=({height:e,...t})=>r.createElement(_t.OO,St({style:e?{height:e}:{}},t));var Tt=n(63245);n(97655);let Nt=function(e){return e.SUCCESS="success",e.INFO="info",e.WARNING="warning",e.ERROR="error",e}({});var It=n(94937),Rt=n(41531),Ot=n(84374),At=n(46827);const Mt={baseFontSize:"10px",color:{black:"#191a21",black70:"rgba(25, 26, 33, 0.7)",black40:"rgba(25, 26, 33, 0.4)",black20:"rgba(25, 26, 33, 0.2)",gray1:"#585858",gray2:"#bbbbbb",backgroundDarker:"#21222c",backgroundLighter:"#282a36",background:"#21222c",foreground:"#f8f8f2",selection:"#44475a",selectionDarker:"#333544",comment:"#6272a4",red:"#ff5555",redDark:"#5a1d1d",orange:"#ffb86c",yellow:"#f1fa8c",green:"#50fa7b",greenDarker:"#00aa3b",purple:"#bd93f9",cyan:"#8be9fd",pink:"#d14671",pink50:"rgba(209, 70, 113, 0.25)",pinkDarker:"#be2f5b",pinkPrimary:"#c93261",pinkLighter:"#ff79c6",transparent:"transparent",white:"#fafafa",inherit:"inherit",tooltipBackground:"#6272a4",tableSelection:"#043c5c",graphLegend:"#6e7078",offWhite:"#bdbdbd"},font:'"Open Sans", -apple-system, BlinkMacSystemFont, Helvetica, Roboto, sans-serif',fontEmoji:'"apple color emoji", "segoe ui emoji", "android emoji", "emojisymbols", "emojione mozilla", "twemoji mozilla", "segoe ui symbol", "noto color emoji"',fontMonospace:'SFMono-Regular, Menlo, Monaco, Consolas,"Liberation Mono", "Courier New", monospace',fontSize:{ms:"1rem",xs:"1.2rem",sm:"1.3rem",md:"1.4rem",lg:"1.5rem",xl:"1.7rem",hg:"3rem"},borderRadius:"0.8rem"};function Pt(){return Pt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pt.apply(this,arguments)}n(85383);const Lt=({type:e,size:t=18,...n})=>{switch(e){case Nt.SUCCESS:return r.createElement(At.W,Pt({},n,{size:t,color:Mt.color.green}));case Nt.WARNING:return r.createElement(It.u,Pt({},n,{size:t,color:Mt.color.orange}));case Nt.ERROR:return r.createElement(Rt.P,Pt({},n,{size:t,color:Mt.color.red}));case Nt.INFO:default:return r.createElement(Ot.d,Pt({},n,{size:t,color:Mt.color.cyan}))}},Dt=(e,t)=>Tt.Am.info(e,{icon:r.createElement(Lt,{type:Nt.INFO}),className:"toast-info-container",progressStyle:{background:Mt.color.cyan},style:{borderColor:Mt.color.cyan,background:Mt.color.backgroundLighter},...t}),Bt=(e,t)=>Tt.Am.success(e,{icon:r.createElement(Lt,{type:Nt.SUCCESS}),className:"toast-success-container",progressStyle:{background:Mt.color.green},style:{borderColor:Mt.color.green,background:Mt.color.backgroundLighter},...t}),zt=(e,t)=>Tt.Am.error(e,{icon:r.createElement(Lt,{type:Nt.ERROR}),progressStyle:{background:Mt.color.red},className:"toast-error-container",style:{borderColor:Mt.color.red,background:Mt.color.backgroundLighter},...t}),Ft=(Tt.Am.dismiss,Tt.Am.isActive,e=>{const t={autoClose:3e3,draggable:!1,position:"top-right",theme:"dark",transition:Tt.Mi,hideProgressBar:!1,closeButton:!0,closeOnClick:!0,pauseOnHover:!0,pauseOnFocusLoss:!1,...e};return r.createElement(Tt.Ix,t)});let Ht=function(e){return e.TOGGLE_SIDE_MENU="CONSOLE/TOGGLE_SIDE_MENU",e.SET_ACTIVE_SIDEBAR="CONSOLE/SET_ACTIVE_SIDEBAR",e.SET_ACTIVE_BOTTOM_PANEL="CONSOLE/SET_ACTIVE_BOTTOM_PANEL",e.SET_IMAGE_TO_ZOOM="CONSOLE/SET_IMAGE_TO_ZOOM",e}({});const Ut={toggleSideMenu:()=>({type:Ht.TOGGLE_SIDE_MENU}),setActiveSidebar:e=>({payload:e,type:Ht.SET_ACTIVE_SIDEBAR}),setActiveBottomPanel:e=>({payload:e,type:Ht.SET_ACTIVE_BOTTOM_PANEL}),setImageToZoom:e=>({payload:e,type:Ht.SET_IMAGE_TO_ZOOM})};let Zt=function(e){return e.ERROR="error",e.INFO="info",e.SUCCESS="success",e.NOTICE="notice",e.LOADING="loading",e}({}),Vt=function(e){return e.SCRIPT="script",e.EXPLAIN="explain",e.REFRESH="refresh",e.QUERY="query",e.NONE="none",e}({}),qt=function(e){return e.ADD_NOTIFICATION="QUERY/ADD_NOTIFICATION",e.CLEANUP_NOTIFICATIONS="QUERY/CLEANUP_NOTIFICATIONS",e.CLEANUP_BUFFER_NOTIFICATIONS="QUERY/CLEANUP_BUFFER_NOTIFICATIONS",e.REMOVE_NOTIFICATION="QUERY/REMOVE_NOTIFICATION",e.UPDATE_NOTIFICATION_KEY="QUERY/UPDATE_NOTIFICATION_KEY",e.SET_RESULT="QUERY/SET_RESULT",e.STOP_RUNNING="QUERY/STOP_RUNNING",e.TOGGLE_RUNNING="QUERY/TOGGLE_RUNNING",e.SET_TABLES="QUERY/SET_TABLES",e.SET_COLUMNS="QUERY/SET_COLUMNS",e.SET_ACTIVE_NOTIFICATION="QUERY/SET_ACTIVE_NOTIFICATION",e.SET_QUERIES_TO_RUN="QUERY/SET_QUERIES_TO_RUN",e}({}),$t=function(e){return e.START="TELEMETRY/START",e.SET_CONFIG="TELEMETRY/SET_CONFIG",e.SET_REMOTE_CONFIG="TELEMETRY/SET_REMOTE_CONFIG",e}({});const jt=Ut,Gt=(e,t)=>({payload:{createdAt:new Date,type:Zt.SUCCESS,...e,bufferId:t},type:qt.ADD_NOTIFICATION}),Wt=e=>({type:qt.CLEANUP_BUFFER_NOTIFICATIONS,payload:{bufferId:e}}),Qt=(e,t)=>({payload:e,bufferId:t,type:qt.REMOVE_NOTIFICATION}),Yt=(e,t,n)=>({type:qt.UPDATE_NOTIFICATION_KEY,payload:{oldKey:e,newKey:t,bufferId:n}}),Kt=e=>({payload:e,type:qt.SET_RESULT}),Xt=()=>({type:qt.STOP_RUNNING}),Jt=e=>({type:qt.TOGGLE_RUNNING,payload:e}),en=e=>({payload:{tables:e},type:qt.SET_TABLES}),tn=e=>({payload:{columns:e},type:qt.SET_COLUMNS}),nn=e=>({type:qt.SET_ACTIVE_NOTIFICATION,payload:e}),rn=e=>({type:qt.SET_QUERIES_TO_RUN,payload:e}),an=()=>({type:$t.START}),on=e=>({payload:e,type:$t.SET_CONFIG}),ln=e=>({payload:e,type:$t.SET_REMOTE_CONFIG});var sn=n(61507),cn=n(74998),dn=n(73937),un=n(63547),mn=n(2304),pn=n(41174),gn=n(3826);const fn=e=>localStorage.getItem(e)??"",hn=(e,t)=>localStorage.setItem(e,t),bn=e=>localStorage.removeItem(e);let yn=function(e){return e.RELEASE_TYPE="RELEASE_TYPE",e.OAUTH_PROMPT="oauth.prompt",e.OAUTH_REDIRECT_COUNT="oauth.redirect.count",e.OAUTH_STATE="oauth.state",e.PKCE_CODE_VERIFIER="pkce.code.verifier",e.QUERY_TEXT="query.text",e.EDITOR_LINE="editor.line",e.EDITOR_COL="editor.col",e.EXAMPLE_QUERIES_VISITED="editor.exampleQueriesVisited",e.EDITOR_SPLITTER_BASIS="splitter.editor.basis",e.RESULTS_SPLITTER_BASIS="splitter.results.basis",e.REST_TOKEN="rest.token",e.BASIC_AUTH_HEADER="basic.auth.header",e.AUTO_REFRESH_TABLES="auto.refresh.tables",e.SSO_USERNAME="sso.username",e.LEFT_PANEL_STATE="left.panel.state",e}({});const En=e=>{const t=fn(yn.RELEASE_TYPE);("EE"===t||e?.enabled)&&fetch(`${E}/add-ent`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,releaseType:t})}).catch((()=>{}))},wn=new P,Cn=[e=>e.pipe((0,cn.l)($t.START),(0,x.w)((()=>{const e=M.getAuthPayload()??{};if(e.access_token)wn.setCommonHeaders({Authorization:`Bearer ${e.groups_encoded_in_token?e.id_token:e.access_token}`});else{const e=fn(yn.REST_TOKEN);if(e)wn.setCommonHeaders({Authorization:`Bearer ${e}`});else{const e=fn(yn.BASIC_AUTH_HEADER);e&&wn.setCommonHeaders({Authorization:e})}}return(0,pn.D)(wn.query(`${y.CONFIG} limit -1`))})),(0,x.w)((e=>e.type===T.DQL?(0,C.of)(on(e.data[0])):gn.C))),(e,t)=>e.pipe((0,cn.l)($t.SET_CONFIG),(0,dn.M)(t),(0,x.w)((([e,t])=>{const n=Tn.telemetry.getConfig(t);return n&&En(n),(e=>e?.enabled?k(`${E}/config`,{method:"POST",body:JSON.stringify(e)},!1):gn.C)(n)})),(0,x.w)((e=>e.error?gn.C:(0,C.of)(ln(e.data))))),(e,t)=>e.pipe((0,cn.l)($t.SET_REMOTE_CONFIG),(0,dn.M)(t),(0,x.w)((([e,t])=>{const n=Tn.telemetry.getRemoteConfig(t);if(n?.lastUpdated){const e=new Date(n.lastUpdated).toISOString();return(0,pn.D)(wn.queryRaw(`with tel as (\n              SELECT cast(created as long), event, origin\n              FROM ${y.MAIN}\n              WHERE created > '${e}'\n              LIMIT -10000 \n            )            \n            SELECT cast(created as long), cast(1000 as short), cast(case when sm >= 0 then sm else 32767 end as short) FROM (\n              SELECT created, cast(ceil(sum(rowCount) / 1000.0) as short) sm\n              FROM ${y.WAL}\n              WHERE created > '${e}' and rowCount > 0\n              SAMPLE BY 1h align to calendar\n            )\n            UNION ALL \n            SELECT cast(created as long), cast(2000 as short), cast(case when sm >= 0 then sm else 32767 end as short) FROM (\n              SELECT created, cast(count() as short) sm\n              FROM ${y.WAL}\n              WHERE created > '${e}' and rowCount > 0\n              SAMPLE BY 1h align to calendar\n            )\n            UNION ALL \n            SELECT cast(created as long), cast(3000 as short), cast(case when sm >= 0 then sm else 32767 end as short) FROM (\n              SELECT created, cast(max(latency) / 1000.0 as short) sm\n              FROM ${y.WAL}\n              WHERE created > '${e}' and rowCount > 0\n              SAMPLE BY 1h align to calendar\n             )\n             UNION ALL\n             SELECT * FROM tel\n             `.replace(/\s+/g," ").trim()))}return gn.C})),(0,dn.M)(t),(0,x.w)((([e,t])=>{const n=Tn.telemetry.getRemoteConfig(t),r=Tn.telemetry.getConfig(t);return null!=r?.id&&e.type===T.DQL&&e.count>0?k(`${E}/add`,{method:"POST",body:JSON.stringify({columns:e.columns,dataset:e.dataset,id:r.id,version:r.version,os:r.os,package:r.package})},!1).pipe((0,S.U)((t=>{if(!t.error){const t=e.dataset[e.count-1][0];return ln({...n,lastUpdated:t})}})),(0,un.g)(36e5),(0,mn.h)((e=>!!e))):gn.C})))],vn=(0,sn.l)(...Cn),xn={sideMenuOpened:!1,activeSidebar:void 0,activeBottomPanel:"zeroState",imageToZoom:void 0},_n={notifications:[],tables:[],columns:{},running:Vt.NONE,queryNotifications:{},activeNotification:null,queriesToRun:[]},Sn={},kn=(0,i.UY)({console:(e=xn,t)=>{switch(t.type){case Ht.TOGGLE_SIDE_MENU:return{...e,sideMenuOpened:!e.sideMenuOpened};case Ht.SET_ACTIVE_SIDEBAR:return{...e,activeSidebar:t.payload};case Ht.SET_ACTIVE_BOTTOM_PANEL:return{...e,activeBottomPanel:t.payload};case Ht.SET_IMAGE_TO_ZOOM:return{...e,imageToZoom:t.payload};default:return e}},query:(e=_n,t)=>{switch(t.type){case qt.ADD_NOTIFICATION:{const{query:n,isExplain:r=!1,updateActiveNotification:a=!0,bufferId:o}=t.payload,i={...t.payload,createdAt:t.payload.createdAt||new Date},{bufferId:l,...s}=i;if(void 0!==o){const t=e.queryNotifications[o]||{},i={...t[n]||{},latest:s,[r?"explain":"regular"]:s};return{...e,notifications:[...e.notifications,s],queryNotifications:{...e.queryNotifications,[o]:{...t,[n]:i}},...a?{activeNotification:s}:{}}}return{...e,notifications:[...e.notifications,s],...a?{activeNotification:s}:{}}}case qt.CLEANUP_NOTIFICATIONS:return{...e,notifications:[],queryNotifications:{},activeNotification:null};case qt.CLEANUP_BUFFER_NOTIFICATIONS:{const{bufferId:n}=t.payload,r=e.queryNotifications[n]||{},a=e.notifications.filter((e=>!r[e.query])),o={...e.queryNotifications};delete o[n];const i=e.activeNotification&&r[e.activeNotification.query]?null:e.activeNotification;return{...e,notifications:a,queryNotifications:o,activeNotification:i}}case qt.SET_ACTIVE_NOTIFICATION:return{...e,activeNotification:t.payload};case qt.REMOVE_NOTIFICATION:{const{bufferId:n}=t,r=e.notifications.filter((e=>e.query!==t.payload));if(void 0!==n){const a={...e.queryNotifications[n]||{}};return delete a[t.payload],{...e,notifications:r,queryNotifications:{...e.queryNotifications,[n]:a}}}return{...e,notifications:r}}case qt.UPDATE_NOTIFICATION_KEY:{const{oldKey:n,newKey:r,bufferId:a}=t.payload;if(r===n)return{...e};if(void 0!==a){const t={...e.queryNotifications[a]||{}};t[n]&&(t[r]=t[n],delete t[n]);const o=e.notifications.map((e=>e.query===n?{...e,query:r}:e)),i=e.activeNotification?.query===n?{...e.activeNotification,query:r}:e.activeNotification;return{...e,notifications:o,queryNotifications:{...e.queryNotifications,[a]:t},activeNotification:i}}const o=e.notifications.map((e=>e.query===n?{...e,query:r}:e)),i=e.activeNotification?.query===n?{...e.activeNotification,query:r}:e.activeNotification;return{...e,notifications:o,activeNotification:i}}case qt.SET_RESULT:return{...e,result:t.payload};case qt.STOP_RUNNING:return{...e,running:Vt.NONE};case qt.TOGGLE_RUNNING:return e.running!==Vt.NONE?{...e,running:Vt.NONE}:{...e,running:t.payload??Vt.QUERY};case qt.SET_TABLES:return{...e,tables:t.payload.tables};case qt.SET_COLUMNS:{const{columns:n}=t.payload,r=n.reduce(((e,t)=>(e[t.table_name]=[...e[t.table_name]||[],t],e)),{});return{...e,columns:r}}case qt.SET_QUERIES_TO_RUN:return{...e,queriesToRun:t.payload};default:return e}},telemetry:(e=Sn,t)=>{switch(t.type){case $t.SET_CONFIG:return{...e,config:t.payload};case $t.SET_REMOTE_CONFIG:return{...e,remoteConfig:{cta:!1,lastUpdated:new Date((new Date).getTime()-321408e5).toISOString(),...t.payload}};default:return e}}}),Tn={console:{getSideMenuOpened:e=>e.console.sideMenuOpened,getActiveSidebar:e=>e.console.activeSidebar,getActiveBottomPanel:e=>e.console.activeBottomPanel,getImageToZoom:e=>e.console.imageToZoom},query:{getNotifications:e=>e.query.notifications,getQueryNotifications:e=>e.query.queryNotifications,getQueryNotificationsForBuffer:e=>t=>t.query.queryNotifications[e],getActiveNotification:e=>e.query.activeNotification,getQueriesToRun:e=>e.query.queriesToRun,getResult:e=>e.query.result,getRunning:e=>e.query.running,getTables:e=>e.query.tables,getColumns:e=>e.query.columns},telemetry:{getConfig:e=>e.telemetry.config,getRemoteConfig:e=>e.telemetry.remoteConfig}};var Nn=n(95726);const In=s.ZP.div.withConfig({displayName:"CtaBanner__Wrapper"})(["\n  box-sizing: content-box;\n  position: fixed;\n  display: flex;\n  bottom: 1.6rem;\n  left: 50%;\n  transform: translateX(-50%);\n  padding: 0.4rem 1.5rem;\n  align-items: center;\n  justify-content: center;\n  background: ",";\n  overflow: hidden;\n  border-radius: 10rem;\n  max-width: none;\n  white-space: nowrap;\n  min-width: fit-content;\n"],D("pinkPrimary")),Rn=s.ZP.p.withConfig({displayName:"CtaBanner__Text"})(["\n  font-size: 1.5rem;\n  color: ",";\n  margin: 0 5rem 0 0;\n\n  @media (max-width: 700px) {\n    display: none;\n  }\n"],D("white")),On=s.ZP.a.withConfig({displayName:"CtaBanner__DownloadLink"})(["\n  display: inline-flex;\n  height: 3rem;\n  padding: 0 1.3rem;\n  align-items: center;\n  justify-content: center;\n  background: ",";\n  border-radius: 4px;\n  border: 1px solid ",";\n  outline: 0;\n  font-weight: 700;\n  line-height: 1.15;\n  cursor: pointer;\n  text-decoration: none;\n  margin-right: 2rem;\n  font-size: 13.13px;\n  color: ",";\n\n  &:hover {\n    background: "," !important;\n    border-color: "," !important;\n    text-decoration: underline;\n    color: "," !important;\n  }\n\n  @media (max-width: 700px) {\n    margin-left: 1rem;\n  }\n"],D("white"),D("white"),D("black"),D("white"),D("white"),D("black")),An=s.ZP.a.withConfig({displayName:"CtaBanner__EnterpriseLink"})(["\n  font-size: 13.13px;\n  font-weight: 700;\n  color: ",";\n  text-decoration: none;\n  margin-right: 2rem;\n\n  &:hover {\n    text-decoration: underline;\n  }\n\n  @media (max-width: 700px) {\n    display: none;\n  }\n"],D("white")),Mn=(0,s.ZP)(An).withConfig({displayName:"CtaBanner__EnterpriseLinkSmall"})(["\n  display: none;\n\n  @media (max-width: 700px) {\n    display: block;\n  }\n"]),Pn=(0,s.ZP)(xe.x).withConfig({displayName:"CtaBanner__CloseIcon"})(["\n  color: ",";\n  cursor: pointer;\n"],D("white")),Ln=({onClick:e})=>r.createElement(In,null,r.createElement(Rn,null,"Ready to get started?"),r.createElement(On,{href:"https://questdb.com/download",target:"_blank",rel:"noopener noreferrer"},"Download"),r.createElement(An,{href:"https://questdb.com/enterprise",target:"_blank",rel:"noopener noreferrer"},"Learn more about QuestDB Enterprise →"),r.createElement(Mn,{href:"https://questdb.com/enterprise",target:"_blank",rel:"noopener noreferrer"},"QuestDB Enterprise →"),r.createElement(Pn,{onClick:e,size:"22px"})),Dn=e=>e["acl.oidc.host"]?`${e["acl.oidc.tls.enabled"]?"https":"http"}://${e["acl.oidc.host"]}:${e["acl.oidc.port"]}`:"",Bn=async(e,t)=>fetch(`${Dn(e)}${e["acl.oidc.token.endpoint"]}`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(t)}),zn=e=>e["acl.enabled"]&&!e["acl.basic.auth.realm.enabled"],Fn=e=>localStorage.getItem(`${yn.SSO_USERNAME}.${e}`)??"";var Hn=n(77798),Un=n(30919);var Zn=n(46193),Vn=n(65742),qn=n(79409);const $n=({basicAuthEnabled:e,errorMessage:t,onLogout:n})=>r.createElement(Ee,null,r.createElement(Zn.x,{flexDirection:"column",gap:"2rem"},r.createElement(Pe,{color:"foreground"},t),!e&&r.createElement(Vn.z,{"data-hook":"button-login-with-other-account",skin:"secondary",prefixIcon:r.createElement(qn.n,{size:"18px"}),onClick:()=>n()},"Login")));var jn=n(80678),Gn=n(7523);const Wn=s.ZP.div.withConfig({displayName:"FormItem__Root"})(["\n  display: grid;\n  gap: 1rem;\n  white-space: normal;\n  width: 100%;\n\n  ","\n"],(({border:e,theme:t})=>e&&`\n    border-bottom: 1px ${t.color.background} solid;\n  `)),Qn=s.ZP.div.withConfig({displayName:"FormItem__Control"})(["\n  display: grid;\n  gap: 1rem;\n  ","\n"],(e=>e.disabled&&"opacity: 0.7;")),Yn=s.ZP.div.withConfig({displayName:"FormItem__LabelWrapper"})(["\n  display: flex;\n  align-self: center;\n  justify-content: space-between;\n  align-items: baseline;\n  width: 100%;\n"]),Kn=s.ZP.label.withConfig({displayName:"FormItem__Label"})(["\n  color: ",";\n"],(({theme:e})=>e.color.gray2)),Xn=s.ZP.span.withConfig({displayName:"FormItem__AfterLabel"})(["\n  color: ",";\n"],(({theme:e})=>e.color.gray2));var Jn=n(87563),er=n(68004),tr=n(44047);function nr(){return nr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nr.apply(this,arguments)}const rr=s.ZP.div.withConfig({displayName:"FormInput__Wrapper"})(["\n  display: flex;\n  width: 100%;\n  ","\n"],(e=>"off"===e.autoComplete&&"\n    // Hide the LastPass+NordPass icons\n    [data-lastpass-icon-root],\n    span[data-np-uid] {\n      display: none !important;\n    }\n  ")),ar=(0,s.ZP)(Jn.I).withConfig({displayName:"FormInput__Input"})(["\n  ","\n"],(e=>e.disabled&&"opacity: 0.7;")),or=(0,s.ZP)(Vn.z).withConfig({displayName:"FormInput__ToggleButton"})(["\n  cursor: pointer;\n  border-radius: 0;\n\n  ","\n"],(e=>e.last&&"\n    border-top-right-radius: 0.4rem;\n    border-bottom-right-radius: 0.4rem;\n  "));var ir=n(81213);function lr(){return lr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lr.apply(this,arguments)}var sr=n(98378);function cr(){return cr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cr.apply(this,arguments)}const dr=s.ZP.div.withConfig({displayName:"FormGroup__Root"})(["\n  width: 100%;\n  display: grid;\n  grid-template-columns: repeat(",", minmax(0, 1fr));\n  gap: ",";\n"],(({columns:e})=>e),(({gap:e})=>e));function ur(){return ur=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ur.apply(this,arguments)}function mr(){return mr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mr.apply(this,arguments)}const pr=(0,s.ZP)(Jn.I).attrs({as:"textarea"}).withConfig({displayName:"FormTextArea__TextArea"})(["\n  width: 100%;\n  height: inherit;\n"]),gr=({name:e,method:t="post",onSubmit:n,onChange:a,onDirtyChange:o,children:i,validationSchema:l,defaultValues:s,preventSubmitOnEnter:c})=>{let d={};s&&(d.defaultValues=s),l&&(d.resolver=(0,Gn.L)(l));const u=(0,jn.cI)(d);return(0,r.useEffect)((()=>{a&&u.watch(a)}),[]),(0,r.useEffect)((()=>{o&&o(u.formState.isDirty,u.formState.dirtyFields)}),[u.formState]),Object.keys(u.formState.errors).length>0&&console.log("Schema validation errors",u.formState.errors),r.createElement(jn.RV,u,r.createElement("form",{name:e,onSubmit:async e=>{e.stopPropagation(),await u.handleSubmit(n)(e)},method:t,onKeyDown:e=>{"Enter"===e.key&&c&&e.preventDefault()}},i))};gr.Item=({name:e,label:t,afterLabel:n,helperText:a,children:o,className:i,disabled:l,border:s,required:c})=>{const{formState:{errors:d}}=(0,jn.Gc)();return r.createElement(Wn,{className:i,disabled:l,border:s},r.createElement(Qn,{disabled:l},t&&e&&r.createElement(Yn,null,r.createElement(Kn,{htmlFor:e},t,c?r.createElement(Pe,{color:"red"}," *"):""),r.createElement(Xn,null,n)),o),e&&!d[e]&&a&&("string"==typeof a?r.createElement(Pe,{color:"comment"},a):a),e&&d&&d[e]&&r.createElement(Pe,{color:"red"},d[e]?.message))},gr.Input=({name:e,placeholder:t,type:n="text",disabled:a,showPassword:o,autoFocus:i,autoComplete:l,...s})=>{const{register:c,setFocus:d}=(0,jn.Gc)(),[u,m]=(0,r.useState)(o),p=(0,r.useCallback)((()=>{m(!u)}),[u,m]);return(0,r.useEffect)((()=>{i&&d(e)}),[]),r.createElement(rr,{autoComplete:l},r.createElement(ar,nr({},c(e,{valueAsNumber:"number"===n}),{name:e,placeholder:t,type:u?"text":n,disabled:a,showPassword:o,autoComplete:l},s)),"password"===n&&r.createElement(or,{skin:"secondary",onClick:p,title:"Toggle password visibility",type:"button",last:!0},u?r.createElement(er.b,{size:"15px"}):r.createElement(tr._,{size:"15px"})))},gr.Checkbox=({name:e,checked:t,...n})=>{const{register:a}=(0,jn.Gc)();return r.createElement("div",{style:{width:"100%",display:"flex"}},r.createElement(ir.X,lr({},n,a(e))))},gr.Select=({name:e,...t})=>{const{register:n}=(0,jn.Gc)();return r.createElement(sr.P,cr({},n(e),t))},gr.Group=({children:e,columns:t,gap:n="2rem"})=>r.createElement(dr,{columns:t??r.Children.count(r.Children.toArray(e)),gap:n},e),gr.Submit=({children:e,disabled:t,variant:n,prefixIcon:a,...o})=>r.createElement(Vn.z,ur({type:"submit",disabled:t,skin:n??"primary",prefixIcon:a,dataHook:"form-submit-button"},o),e),gr.Cancel=({children:e,disabled:t,variant:n,prefixIcon:a,defaultValues:o,onClick:i})=>{const{reset:l}=(0,jn.Gc)();return r.createElement(Vn.z,{type:"button",onClick:()=>{l(o),i&&i()},disabled:t,skin:n??"secondary",prefixIcon:a,dataHook:"form-cancel-button"},e)},gr.TextArea=({name:e,placeholder:t,rows:n,autoFocus:a,...o})=>{const{register:i,setFocus:l}=(0,jn.Gc)();return(0,r.useEffect)((()=>{a&&l(e)}),[]),r.createElement(pr,mr({},i(e),{rows:n??4,placeholder:t},o))};var fr=n(29674),hr=n.n(fr);const br=s.ZP.div.withConfig({displayName:"login__Header"})(["\n  position: absolute;\n  width: 100%;\n  padding: 30px;\n"]),yr=s.ZP.div.withConfig({displayName:"login__ErrorContainer"})(["\n  @keyframes smooth-appear {\n    to {\n      transform: translateY(0);\n      opacity: 1;\n    }\n  }\n\n  @keyframes smooth-disappear {\n    to {\n      transform: translateY(10px);\n      opacity: 0;\n    }\n  }\n\n  background: gray;\n  color: white;\n  padding: 20px;\n  margin-top: 10px;\n  opacity: 0;\n  transform: translateY(10px);\n  border-radius: 10px;\n  text-align: center;\n\n  ","\n"],(({hasError:e})=>e?"\n  animation: smooth-appear 0.5s ease forwards;\n  ":"animation: smooth-disappear 0.5s ease forwards;")),Er=s.ZP.div.withConfig({displayName:"login__Container"})(["\n  margin-left: auto;\n  margin-right: auto;\n  margin-top: 4%;\n  width: 500px;\n  font-size: 16px;\n  transition: height 10s ease;\n"]),wr=s.ZP.h2.withConfig({displayName:"login__Title"})(["\n  color: white;\n  text-align: start;\n  font-weight: 600;"]),Cr=s.ZP.div.withConfig({displayName:"login__SSOCard"})(["\n  button {\n    padding-top: 2rem;\n    padding-bottom: 2rem;\n    width: 100%;\n    margin-bottom: 10px;\n  }\n  margin-bottom: 10px;\n"]),vr=s.ZP.div.withConfig({displayName:"login__Card"})(["\n  border-radius: ",';\n\n  @keyframes horizontal-shaking {\n    0% {\n      transform: translateX(0);\n    }\n    25% {\n      transform: translateX(5px);\n    }\n    50% {\n      transform: translateX(-5px);\n    }\n    75% {\n      transform: translateX(5px);\n    }\n    100% {\n      transform: translateX(0);\n    }\n  }\n\n  button[type="submit"] {\n    padding-top: 2rem;\n    padding-bottom: 2rem;\n    border-radius: 5px;\n    width: 100%;\n    margin-top: 40px;\n  }\n\n  ','\n\n  button {\n    padding-top: 2rem;\n    padding-bottom: 2rem;\n    border-radius: 0 5px 5px 0;\n  }\n\n  input[name="password"] {\n    padding-top: 2rem;\n    padding-bottom: 2rem;\n    border-radius: 5px 0 0 5px;\n  }\n\n  input {\n    padding-top: 2rem;\n    padding-bottom: 2rem;\n    border-radius: 5px;\n    box-shadow: 0 0 0 30px #44475a inset !important;\n    -webkit-text-fill-color: white;\n  }\n\n  label {\n    margin-top: 20px;\n  }\n'],(({theme:e})=>e.borderRadius),(({hasError:e})=>e&&'\n    button[type="submit"] {\n      animation: horizontal-shaking 0.3s ease-in-out;\n    }\n  ')),xr=(0,s.ZP)(Vn.z).withConfig({displayName:"login__StyledButton"})(["\n  padding-top: 2rem;\n  padding-bottom: 2rem;\n"]),_r=s.ZP.div.withConfig({displayName:"login__Line"})(['\n  position: relative;\n  text-align: center;\n\n  &:before {\n    content: "";\n    position: absolute;\n    top: 50%;\n    left: 0;\n    width: 100%;\n    height: 1px;\n    background: ',";\n  }\n"],(({theme:e})=>e.color.selection)),Sr=s.ZP.div.withConfig({displayName:"login__TooltipArrow"})(['\n  &::before {\n    position: absolute;\n    width: 7px;\n    height: 7px;\n    top: -4px;\n    left: 50%;\n    content: "";\n    transform: rotate(45deg);\n    background: gray;\n    border-left: 1px solid gray;\n    border-radius: 1px;\n    border-right: none;\n    border-bottom: none;\n  }\n']),kr=(0,s.ZP)(Pe).withConfig({displayName:"login__LineText"})(["\n  position: relative;\n  z-index: 1;\n  background: ",";\n  padding: 0 1.5rem;\n"],(({theme:e})=>e.color.backgroundDarker)),Tr=s.ZP.div.withConfig({displayName:"login__Footer"})(["\n  width: 700px;\n  text-align: center;\n  padding: 20px;\n  margin-top: 40px;\n  margin-right: auto;\n  margin-left: auto;\n"]),Nr=hr().object({username:hr().string().required().messages({"string.empty":"User name is required"}),password:hr().string().required().messages({"string.empty":"Password is required"})}),Ir=({onOAuthLogin:e,onBasicAuthSuccess:t})=>{const{settings:n}=Hr(),a="EE"===n["release.type"],[o,i]=r.useState(),l=n["acl.oidc.enabled"]&&n["acl.oidc.client.id"]?Fn(n["acl.oidc.client.id"]):"",s=a?{query:e=>`alter user '${e}' create token type rest with ttl '1d' refresh transient`,store:async(e,t,n)=>{const r=(await e.json()).dataset[0][1];hn(yn.REST_TOKEN,r)}}:{query:()=>"select * from long_sequence(1)",store:async(e,t,n)=>{hn(yn.BASIC_AUTH_HEADER,`Basic ${btoa(`${t}:${n}`)}`)}};return(0,r.useEffect)((()=>{setTimeout((()=>{i(void 0)}),5e3)}),[o]),n["acl.basic.auth.realm.enabled"]?null:r.createElement("div",{"data-hook":"auth-login"},r.createElement(br,null,r.createElement("a",{href:"https://questdb.io"},r.createElement("img",{alt:"QuestDB logotype",height:"20",src:"assets/questdb-logotype.svg"}))),r.createElement(Er,null,n["acl.oidc.enabled"]&&r.createElement(r.Fragment,null,r.createElement(wr,{style:{marginBottom:"4rem"}},"Single Sign-On"),r.createElement(Cr,null,!!l&&r.createElement(xr,{"data-hook":"button-sso-continue",skin:"primary",prefixIcon:r.createElement(qn.n,{size:"18px"}),onClick:()=>e(!1)},"Continue as ",l),r.createElement(xr,{"data-hook":"button-sso-login",skin:l?"transparent":"primary",prefixIcon:l?void 0:r.createElement(qn.n,{size:"18px"}),onClick:()=>e(!0)},l?"Choose a different account":"Continue with SSO"),r.createElement(_r,{style:{marginBottom:"4rem",marginTop:"2rem"}},r.createElement(kr,{color:"gray2"},"or")))),r.createElement(wr,null,"Sign In"),r.createElement(vr,{hasError:o},r.createElement(gr,{name:"login",onSubmit:async e=>{const{username:n,password:r}=e;try{const e=await fetch(`exec?query=${s.query(n)}`,{headers:{Authorization:`Basic ${btoa(`${n}:${r}`)}`}});if(200===e.status)return await s.store(e,n,r),t();401===e.status?i("Invalid user name or password"):403===e.status?i("Unauthorized to use the Web Console"):i("Login failed, status code: "+e.status)}catch(e){i("Error occurred while trying to login")}},defaultValues:{},validationSchema:Nr},r.createElement(gr.Item,{name:"username",label:"User name"},r.createElement(gr.Input,{name:"username",placeholder:"johndoe"})),r.createElement(gr.Item,{name:"password",label:"Password"},r.createElement(gr.Input,{name:"password",type:"password",placeholder:"••••••••"})),r.createElement(gr.Submit,{variant:"primary"},"Sign In"),r.createElement(yr,{hasError:o},r.createElement(Sr,null),o)))),r.createElement(Tr,null))};var Rr=n(17093),Or=n(91197);const Ar=()=>r.createElement("svg",{width:"95",height:"23",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 95 23"},r.createElement("defs",null,r.createElement("path",{id:"reuse-0",fillOpacity:".6",d:"M0 0h95v23H0z"})),r.createElement("defs",null,r.createElement("linearGradient",{id:"e",x1:"323.795",x2:"72.1141",y1:"283.316",y2:"22.6459",gradientTransform:"scale(.08058 .08127)",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:"0",stopColor:"#892c6c"}),r.createElement("stop",{offset:"1",stopColor:"#d14671"})),r.createElement("linearGradient",{id:"f",x1:"57.9878",x2:"318.658",y1:"17.5099",y2:"279.464",gradientTransform:"scale(.08058 .08127)",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:"0",stopColor:"#c34170"}),r.createElement("stop",{offset:"1",stopColor:"#8b2c6c"})),r.createElement("linearGradient",{id:"h",x1:"312.238",x2:"46.4317",y1:"276.898",y2:"17.5118",gradientTransform:"scale(.08058 .08127)",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:"0",stopColor:"#882b6b"}),r.createElement("stop",{offset:"1",stopColor:"#cf4671"})),r.createElement("linearGradient",{id:"c",x1:"34.7127",x2:"70.973",y1:"192.381",y2:"89.5761",gradientTransform:"scale(.08058 .08127)",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:"0",stopColor:"#fff",stopOpacity:".380392"}),r.createElement("stop",{offset:".8598",stopColor:"#fff",stopOpacity:".0117647"}),r.createElement("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})),r.createElement("clipPath",{id:"d"},r.createElement("path",{d:"M.015625.0664062H19V22.988281H.015625zm0 0"})),r.createElement("clipPath",{id:"g"},r.createElement("path",{d:"M8 11h18.351562v11.988281H8zm0 0"})),r.createElement("clipPath",{id:"i"},r.createElement("path",{d:"M.015625.0664062h26.335937V22.988281H.015625zm0 0"})),r.createElement("clipPath",{id:"b"},r.createElement("use",{xlinkHref:"#reuse-0"})),r.createElement("filter",{id:"a",width:"100%",height:"100%",x:"0%",y:"0%",filterUnits:"objectBoundingBox"},r.createElement("feColorMatrix",{in:"SourceGraphic",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 1 0"})),r.createElement("mask",{id:"k"},r.createElement("g",{filter:"url(#a)"},r.createElement("use",{fillOpacity:".6",xlinkHref:"#reuse-0"}))),r.createElement("g",{id:"j",clipPath:"url(#b)"},r.createElement("path",{fill:"url(#c)",d:"M1.542969 5.808594C-1.25 13.828125 7.09375 17.175781 7.09375 17.175781c-.894531-.660156-2.011719-2.207031-2.347656-3.3125-.707032-2.28125-.484375-4.082031.671875-6.070312"}))),r.createElement("path",{fill:"#fff",d:"M79.289062 17.136719c3.59375 0 5.722657-2.25 5.722657-5.988281 0-3.722657-2.128907-5.964844-5.640625-5.964844h-4.074219v11.953125zm-1.859374-1.871094V7.058594H79.25c2.394531 0 3.640625 1.355468 3.640625 4.089844 0 2.75-1.246094 4.117187-3.703125 4.117187zm0 0M86.207031 17.136719h4.769531C93.675781 17.136719 95 15.742188 95 13.882812c0-1.808593-1.265625-2.871093-2.519531-2.9375v-.117187c1.148437-.273437 2.058593-1.089844 2.058593-2.542969 0-1.78125-1.265624-3.101562-3.820312-3.101562h-4.511719zm2.132813-1.808594v-3.5h2.355468c1.316407 0 2.132813.816406 2.132813 1.882813 0 .953124-.644531 1.617187-2.191406 1.617187zm0-5.058594V6.972656H90.5c1.253906 0 1.90625.667969 1.90625 1.59375 0 1.046875-.84375 1.703125-1.953125 1.703125zm0 0M40.621094 11.175781c0-3.785156-2.277344-6.015625-5.304688-6.015625-3.03125 0-5.304687 2.230469-5.304687 6.015625 0 3.777344 2.273437 6.011719 5.304687 6.011719.734375 0 1.421875-.132812 2.046875-.382812l.953125 1.226562h2.027344l-1.601562-2.078125c1.160156-1.03125 1.878906-2.660156 1.878906-4.777344zm-6.015625 1.917969l1.5625 2.082031c-.269531.074219-.554688.109375-.851563.109375-1.878906 0-3.203125-1.449218-3.203125-4.109375 0-2.664062 1.324219-4.113281 3.203125-4.113281 1.882813 0 3.203125 1.449219 3.203125 4.113281 0 1.4375-.386719 2.519531-1.039062 3.210938L36.5 13.09375zm0 0M47.355469 13.179688c0 1.335937-.941407 2-1.84375 2-.980469 0-1.632813-.703126-1.632813-1.820313V8.089844h-2.039062v5.589844c0 2.109374 1.164062 3.367187 2.867187 3.367187 1.296875 0 2.226563-.753906 2.621094-1.738281h.089844v1.738281h1.976562V8.089844h-2.039062zm0 0M54.804688 17.199219c2.019531 0 3.40625-1 3.765624-2.527344l-1.90625-.21875c-.273437.746094-.953124 1.132813-1.832031 1.132813-1.316406 0-2.191406-.878907-2.207031-2.382813h6.03125v-.632813c0-3.082031-1.828125-4.4375-3.957031-4.4375-2.480469 0-4.097657 1.847657-4.097657 4.554688 0 2.757812 1.59375 4.511719 4.203126 4.511719zm-2.175782-5.390625c.0625-1.121094.878906-2.0625 2.097656-2.0625 1.171876 0 1.960938.867187 1.972657 2.0625zm0 0M66.945312 10.566406c-.28125-1.484375-1.453124-2.433594-3.480468-2.433594-2.085938 0-3.507813 1.039063-3.5 2.664063-.007813 1.28125.769531 2.125 2.433594 2.476563l1.476562.3125c.796875.175781 1.167969.503906 1.167969 1 0 .601562-.644531 1.050781-1.613281 1.050781-.933594 0-1.542969-.410157-1.71875-1.199219l-1.988282.195312c.253906 1.609376 1.589844 2.566407 3.714844 2.566407 2.164062 0 3.691406-1.136719 3.695312-2.800781-.003906-1.253907-.800781-2.019532-2.433593-2.378907l-1.476563-.320312C62.34375 11.5 61.992188 11.191406 62 10.683594c-.007812-.59375.640625-1.007813 1.492188-1.007813.941406 0 1.4375.519531 1.59375 1.097657zm0 0M73.160156 8.246094h-1.710937V6.144531h-2.039063v2.101563h-1.226562v1.601562h1.226562v4.882813c-.011718 1.652343 1.171875 2.460937 2.707032 2.417969.578124-.019532.980468-.132813 1.199218-.207032l-.34375-1.617187c-.113281.027343-.34375.078125-.597656.078125-.511719 0-.925781-.179688-.925781-1.015625V9.847656h1.710937zm0 0"}),r.createElement("g",{clipPath:"url(#d)"},r.createElement("path",{fill:"url(#e)",d:"M4.335938 11.507812c0-3.972656 3.242187-7.171874 7.265624-7.171874 1.453126 0 2.792969.402343 3.910157 1.140624l3.128906-3.054687C16.703125.949219 14.246094.0664062 11.601562.0664062 5.195312.0664062.015625 5.179688.015625 11.507812c0 6.332032 5.179687 11.445313 11.585937 11.445313v-4.269531c-4.023437 0-7.265624-3.199219-7.265624-7.175782zm0 0"})),r.createElement("path",{fill:"url(#f)",d:"M18.863281 11.507812h4.320313c0-3.015624-1.191406-5.773437-3.128906-7.835937L17 6.691406c1.15625 1.285156 1.863281 2.976563 1.863281 4.816406zm0 0"}),r.createElement("g",{clipPath:"url(#g)"},r.createElement("path",{fill:"url(#h)",d:"M15.140625 11.878906H8.769531l11.25 11.109375 6.332031-.035156zm0 0"})),r.createElement("g",{clipPath:"url(#i)"},r.createElement("use",{mask:"url(#k)",xlinkHref:"#j"})));var Mr=function(e){return e[e.loading=0]="loading",e[e.ready=1]="ready",e[e.error=2]="error",e}(Mr||{});const Pr={view:Mr.loading},Lr=(e,t)=>({...e,...t}),Dr=(0,r.createContext)({settings:{},preferences:{},consoleConfig:{},warnings:[],refreshSettingsAndPreferences:()=>Promise.resolve({settings:{},preferences:{}})}),Br=r.createElement(r.Fragment,null,"Error connecting to the database.",r.createElement("br",null),"Please, check if the server is running correctly."),zr=r.createElement(r.Fragment,null,"Error loading the console configuration file"),Fr=({children:e})=>{const[t,n]=(0,r.useReducer)(Lr,Pr),[a,o]=(0,r.useState)({}),[i,l]=(0,r.useState)({}),[s,c]=(0,r.useState)([]),[d,u]=(0,r.useState)({}),m={[Mr.loading]:()=>null,[Mr.ready]:()=>r.createElement(Dr.Provider,{value:{settings:a,consoleConfig:d,warnings:s,preferences:i,refreshSettingsAndPreferences:f}},e),[Mr.error]:()=>r.createElement(Ee,null,r.createElement(Zn.x,{flexDirection:"column",gap:"2rem"},r.createElement("a",{href:"https://questdb.io"},r.createElement(Ar,null)),r.createElement(Rr.x,{align:"center",size:"lg"},"Error connecting to the database.",r.createElement("br",null),"Please, check if the server is running correctly."),r.createElement(Vn.z,{skin:"secondary",prefixIcon:r.createElement(Or.h,{size:"18px"}),onClick:()=>window.location.reload()},"Retry")))},p=async(e,t)=>{try{const r=await fetch(e);if(200===r.status)return await r.json();n({view:Mr.error,errorMessage:t})}catch(e){n({view:Mr.error,errorMessage:t})}},g=e=>{if(e?.instance_name){const t=e?.instance_type?`${e.instance_type.charAt(0).toUpperCase()}${e.instance_type.slice(1)}`:"QuestDB",n=`${e.instance_name} | ${t}`;document.title!==n&&(document.title=n)}l(e)},f=async()=>{const e=await p("settings",Br),t=e.config,n={version:e["preferences.version"],...e.preferences};return e?(o(t),g(n),{settings:t,preferences:n}):{settings:{},preferences:{}}};return(0,r.useEffect)((()=>{(async()=>{const e=await p("settings",Br),t=await p("warnings",Br),n=await p("assets/console-configuration.json",zr);e&&(o(e.config),g({version:e["preferences.version"],...e.preferences}),hn(yn.RELEASE_TYPE,e.config["release.type"])),t&&c(t),n&&u(n)})().then((()=>n({view:Mr.ready})))}),[]),r.createElement(r.Fragment,null,m[t.view]())},Hr=()=>(0,r.useContext)(Dr);var Ur=function(e){return e[e.ready=0]="ready",e[e.loading=1]="loading",e[e.error=2]="error",e[e.login=3]="login",e}(Ur||{});const Zr={view:Ur.loading},Vr={sessionData:void 0,logout:()=>{},refreshAuthToken:async()=>({}),redirectToAuthorizationUrl:()=>{}};class qr{constructor(e,t){this.error=e,this.error_description=t}}const $r=(0,r.createContext)(Vr),jr=(e,t)=>({...e,...t}),Gr=({children:e})=>{const{settings:t}=Hr(),[n,a]=(0,r.useState)(void 0),[o,i]=(0,r.useState)(void 0),[l,s]=(0,r.useReducer)(jr,Zr),c=(e,t)=>{if(e.access_token)e.groups_encoded_in_token=t["acl.oidc.groups.encoded.in.token"],e.expires_at=(n=e.expires_in,new Date((new Date).getTime()+1e3*n)).toString(),M.setAuthPayload(e),a(e),history.replaceState&&history.replaceState(null,"",location.pathname+location.search.replace(/[?&]code=[^&]+/,"").replace(/^&/,"?"));else{const t=e;s({view:Ur.error,errorMessage:t.error_description??"Error logging in. Please try again."})}var n},d=async(e,t)=>{const n=await Bn(e,{grant_type:"refresh_token",refresh_token:t,client_id:e["acl.oidc.client.id"]}),r=await n.json();return c(r,e),r},u=async()=>{200===(await fetch("exec?query=select 42")).status?s({view:Ur.ready}):await u()},m=()=>{const e=fn(yn.REST_TOKEN),t=fn(yn.BASIC_AUTH_HEADER);s(e||t?{view:Ur.ready}:{view:Ur.login})},p=e=>{const n=(e=>e["acl.oidc.state.required"]?(()=>{const e=new Uint8Array(60);crypto.getRandomValues(e);const t=Un.DS.fromUint8Array(e,!0);return hn(yn.OAUTH_STATE,t),t})():null)(t),r=(e=>e["acl.oidc.pkce.required"]?(()=>{const e=new Uint8Array(60);crypto.getRandomValues(e);const t=Un.DS.fromUint8Array(e,!0);return hn(yn.PKCE_CODE_VERIFIER,t),t})():null)(t),a=(e=>e?(e=>{const t=[];for(let n=0;n<e.length;n++){const r=e.codePointAt(n);if(void 0===r)throw Error(n+" is out of bounds of string: "+e);t.push(r)}const n=new Uint8Array(Hn.sha256.create().update(t).array());return Un.DS.fromUint8Array(n,!0)})(e):null)(r);hn(yn.OAUTH_PROMPT,e??""),window.location.href=(({settings:e,code_challenge:t=null,state:n=null,prompt:r,redirect_uri:a})=>{const o={client_id:e["acl.oidc.client.id"]||"",response_type:"code",scope:e["acl.oidc.scope"]||"openid",redirect_uri:a},i=new URLSearchParams(o);return t&&(i.append("code_challenge",t),i.append("code_challenge_method","S256")),n&&i.append("state",n),r&&i.append("prompt",r),Dn(e)+e["acl.oidc.authorization.endpoint"]+"?"+i})({settings:t,code_challenge:a,state:n,prompt:e,redirect_uri:t["acl.oidc.redirect.uri"]||window.location.href})},g=e=>{var n;M.clearAuthPayload(),bn(yn.OAUTH_PROMPT),bn(yn.REST_TOKEN),bn(yn.BASIC_AUTH_HEADER),e&&t["acl.oidc.client.id"]&&(n=t["acl.oidc.client.id"],localStorage.removeItem(`${yn.SSO_USERNAME}.${n}`)),s({view:Ur.login})};(0,r.useEffect)((()=>{n&&s({view:Ur.ready})}),[n]),(0,r.useEffect)((()=>{O.subscribe(A.MSG_CONNECTION_FORBIDDEN,(e=>{e&&e.error.match(/Access denied.* \[HTTP]/gm)&&s({view:Ur.error,errorMessage:"Unauthorized to use the Web Console."})})),(async e=>{if(e["acl.enabled"])if(e["acl.oidc.enabled"]){O.subscribe(A.MSG_CONNECTION_UNAUTHORIZED,(()=>{const e=fn(yn.OAUTH_REDIRECT_COUNT);if(e){const t=parseInt(e);!isNaN(t)&&t>=5?(bn(yn.OAUTH_REDIRECT_COUNT),g(!0)):(hn(yn.OAUTH_REDIRECT_COUNT,JSON.stringify(e?parseInt(e)+1:1)),g())}else hn(yn.OAUTH_REDIRECT_COUNT,JSON.stringify(1)),g()})),O.subscribe(A.MSG_CONNECTION_OK,(()=>{bn(yn.OAUTH_REDIRECT_COUNT)}));const t=e["acl.oidc.client.id"]?Fn(e["acl.oidc.client.id"]):"",n=new URLSearchParams(window.location.search),r=n.get("code"),a=new qr(n.get("error"),n.get("error_description"));if(null!==r){const t=fn(yn.OAUTH_STATE);if(t){bn(yn.OAUTH_STATE);const e=n.get("state");if(!e||t!==e)return void g(!0)}try{const t=fn(yn.PKCE_CODE_VERIFIER),n=await Bn(e,{grant_type:"authorization_code",code:r,code_verifier:t,client_id:e["acl.oidc.client.id"],redirect_uri:e["acl.oidc.redirect.uri"]||window.location.origin+window.location.pathname}),a=await n.json();c(a,e)}catch(e){throw e}}else if(a.error){const e=fn(yn.OAUTH_PROMPT);bn(yn.OAUTH_PROMPT),"none"===e?p():(i(a.error+": "+a.error_description),s({view:Ur.error}))}else t&&!fn(yn.REST_TOKEN)?p("none"):m()}else e["acl.basic.auth.realm.enabled"]?await u():(O.subscribe(A.MSG_CONNECTION_UNAUTHORIZED,(()=>{g()})),m());else s({view:Ur.ready})})(t)}),[]);const f={[Ur.loading]:()=>null,[Ur.ready]:()=>r.createElement($r.Provider,{value:{sessionData:n,logout:g,refreshAuthToken:d,redirectToAuthorizationUrl:p}},e),[Ur.error]:()=>r.createElement($n,{errorMessage:o,onLogout:g,basicAuthEnabled:t["acl.basic.auth.realm.enabled"]??!1}),[Ur.login]:()=>r.createElement(Ir,{onOAuthLogin:e=>{p(e?"login":void 0)},onBasicAuthSuccess:()=>{s({view:Ur.ready})}})};return r.createElement(r.Fragment,null,f[l.view]())},Wr=()=>(0,r.useContext)($r),Qr=/Build Information: QuestDB ([\w- ]+ )?([0-9A-Za-z.-]*),/,Yr=/Commit Hash ([0-9A-Za-z]*)/,Kr=new P,Xr={quest:Kr,buildVersion:{type:"oss",version:""},commitHash:""},Jr=(0,r.createContext)(Xr),ea=({children:e})=>{const t=(0,o.I0)(),{settings:n}=Hr(),{sessionData:a,refreshAuthToken:i}=Wr(),[l,s]=(0,r.useState)(!zn(n)),[c,d]=(0,r.useState)(Xr.buildVersion),[u,m]=(0,r.useState)(""),p=async()=>{await Kr.queryRaw("SELECT 1"),s(!0)};return(0,r.useEffect)((()=>{a&&(async e=>{Kr.setCommonHeaders({Authorization:`Bearer ${e.groups_encoded_in_token?e.id_token:e.access_token}`}),Kr.refreshTokenMethod=()=>i(n,e.refresh_token),p()})(a)}),[a]),(0,r.useEffect)((()=>{const e=fn(yn.REST_TOKEN);if(e)Kr.setCommonHeaders({Authorization:`Bearer ${e}`}),p();else{const e=fn(yn.BASIC_AUTH_HEADER);e&&(Kr.setCommonHeaders({Authorization:e}),p())}Kr.queryRaw("select build",{limit:"0,1000"}).then((e=>{e.type===T.DQL&&1===e.count&&(d((e=>{const t=Qr.exec(e.toString());return t?{type:t[1]?t[1].trim().toLowerCase():"oss",version:t[2]}:{type:"dev"}})(e.dataset[0][0])),m((e=>{const t=Yr.exec(e.toString());return t?t[1]:""})(e.dataset[0][0])))}))}),[]),(0,r.useEffect)((()=>{l&&t(an())}),[l]),l?r.createElement(Jr.Provider,{value:{quest:Kr,buildVersion:c,commitHash:u}},e):null},ta="questdb-sql",na=e=>e.replace(/(?<!["'`])(--\s?.*$)/gm,((e,t)=>{if(t){const e=t.split("\n");return t.startsWith("--")&&e.length>1?"\n"+na(e[1]):""}return e})),ra=e=>{const t=e.getModel(),n=e.getSelection();return t&&n?t.getValueInRange(n):void 0},aa=(e,t)=>{const n=e.getModel();if(!n)return[];const r=e.getSelection(),a=r?n.getValueInRange(r):void 0;if(!r||!a){const t=ia(e);return t?[t]:[]}let o=n.getOffsetAt(r.getStartPosition()),i=n.getOffsetAt(r.getEndPosition());const l=ga(a);na(l).length>0&&(o+=a.indexOf(l),i=o+l.length);const s=t.find((e=>e.endOffset>=o)),c=t.filter((e=>e.startOffset<=i)).pop();if(!s||!c)return[];return sa(e,n.getPositionAt(s.startOffset),n.getPositionAt(c.endOffset)).map((e=>{const t=da(n,r,{startOffset:n.getOffsetAt({lineNumber:e.row+1,column:e.column}),endOffset:n.getOffsetAt({lineNumber:e.endRow+1,column:e.endColumn})}),a=n.getValueInRange(t);return na(ga(a))?{query:e.query,row:e.row,column:e.column,endRow:e.endRow,endColumn:e.endColumn,selection:{startOffset:n.getOffsetAt({lineNumber:t.startLineNumber,column:t.startColumn}),endOffset:n.getOffsetAt({lineNumber:t.endLineNumber,column:t.endColumn}),queryText:a}}:void 0})).filter(Boolean)},oa=(e,t,n)=>{const r=e.getValue({preserveBOM:!1,lineEnding:"\n"});if(!r||!na(r))return{sqlTextStack:[],nextSql:null};const a=t.lineNumber-1,o=t.column,i=n?{row:n.lineNumber-1,column:n.column}:{row:0,column:1};let l=0;if(n){const e=r.split("\n"),t=Math.min(i.row,e.length-1);for(let n=0;n<t;n++)void 0!==e[n]&&(l+=e[n].length+1);void 0!==e[t]&&(l+=Math.min(i.column-1,e[t].length))}let s=i.row,c=i.column;const d=[];let u=i.row,m=i.column,p=l-1,g=null,f=!1,h=[],b=[],y=!1,E=!1;for(;l<r.length&&("\n"===r[l]||" "===r[l]);)"\n"===r[l]?(s++,u++,c=1,m=1):(c++,m++),l++;p=l;let w=l;for(;w<r.length&&null===g;w++){switch(r[w]){case";":if(f||y||E){c++;break}s<a||s===a&&c<o?(d.push({row:u,col:m,position:p,endRow:s,endCol:c,limit:w}),u=s,m=c+1,p=w+1,c++):g={row:u,col:m,position:p,endRow:s,endCol:c,limit:w};break;case" ":p===w&&(u=s,m=c+1,p=w+1),c++;break;case"\n":y&&(y=!1,p===w-1&&(p=w,u=s,m=c)),s++,c=1,p===w&&(u=s,m=c,p=w+1);break;case"'":f=!f,c++;break;case"-":E||f||(h.push(w),2===h.length&&(h[0]+1===h[1]?(p===w-1&&(p=w,u=s,m=c),h=[],y=!0):h.shift())),c++;break;case"/":E||y||f||(0===b.length?b.push(w):b=[w]),E&&1===b.length&&b[0]+1===w&&(p===w-1&&(p=w+1,u=s,m=c+1),b=[],E=!1),c++;break;case"*":E||y||(1===b.length&&b[0]+1===w?(p===w-1&&(p=w,u=s,m=c),b=[],E=!0):b.length>0&&(b=[])),E&&(b=[w]),c++;break;default:c++}(y||E)&&p===w-1&&(p=w,u=s,m=c)}return g||(-1===p?r.substring(l):r.substring(p)).length>0&&(g={row:u,col:m,position:-1===p?l:p,endRow:s,endCol:c,limit:w}),{sqlTextStack:d.filter((e=>e.row!==e.endRow||e.col!==e.endCol)),nextSql:!g||g.row===g.endRow&&g.col===g.endCol?null:g}},ia=e=>{const t=e.getPosition(),n=e.getValue({preserveBOM:!1,lineEnding:"\n"});if(!n||!na(n)||!t)return;const{sqlTextStack:r,nextSql:a}=oa(e,t),o=t.lineNumber-1,i=r.length>0?r[r.length-1]:null,l=i?{start:i.row,end:i.endRow}:null,s=a?{start:a.row,end:a.endRow}:null,c=l&&o>=l.start&&o<=l.end,d=s&&o>=s.start&&o<=s.end;if(c&&!d)return{query:n.substring(i.position,i.limit),row:i.row,column:i.col,endRow:i.endRow,endColumn:i.endCol};if(d&&!c)return{query:n.substring(a.position,a.limit),row:a.row,column:a.col,endRow:a.endRow,endColumn:a.endCol};if(c&&d){const e=i.endCol;return t.column>e?{query:n.substring(a.position,a.limit),row:a.row,column:a.col,endRow:a.endRow,endColumn:a.endCol}:{query:n.substring(i.position,i.limit),row:i.row,column:i.col,endRow:i.endRow,endColumn:i.endCol}}},la=e=>{const t=ha(e),n=e.getValue({preserveBOM:!1,lineEnding:"\n"});if(!n||!na(n)||!t)return[];const{sqlTextStack:r,nextSql:a}=oa(e,t),o=r.map((e=>({query:n.substring(e.position,e.limit),row:e.row,column:e.col,endRow:e.endRow,endColumn:e.endCol}))),i=a?{query:n.substring(a.position,a.limit),row:a.row,column:a.col,endRow:a.endRow,endColumn:a.endCol}:null;return[...o,...i?[i]:[]]},sa=(e,t,n)=>{const r=e.getValue({preserveBOM:!1,lineEnding:"\n"});if(!(r&&na(r)&&t&&n))return[];const{sqlTextStack:a,nextSql:o}=oa(e,n,t),i=a.map((e=>({query:r.substring(e.position,e.limit),row:e.row,column:e.col,endRow:e.endRow,endColumn:e.endCol}))),l=o?{query:r.substring(o.position,o.limit),row:o.row,column:o.col,endRow:o.endRow,endColumn:o.endCol}:null;return[...i,...l?[l]:[]]},ca=(e,t,n)=>{if(n===t.query.length){const e=t.query.trimEnd().length,n=pa(t,e);return{startColumn:n.column,endColumn:n.column,startLineNumber:n.lineNumber,endLineNumber:n.lineNumber}}const r=pa(t,n),a=e.getModel();if(a){const e=a.getWordAtPosition(r);if(e)return{startColumn:e.startColumn,endColumn:e.endColumn,startLineNumber:r.lineNumber,endLineNumber:r.lineNumber}}return null},da=(e,t,n)=>{const r=e.getOffsetAt({lineNumber:t.startLineNumber,column:t.startColumn}),a=e.getOffsetAt({lineNumber:t.endLineNumber,column:t.endColumn}),o=Math.max(r,n.startOffset),i=Math.min(a,n.endOffset),l=e.getPositionAt(o),s=e.getPositionAt(i);return{startLineNumber:l.lineNumber,endLineNumber:s.lineNumber,startColumn:l.column,endColumn:s.column}},ua=(e,t,n={appendAt:"cursor"})=>{const r=e.getModel();if(r){const a=e.getPosition();if(a){const o=t.split("\n"),{prefix:i,suffix:l,lineStartOffset:s,selectStartOffset:c}=(({appendAt:e,model:t,position:n})=>{const r=1===n.lineNumber,a=n.lineNumber===t?.getValue().split("\n").length,o=t?.getLineContent(n.lineNumber),i=a?void 0:t?.getLineContent(n.lineNumber+1),l=!r&&!a,s={prefix:1,suffix:2,lineStartOffset:1,selectStartOffset:0},c=({end:[{when:()=>r,then:()=>({prefix:1,suffix:0})},{when:()=>!0,then:()=>({prefix:2,suffix:0,selectStartOffset:1})}],cursor:[{when:()=>""===t?.getValue(),then:()=>({prefix:0,suffix:1,lineStartOffset:0})},{when:()=>r&&""===o,then:()=>({prefix:0,lineStartOffset:0,suffix:""===i?0:1})},{when:()=>r&&""!==o,then:()=>({prefix:""===i?1:2,suffix:1,selectStartOffset:1})},{when:()=>l&&""===o,then:()=>({prefix:0,suffix:""===i?1:2})},{when:()=>l&&""!==o&&""!==i,then:()=>({prefix:1,suffix:2})},{when:()=>l&&""!==o&&""===i,then:()=>({prefix:1,suffix:1,selectStartOffset:1})},{when:()=>a,then:()=>({prefix:""===o?1:2,suffix:1,lineStartOffset:1,selectStartOffset:""===o?0:1})}]}[e].find((({when:e})=>e()))??{then:()=>s}).then();return{...s,...c}})({appendAt:n.appendAt,model:r,position:a}),d=(({model:e,position:t,lineStartOffset:n,newQueryLines:r,appendAt:a})=>{if("cursor"===a)return{lineStart:t.lineNumber+n,lineEnd:t.lineNumber+r.length,columnStart:1,columnEnd:r[r.length-1].length+1};const o=(e?.getValue().split("\n").length??0)+n;return{lineStart:o,lineEnd:o+r.length,columnStart:1,columnEnd:r[r.length-1].length+1}})({model:r,position:a,lineStartOffset:s,appendAt:n.appendAt,newQueryLines:o}),u={lineStart:d.lineStart+c,lineEnd:d.lineStart+c+(o.length-1),columnStart:1,columnEnd:d.columnEnd};(({editor:e,lineNumber:t,column:n,text:r})=>{e.executeEdits("",[{range:{startLineNumber:t,startColumn:n,endLineNumber:t,endColumn:n},text:r}])})({editor:e,lineNumber:d.lineStart,column:d.columnStart,text:`${"\n".repeat(i)}${t}${"\n".repeat(l)}`}),e.setSelection({startLineNumber:u.lineStart,endLineNumber:u.lineEnd,startColumn:u.columnStart,endColumn:u.columnEnd})}e.focus(),"end"===n.appendAt&&e.revealLine(r.getLineCount())}},ma=(e,t)=>{const n=t.getModel();n&&e.editor.setModelMarkers(n,ta,[])},pa=(e,t)=>{const n=Math.min(t,e.query.length);let r=0,a=1;for(let t=0;t<n;t++)"\n"===e.query.charAt(t)?(r++,a=1):a++;return{lineNumber:r+1+e.row,column:0===r?a+e.column:a}},ga=e=>{let t=e.trim();return t.endsWith(";")&&(t=t.slice(0,-1)),t.trim()},fa=(e,t)=>e.findMatches(t,!0,!1,!0,null,!0)??null,ha=e=>{const t=e.getModel();if(!t)return;const n=t.getLineCount();return{lineNumber:n,column:t.getLineContent(n).length+1}},ba=(e,t)=>{const n=e.getModel();return n?n.getOffsetAt({lineNumber:t.row+1,column:t.column}):0},ya=(e,t)=>{const n=ga(e);return`${n}@${t}-${t+n.length}`},Ea=(e,t,n)=>{const r=e.getModel();if(!r)return!1;const a=r.getValueLength();if(n<0||n>=a)return!1;const o=r.getPositionAt(n),i=sa(e,o,o)[0];return!!i&&ga(i.query)===ga(t)},wa=(e,t)=>{const n=ba(e,t);return ya(t.query,n)};var Ca=n(87936);class va extends Ca.U{ready=!1;constructor(){super("web-console"),this.version(1).stores({buffers:"++id, label",editor_settings:"++id, key"}),this.version(2).stores({read_notifications:"++id, newsId"}),this.version(3).stores({buffers:"++id, label, position, archived, archivedAt"}).upgrade((e=>{let t=0;e.table("buffers").toCollection().modify((e=>{e.position=t,t++}))})),this.on("populate",(()=>{const e=fn(yn.QUERY_TEXT);void 0!==e&&localStorage.removeItem(yn.QUERY_TEXT),this.buffers.add(ka({label:"SQL",value:e??"",position:0})),this.editor_settings.add({key:"activeBufferId",value:Ta.id}),this.editor_settings.add({key:"returnTo",value:""}),this.editor_settings.add({key:"returnToLabel",value:""})})),this.on("ready",(async()=>{0===await this.buffers.count()&&this.buffers.add(ka({label:"SQL",value:"",position:0}));const e=new URL(window.location.href);await Promise.all(["returnTo","returnToLabel"].map((async t=>{if(e.searchParams.has(t)){const n=e.searchParams.get(t)??"";0!==await this.editor_settings.where("key").equals(t).count()?this.editor_settings.where("key").equals(t).modify({value:n}):this.editor_settings.add({key:t,value:n}),e.searchParams.delete(t)}}))),window.history.replaceState({},"",e),this.ready=!0}))}}const xa=new va;let _a=function(e){return e.SQL="SQL",e.METRICS="Metrics",e}({});const Sa={cursorState:[{inSelectionMode:!1,selectionStart:{lineNumber:1,column:1},position:{lineNumber:1,column:1}}],contributionsState:[{"editor.contrib.wordHighlighter":!1,"editor.contrib.folding":{lineCount:1,provider:"indent",foldedImports:!1}}],viewState:{scrollLeft:0,firstPosition:{lineNumber:1,column:1},firstPositionDeltaTop:0}},ka=({label:e,value:t,editorViewState:n=Sa,metricsViewState:r,position:a,archived:o,archivedAt:i,isTemporary:l})=>({label:e,value:t??"",editorViewState:r?void 0:n,metricsViewState:r,position:a,archived:o,archivedAt:i,isTemporary:l}),Ta={id:1,...ka({label:"SQL",position:0})},Na={getAll:()=>xa.buffers.toArray(),getById:e=>xa.buffers.get(e),getMetaById:e=>xa.buffers.get(e).then((e=>({archived:e?.archived,archivedAt:e?.archivedAt,label:e?.label,type:e?.metricsViewState?_a.METRICS:_a.SQL}))),getActiveId:()=>xa.editor_settings.where("key").equals("activeBufferId").first(),setActiveId:e=>xa.editor_settings.where("key").equals("activeBufferId").modify({value:e}),getBufferTypeById:e=>xa.buffers.get(e).then((e=>e?.metricsViewState?_a.METRICS:_a.SQL)),update:(e,t)=>xa.buffers.update(e,t),delete:e=>xa.buffers.delete(e),deleteAll:()=>xa.buffers.clear()};var Ia=n(45405);const Ra={editorRef:{current:null},monacoRef:{current:null},insertTextAtCursor:()=>{},appendQuery:()=>{},buffers:[],activeBuffer:Ta,setActiveBuffer:()=>Promise.resolve(),addBuffer:()=>Promise.resolve(Ta),deleteBuffer:()=>Promise.resolve(),archiveBuffer:()=>Promise.resolve(),deleteAllBuffers:()=>Promise.resolve(),updateBuffer:()=>Promise.resolve(),updateBuffersPositions:()=>Promise.resolve(),editorReadyTrigger:()=>{},inFocus:!1,setTemporaryBuffer:()=>Promise.resolve(),temporaryBufferId:null,queryParamProcessedRef:{current:!1},isNavigatingFromSearchRef:{current:!1}},Oa=(0,r.createContext)(Ra),Aa=({children:e})=>{const t=(0,r.useRef)(null),n=(0,r.useRef)(null),[a,o]=(0,r.useState)(null),i=(0,Ia.yR)(Na.getAll,[]),l=(0,r.useMemo)((()=>{if(i)return i.map((e=>({...e,isTemporary:e.id===a})))}),[i,a]),s=(0,Ia.yR)((()=>Na.getActiveId()),[])?.value,[c,d]=(0,r.useState)(Ta),[u,m]=(0,r.useState)(!1),p=(0,r.useRef)(null),g=(0,r.useRef)(!1),f=(0,r.useRef)(!1),h=(0,r.useRef)(!1),b=(0,r.useCallback)((()=>{if(!l)return 0;const e=l.filter((e=>!e.archived||e.isTemporary));return Math.max(...e.map((e=>e.position)),-1)+1}),[l]);if((0,r.useEffect)((()=>{if(!h.current&&l&&s){const e=l?.find((e=>e.id===s))??l[0],t=l.filter((e=>!e.archived));d(e.archived?t[0]??Ta:e),h.current=!0}}),[l,s]),!l||!s||c===Ta)return null;const y=async(e,r)=>{try{const a=(await Na.getActiveId())?.value;if(a&&e.id===a)return void d(e);if(await Na.setActiveId(e.id),d(e),r?.fromSearch&&(f.current=!0),t.current&&n.current){const a=t.current.getModel();a&&a.dispose();const o=n.current.editor.createModel(e.value,ta);t.current.setModel(o),ma(n.current,t.current),e.editorViewState&&t.current.restoreViewState(e.editorViewState),!1!==r?.focus&&t.current.focus()}}catch(e){console.warn("Error setting active buffer:",e)}},E=async(e,n,r=!1)=>{const i=t.current?.saveViewState(),l=await Na.getBufferTypeById(e);let s=null;n&&"isTemporary"in n&&(n.isTemporary?o(e):e===a&&(s=!1===n?.archived?b():-1,o(null)));const{isTemporary:c,...d}=n||{};let u={...d,...null!==s?{position:s}:{}};Object.keys(u).length>0&&await Na.update(e,{...u,...i&&l===_a.SQL?{editorViewState:i}:{}}),r&&await w(e),p.current&&window.clearTimeout(p.current);const m=Object.keys(n||{});["value","label","archived"].some((e=>m.includes(e)))&&(p.current=window.setTimeout((()=>{let t=!(1===m.length&&"value"===m[0]),n=m.includes("value");O.publish(A.BUFFERS_UPDATED,{type:"update",metaUpdate:t,contentUpdate:n,bufferId:e}),p.current=null}),300))},w=async e=>{const n=(await Na.getActiveId())?.value;if(void 0!==n&&n===e){const t=await xa.buffers.toCollection().filter((t=>!t.archived&&!(t.id===a||t.id===e))).last();await y(t??Ta)}else t.current?.focus()};return r.createElement(Oa.Provider,{value:{editorRef:t,monacoRef:n,insertTextAtCursor:e=>{t?.current&&((e,t)=>{e.trigger("keyboard","type",{text:t}),e.focus()})(t.current,e)},appendQuery:(e,n)=>{t?.current&&ua(t.current,e,n)},inFocus:u,buffers:l,activeBuffer:c,setActiveBuffer:y,addBuffer:async(e,{shouldSelectAll:n=!1}={})=>{const r=(a=e?.metricsViewState?_a.METRICS:_a.SQL,{id:1,...ka({label:a,position:0})});var a;const o=(await xa.buffers.filter((t=>!t.label.startsWith(r.label)||!e?.metricsViewState||void 0!==t.metricsViewState)).toArray()).map((e=>e.label.slice(r.label.length+1))).filter(Boolean).map((e=>parseInt(e,10))).sort(),i=l.filter((e=>!e.archived&&!e.isTemporary)).length,s=ka({...e,label:e?.label??`${r.label} ${(()=>{for(let e=0;e<=o.length;e++){const t=e+1;if(!o.includes(t))return t}})()}`,position:i}),c=await xa.buffers.add(s);if(await y(s,{focus:!0}),n&&t.current){const e=t.current.getModel();e&&t.current.setSelection(e.getFullModelRange())}return{id:c,...s}},deleteBuffer:async e=>{await Na.delete(e),await w(e),O.publish(A.BUFFERS_UPDATED,{type:"delete",bufferId:e})},archiveBuffer:async e=>{await E(e,{archived:!0,archivedAt:(new Date).getTime(),position:-1}),await w(e),O.publish(A.BUFFERS_UPDATED,{type:"archive",bufferId:e})},deleteAllBuffers:async()=>{await Na.deleteAll(),O.publish(A.BUFFERS_UPDATED,{type:"deleteAll"})},updateBuffer:E,updateBuffersPositions:async e=>{await xa.transaction("rw",xa.buffers,(async()=>{for(const{id:t,position:n}of e)await xa.buffers.update(t,{position:n})}))},setTemporaryBuffer:async e=>{null!==a&&a!==e.id&&await E(a,{isTemporary:!1}),await E(e.id,{isTemporary:!0}),await y({...e,isTemporary:!0},{focus:!1,fromSearch:!0})},temporaryBufferId:a,queryParamProcessedRef:g,isNavigatingFromSearchRef:f,editorReadyTrigger:e=>{c.isTemporary||f.current||(e.focus(),m(!0)),e.onDidFocusEditorWidget((()=>m(!0))),e.onDidBlurEditorWidget((()=>m(!1))),c.editorViewState&&e.restoreViewState(c.editorViewState)}}},e)},Ma=()=>(0,r.useContext)(Oa);var Pa=n(56883);const La=({children:e})=>{const{settings:t}=Hr(),n=!t["posthog.enabled"]??!0;return r.createElement(Pa.zf,{apiKey:null===t["posthog.api.key"]?void 0:t["posthog.api.key"],options:{disable_persistence:n,disable_session_recording:n,disable_surveys:n,advanced_disable_decide:n,advanced_disable_feature_flags:n,advanced_disable_feature_flags_on_first_load:n,advanced_disable_toolbar_metrics:n,autocapture:!n,capture_pageview:!n,capture_pageleave:!n}},e)},Da=(e,t)=>isNaN(parseInt(e))?t:parseInt(e);let Ba=function(e){return e.DATASOURCES="datasources",e.SEARCH="search",e}({});const za={editorCol:10,editorLine:10,editorSplitterBasis:350,resultsSplitterBasis:350,exampleQueriesVisited:!1,autoRefreshTables:!0,leftPanelState:{type:Ba.DATASOURCES,width:350}},Fa={editorCol:1,editorLine:1,editorSplitterBasis:350,resultsSplitterBasis:350,updateSettings:(e,t)=>{},exampleQueriesVisited:!1,autoRefreshTables:!0,leftPanelState:za.leftPanelState,updateLeftPanelState:e=>{}},Ha=(0,r.createContext)(Fa),Ua=({children:e})=>{const[t,n]=(0,r.useState)(Da(fn(yn.EDITOR_COL),za.editorCol)),[a,o]=(0,r.useState)(Da(fn(yn.EDITOR_LINE),za.editorLine)),[i,l]=(0,r.useState)(Da(fn(yn.EDITOR_SPLITTER_BASIS),za.editorSplitterBasis)),[s,c]=(0,r.useState)(Da(fn(yn.RESULTS_SPLITTER_BASIS),za.resultsSplitterBasis)),[d,u]=(0,r.useState)("true"===fn(yn.EXAMPLE_QUERIES_VISITED)),[m,p]=(0,r.useState)(fn(yn.AUTO_REFRESH_TABLES)?"true"===fn(yn.AUTO_REFRESH_TABLES):za.autoRefreshTables),[g,f]=(0,r.useState)((()=>{const e=fn("left.panel.state");if(e)try{return JSON.parse(e)}catch(e){return za.leftPanelState}return za.leftPanelState})()),h=(0,r.useCallback)((e=>{hn("left.panel.state",JSON.stringify(e)),f(e)}),[]);return r.createElement(Ha.Provider,{value:{editorCol:t,editorLine:a,editorSplitterBasis:i,resultsSplitterBasis:s,updateSettings:(e,t)=>{hn(e,t.toString()),(e=>{const t=fn(e);switch(e){case yn.EDITOR_COL:n(Da(t,za.editorCol));break;case yn.EDITOR_LINE:o(Da(t,za.editorLine));break;case yn.EXAMPLE_QUERIES_VISITED:u("true"===t);break;case yn.EDITOR_SPLITTER_BASIS:l(Da(t,za.editorSplitterBasis));break;case yn.RESULTS_SPLITTER_BASIS:c(Da(t,za.resultsSplitterBasis));break;case yn.AUTO_REFRESH_TABLES:p("true"===t)}})(e)},exampleQueriesVisited:d,autoRefreshTables:m,leftPanelState:g,updateLeftPanelState:h}},e)},Za=()=>(0,r.useContext)(Ha),Va={isSearchPanelOpen:!1,setSearchPanelOpen:()=>{},toggleSearchPanel:()=>{},searchPanelRef:{current:null}},qa=(0,r.createContext)(Va),$a=({children:e})=>{const{leftPanelState:t,updateLeftPanelState:n}=Za(),a=t.type===Ba.SEARCH,o=(0,r.useRef)(null),i=(0,r.useCallback)((e=>{n(e?{type:Ba.SEARCH,width:t.width}:{type:null,width:t.width})}),[t.width,n]),l=(0,r.useCallback)((()=>{const e=(()=>{const e=fn("left.panel.state");if(e)try{return JSON.parse(e)}catch(e){return{type:null,width:350}}return{type:null,width:350}})(),t={type:e.type===Ba.SEARCH?null:Ba.SEARCH,width:e.width};hn("left.panel.state",JSON.stringify(t)),n(t)}),[n]),s=(0,r.useCallback)((e=>{!e.metaKey&&!e.ctrlKey||!e.shiftKey||"f"!==e.key&&"F"!==e.key||(e.preventDefault(),i(!0),setTimeout((()=>{o.current?.focusSearchInput()}),100))}),[i]);return(0,r.useEffect)((()=>(document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)})),[s]),r.createElement(qa.Provider,{value:{isSearchPanelOpen:a,setSearchPanelOpen:i,toggleSearchPanel:l,searchPanelRef:o}},e)},ja=()=>(0,r.useContext)(qa);var Ga=n(45020),Wa=n(94505),Qa=n(99106),Ya=n(71073),Ka=n(18373),Xa=n(18226);const Ja=s.ZP.div.withConfig({displayName:"BuildVersion__Wrapper"})(["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n\n  & > :not(:last-child) {\n    margin-right: 1rem;\n  }\n"]),eo=(0,s.ZP)(de).withConfig({displayName:"BuildVersion__ReleaseNotesButton"})(["\n  position: relative;\n  ","\n  gap: 0.5rem;\n"],(({enterprise:e})=>e?"background: #322733;":"")),to=s.ZP.a.withConfig({displayName:"BuildVersion__ReleaseLink"})(["\n  text-decoration: none;\n"]),no=(0,s.ZP)(Ga.k).withConfig({displayName:"BuildVersion__UpgradeIcon"})(["\n  color: ",";\n"],(({theme:e})=>e.color.green)),ro=s.ZP.span.withConfig({displayName:"BuildVersion__NewestRelease"})(["\n  color: ",";\n  font-size: ",";\n"],(({theme:e})=>e.color.green),(({theme:e})=>e.fontSize.xs)),ao={dev:{label:"QuestDB Dev"},oss:{label:"QuestDB"},enterprise:{icon:r.createElement(Qa.S,{size:"18px"}),label:"QuestDB Enterprise"},"enterprise pro":{icon:r.createElement(Ya.H,{size:"18px"}),label:"QuestDB Enterprise Pro"},"enterprise ultimate":{icon:r.createElement(Ka.$,{size:"18px"}),label:"QuestDB Enterprise Ultimate"}},oo=()=>{const{quest:e,buildVersion:t,commitHash:n}=(0,r.useContext)(Jr),[a,o]=(0,r.useState)(null);if((0,r.useEffect)((()=>{t.version&&t.type.includes("oss")&&e.getLatestRelease().then((e=>{e.name&&o(e)})).catch((e=>{console.error(e)}))}),[t]),""===t.version&&!n.length)return null;const i=t.type.includes("enterprise"),l=((e,t)=>{if(void 0===t)return!1;const n=e.type.includes("enterprise");try{if(e.version){const r=(0,Xa.qu)(e.version,t,"<");return!n&&r}return!1}catch(e){return!1}})(t,a?.name),s=l?a?.html_url:"https://github.com/questdb/questdb"+(t?`/releases/tag/${t.version}`:`/commit/${n}`),{label:c,icon:d}=ao[t.type]??ao.dev;return r.createElement(Ja,null,r.createElement(to,{href:i?"https://questdb.io/enterprise":s,rel:"noopener noreferrer",target:"_blank"},r.createElement(eo,{enterprise:i,title:["dev","oss"].includes(t.type)?"Show "+(t?"release notes":"commit details"):""},d,c,t.version?` ${t.version}`:"",!i&&r.createElement(Wa.d,{size:"16px"}),l&&r.createElement(r.Fragment,null,r.createElement(no,{size:"18px"}),r.createElement(ro,null,a?.name)))))},io=s.ZP.div.withConfig({displayName:"ConnectionStatus__Wrapper"})(["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n"]),lo=s.ZP.div.withConfig({displayName:"ConnectionStatus__StatusIcon"})(["\n  display: block;\n  width: 0.6rem;\n  height: 0.6rem;\n  border-radius: 50%;\n  background-color: ",";\n  margin-right: 0.6rem;\n"],(e=>e.isConnected?D("green"):D("red"))),so=()=>{const[e,t]=(0,r.useState)(!0);return(0,r.useEffect)((()=>{O.subscribe(A.MSG_CONNECTION_OK,(()=>{t(!0)})),O.subscribe(A.MSG_CONNECTION_ERROR,(()=>{t(!1)}))}),[e]),r.createElement(io,null,r.createElement(lo,{isConnected:e}),e?r.createElement(Pe,{color:"white"},"Connected"):r.createElement(Pe,{color:"white"},"Error connecting to QuestDB"))},co=s.ZP.div.withConfig({displayName:"Footer__Wrapper"})(["\n  position: absolute;\n  display: flex;\n  height: 4rem;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  padding-left: 45px;\n"]),uo=s.ZP.div.withConfig({displayName:"Footer__LeftContainer"})(["\n  display: flex;\n  padding-left: 1rem;\n  align-items: center;\n  flex: 1;\n"]),mo=s.ZP.div.withConfig({displayName:"Footer__RightContainer"})(["\n  display: flex;\n  padding-right: 1rem;\n  align-items: center;\n\n  & > *:not(:last-child) {\n    margin-right: 1rem;\n  }\n"]),po=(0,s.vJ)(["\n  .cta-banner-enter {\n    bottom: -10rem;\n    opacity: 0;\n  }\n\n  .cta-banner-enter-active {\n    bottom: 1.6rem;\n    opacity: 1;\n    transition: bottom ","ms ease-out, opacity ","ms ease-out;\n  }\n\n  .cta-banner-exit,\n  .cta-banner-enter-done {\n    bottom: 1.6rem;\n    opacity: 1;\n  }\n\n  .cta-banner-exit-active {\n    bottom: -10rem;\n    opacity: 0;\n    transition: bottom ","ms ease-in, opacity ","ms ease-in;\n  }\n"],K.REG,K.REG,K.REG,K.REG),go=()=>{const[e,t]=(0,r.useState)(!1),[n,a]=(0,r.useState)(!0),o=(0,r.useCallback)((()=>{t(!1)}),[]),{consoleConfig:i}=Hr();return(0,r.useEffect)((()=>{setTimeout((()=>{t(!0)}),2e3),O.subscribe(A.MSG_CONNECTION_ERROR,(()=>{a(!1)})),O.subscribe(A.MSG_CONNECTION_OK,(()=>{a(!0)}))}),[]),r.createElement(co,{id:"footer"},r.createElement(uo,null,r.createElement(Pe,{color:"foreground"},"Copyright © ",(new Date).getFullYear()," QuestDB")),r.createElement(mo,null,r.createElement(so,null),n&&r.createElement(oo,null),r.createElement(ot,{color:"foreground",hoverColor:"cyan",href:"https://github.com/questdb/questdb",rel:"noreferrer",target:"_blank"},r.createElement(Nn.E,{size:"18px"}))),r.createElement(po,null),r.createElement(ct.Z,{classNames:"cta-banner",in:e&&i.ctaBanner,timeout:K.REG,unmountOnExit:!0},r.createElement(Ln,{onClick:o})))};var fo=n(42884),ho=n(35146),bo=n(82259);const yo=s.ZP.div.withConfig({displayName:"QueryResult__Wrapper"})(["\n  display: flex;\n  align-items: center;\n  overflow: hidden;\n  ",";\n\n  svg {\n    margin-right: 0.2rem;\n    color: ",";\n  }\n"],J,D("foreground")),Eo=s.ZP.div.withConfig({displayName:"QueryResult__Details"})(["\n  display: flex;\n"]),wo=s.ZP.div.withConfig({displayName:"QueryResult__DetailsColumn"})(["\n  margin-left: 1rem;\n"]),Co=(0,s.ZP)(Pe).withConfig({displayName:"QueryResult__DetailsText"})(["\n  margin-right: 0.5rem;\n"]),vo=e=>Math.round(100*(e+Number.EPSILON))/100,xo=e=>"0"===e?r.createElement(Pe,{color:"gray2"},"0"):r.createElement(Pe,{color:"orange"},e),_o=e=>0===e?"0":e>1e9?`${vo(e/1e9)}s`:e>1e6?`${vo(e/1e6)}ms`:e>1e3?`${vo(e/1e3)}μs`:`${e}ns`,So=({compiler:e,authentication:t,count:n,execute:a,fetch:o,rowCount:i})=>r.createElement(yo,{_height:95,duration:K.FAST},r.createElement("div",null,r.createElement(Pe,{color:"gray2"},i.toLocaleString()," row",i>1||0===i?"s":""," in ",_o(o))),r.createElement(Eo,null,r.createElement(wo,null,r.createElement(Co,{color:"foreground"},"Execute: ",xo(_o(a))),r.createElement(Co,{color:"foreground"},"Network: ",xo(_o(o-a))),r.createElement(Co,{color:"foreground"},"Total: ",xo(_o(o)))),r.createElement(wo,null,r.createElement(Co,{align:"right",color:"gray2",size:"sm"},"Count: ",_o(n)),r.createElement(Co,{align:"right",color:"gray2",size:"sm"},"Authentication: ",_o(t)),r.createElement(Co,{align:"right",color:"gray2",size:"sm"},"Compile: ",_o(e))))),ko=(0,s.F4)(["\n  0% {\n    background-position: left bottom;\n  }\n\n  100% {\n    background-position: right bottom;\n  }\n"]),To=s.ZP.div.withConfig({displayName:"Loader__Wrapper"})(["\n  position: fixed;\n  height: 0.4rem;\n  top: 0;\n  left: 0;\n  right: 0;\n  z-index: 15;\n  background: linear-gradient(\n      to left,\n      "," 30%,\n      "," 80%,\n      "," 100%\n    )\n    repeat;\n  background-size: 50% 100%;\n  animation-name: ",";\n  animation-duration: 1s;\n  animation-iteration-count: infinite;\n  animation-timing-function: linear;\n"],D("selection"),D("foreground"),D("selection"),ko),No=({show:e})=>{const[t,n]=(0,r.useState)(!1),a=(0,r.useRef)();return(0,r.useEffect)((()=>()=>{clearTimeout(a.current)}),[]),(0,r.useEffect)((()=>{clearTimeout(a.current),e?a.current=window.setTimeout((()=>{n(!0)}),500):n(!1)}),[e]),r.createElement(r.Fragment,null,r.createElement(ct.Z,{classNames:"fade-slow",in:t&&e,timeout:K.SLOW,unmountOnExit:!0},r.createElement(To,null)))},Io="#2c2e3d",Ro={base:"vs-dark",inherit:!0,rules:[{background:Io,token:""},{foreground:"6272a4",token:"comment"},{foreground:"f1fa8c",token:"string"},{foreground:"50fa7b",token:"number"},{foreground:"f1fa8c",token:"string.sql"},{foreground:"ff79c6",token:"operator.sql"},{foreground:"8be9fd",fontStyle:"italic",token:"dataType"},{foreground:"8be9fd",token:"predefined.sql"},{foreground:"8be9fd",token:"function"},{foreground:"bd93f9",token:"constant.numeric"},{foreground:"bd93f9",token:"constant.language"},{foreground:"bd93f9",token:"constant.character"},{foreground:"bd93f9",token:"constant.other"},{foreground:"ffb86c",token:"variable.other.readwrite.instance"},{foreground:"ff79c6",token:"constant.character.escaped"},{foreground:"ff79c6",token:"constant.character.escape"},{foreground:"ff79c6",token:"string source"},{foreground:"ff79c6",token:"string source.ruby"},{foreground:"ff79c6",token:"keyword"},{foreground:"ff79c6",token:"storage"},{foreground:"8be9fd",fontStyle:"italic",token:"storage.type"},{foreground:"50fa7b",fontStyle:"underline",token:"entity.name.class"},{foreground:"50fa7b",fontStyle:"italic underline",token:"entity.other.inherited-class"},{foreground:"50fa7b",token:"entity.name.function"},{foreground:"ffb86c",fontStyle:"italic",token:"variable.parameter"},{foreground:"bd93f9",token:"variable",fontStyle:"italic"},{foreground:"ff79c6",token:"entity.name.tag"},{foreground:"50fa7b",token:"entity.other.attribute-name"},{foreground:"8be9fd",token:"support.function"},{foreground:"6be5fd",token:"support.constant"},{foreground:"66d9ef",fontStyle:" italic",token:"support.type"},{foreground:"66d9ef",fontStyle:" italic",token:"support.class"},{foreground:"f8f8f0",background:"ff79c6",token:"invalid"},{foreground:"f8f8f0",background:"bd93f9",token:"invalid.deprecated"},{foreground:"cfcfc2",token:"meta.structure.dictionary.json string.quoted.double.json"},{foreground:"6272a4",token:"meta.diff"},{foreground:"6272a4",token:"meta.diff.header"},{foreground:"ff79c6",token:"markup.deleted"},{foreground:"50fa7b",token:"markup.inserted"},{foreground:"e6db74",token:"markup.changed"},{foreground:"bd93f9",token:"constant.numeric.line-number.find-in-files - match"},{foreground:"e6db74",token:"entity.name.filename"},{foreground:"f83333",token:"message.error"},{foreground:"eeeeee",token:"punctuation.definition.string.begin.json - meta.structure.dictionary.value.json"},{foreground:"eeeeee",token:"punctuation.definition.string.end.json - meta.structure.dictionary.value.json"},{foreground:"8be9fd",token:"meta.structure.dictionary.json string.quoted.double.json"},{foreground:"f1fa8c",token:"meta.structure.dictionary.value.json string.quoted.double.json"},{foreground:"50fa7b",token:"meta meta meta meta meta meta meta.structure.dictionary.value string"},{foreground:"ffb86c",token:"meta meta meta meta meta meta.structure.dictionary.value string"},{foreground:"ff79c6",token:"meta meta meta meta meta.structure.dictionary.value string"},{foreground:"bd93f9",token:"meta meta meta meta.structure.dictionary.value string"},{foreground:"50fa7b",token:"meta meta meta.structure.dictionary.value string"},{foreground:"ffb86c",token:"meta meta.structure.dictionary.value string"}],colors:{"activityBar.activeBackground":"#bd93f910","activityBar.activeBorder":"#ff79c680","activityBar.background":"#343746","activityBar.foreground":"#f8f8f2","activityBar.inactiveForeground":"#6272a4","activityBarBadge.background":"#ff79c6","activityBarBadge.foreground":"#f8f8f2","badge.background":"#44475a","badge.foreground":"#f8f8f2","breadcrumb.activeSelectionForeground":"#f8f8f2","breadcrumb.background":Io,"breadcrumb.focusForeground":"#f8f8f2","breadcrumb.foreground":"#6272a4","breadcrumbPicker.background":"#191a21","button.background":"#44475a","button.foreground":"#f8f8f2","button.secondaryBackground":Io,"button.secondaryForeground":"#f8f8f2","button.secondaryHoverBackground":"#343746","debugToolBar.background":"#21222c","diffEditor.insertedTextBackground":"#50fa7b20","diffEditor.removedTextBackground":"#ff555550","dropdown.background":"#343746","dropdown.border":"#191a21","dropdown.foreground":"#f8f8f2","editor.background":Io,"editor.findMatchBackground":"#ffb86c80","editor.findMatchHighlightBackground":"#ffffff40","editor.findRangeHighlightBackground":"#44475a75","editor.foldBackground":"#21222c","editor.foreground":"#f8f8f2","editor.hoverHighlightBackground":"#8be9fd50","editor.lineHighlightBorder":"#383b4b","editor.lineHighlightBackground":"#383b4b","editor.rangeHighlightBackground":"#bd93f915","editor.selectionBackground":"#44475a","editor.selectionHighlightBackground":"#424450","editor.snippetFinalTabstopHighlightBackground":Io,"editor.snippetFinalTabstopHighlightBorder":"#50fa7b","editor.snippetTabstopHighlightBackground":Io,"editor.snippetTabstopHighlightBorder":"#6272a4","editor.wordHighlightBackground":"#8be9fd50","editor.wordHighlightStrongBackground":"#50fa7b50","editorBracketHighlight.foreground1":"#f8f8f2","editorBracketHighlight.foreground2":"#ff79c6","editorBracketHighlight.foreground3":"#8be9fd","editorBracketHighlight.foreground4":"#50fa7b","editorBracketHighlight.foreground5":"#bd93f9","editorBracketHighlight.foreground6":"#ffb86c","editorBracketHighlight.unexpectedBracket.foreground":"#ff5555","editorCodeLens.foreground":"#6272a4","editorError.foreground":"#ff5555","editorGroup.border":"#bd93f9","editorGroup.dropBackground":"#44475a70","editorGroupHeader.tabsBackground":"#191a21","editorGutter.addedBackground":"#50fa7b80","editorGutter.deletedBackground":"#ff555580","editorGutter.modifiedBackground":"#8be9fd80","editorHoverWidget.background":Io,"editorHoverWidget.border":"#6272a4","editorIndentGuide.activeBackground":"#ffffff45","editorIndentGuide.background":"#ffffff1a","editorLineNumber.foreground":"#6272a4","editorLink.activeForeground":"#8be9fd","editorMarkerNavigation.background":"#21222c","editorOverviewRuler.addedForeground":"#50fa7b80","editorOverviewRuler.border":"#191a21","editorOverviewRuler.currentContentForeground":"#50fa7b","editorOverviewRuler.deletedForeground":"#ff555580","editorOverviewRuler.errorForeground":"#ff555580","editorOverviewRuler.incomingContentForeground":"#bd93f9","editorOverviewRuler.infoForeground":"#8be9fd80","editorOverviewRuler.modifiedForeground":"#8be9fd80","editorOverviewRuler.selectionHighlightForeground":"#ffb86c","editorOverviewRuler.warningForeground":"#ffb86c80","editorOverviewRuler.wordHighlightForeground":"#8be9fd","editorOverviewRuler.wordHighlightStrongForeground":"#50fa7b","editorRuler.foreground":"#ffffff1a","editorSuggestWidget.background":"#21222c","editorSuggestWidget.foreground":"#f8f8f2","editorSuggestWidget.selectedBackground":"#44475a","editorWarning.foreground":"#8be9fd","editorWhitespace.foreground":"#ffffff1a","editorWidget.background":"#21222c",errorForeground:"#ff5555","extensionButton.prominentBackground":"#50fa7b90","extensionButton.prominentForeground":"#f8f8f2","extensionButton.prominentHoverBackground":"#50fa7b60",focusBorder:"#6272a4",foreground:"#f8f8f2","gitDecoration.conflictingResourceForeground":"#ffb86c","gitDecoration.deletedResourceForeground":"#ff5555","gitDecoration.ignoredResourceForeground":"#6272a4","gitDecoration.modifiedResourceForeground":"#8be9fd","gitDecoration.untrackedResourceForeground":"#50fa7b","input.background":Io,"input.border":"#191a21","input.foreground":"#f8f8f2","input.placeholderForeground":"#6272a4","inputOption.activeBorder":"#bd93f9","inputValidation.errorBorder":"#ff5555","inputValidation.infoBorder":"#ff79c6","inputValidation.warningBorder":"#ffb86c","list.activeSelectionBackground":"#44475a","list.activeSelectionForeground":"#f8f8f2","list.dropBackground":"#44475a","list.errorForeground":"#ff5555","list.focusBackground":"#44475a75","list.highlightForeground":"#8be9fd","list.hoverBackground":"#44475a75","list.inactiveSelectionBackground":"#44475a75","list.warningForeground":"#ffb86c","listFilterWidget.background":"#343746","listFilterWidget.noMatchesOutline":"#ff5555","listFilterWidget.outline":"#424450","merge.currentHeaderBackground":"#50fa7b90","merge.incomingHeaderBackground":"#bd93f990","panel.background":Io,"panel.border":"#bd93f9","panelTitle.activeBorder":"#ff79c6","panelTitle.activeForeground":"#f8f8f2","panelTitle.inactiveForeground":"#6272a4","peekView.border":"#44475a","peekViewEditor.background":Io,"peekViewEditor.matchHighlightBackground":"#f1fa8c80","peekViewResult.background":"#21222c","peekViewResult.fileForeground":"#f8f8f2","peekViewResult.lineForeground":"#f8f8f2","peekViewResult.matchHighlightBackground":"#f1fa8c80","peekViewResult.selectionBackground":"#44475a","peekViewResult.selectionForeground":"#f8f8f2","peekViewTitle.background":"#191a21","peekViewTitleDescription.foreground":"#6272a4","peekViewTitleLabel.foreground":"#f8f8f2","pickerGroup.border":"#bd93f9","pickerGroup.foreground":"#8be9fd","progressBar.background":"#ff79c6","selection.background":"#bd93f9","settings.checkboxBackground":"#21222c","settings.checkboxBorder":"#191a21","settings.checkboxForeground":"#f8f8f2","settings.dropdownBackground":"#21222c","settings.dropdownBorder":"#191a21","settings.dropdownForeground":"#f8f8f2","settings.headerForeground":"#f8f8f2","settings.modifiedItemIndicator":"#ffb86c","settings.numberInputBackground":"#21222c","settings.numberInputBorder":"#191a21","settings.numberInputForeground":"#f8f8f2","settings.textInputBackground":"#21222c","settings.textInputBorder":"#191a21","settings.textInputForeground":"#f8f8f2","sideBar.background":"#21222c","sideBarSectionHeader.background":Io,"sideBarSectionHeader.border":"#191a21","sideBarTitle.foreground":"#f8f8f2","statusBar.background":"#191a21","statusBar.debuggingBackground":"#ff5555","statusBar.debuggingForeground":"#191a21","statusBar.foreground":"#f8f8f2","statusBar.noFolderBackground":"#191a21","statusBar.noFolderForeground":"#f8f8f2","statusBarItem.prominentBackground":"#ff5555","statusBarItem.prominentHoverBackground":"#ffb86c","statusBarItem.remoteBackground":"#bd93f9","statusBarItem.remoteForeground":Io,"tab.activeBackground":Io,"tab.activeBorderTop":"#ff79c680","tab.activeForeground":"#f8f8f2","tab.border":"#191a21","tab.inactiveBackground":"#21222c","tab.inactiveForeground":"#6272a4","terminal.ansiBlack":"#21222c","terminal.ansiBlue":"#bd93f9","terminal.ansiBrightBlack":"#6272a4","terminal.ansiBrightBlue":"#d6acff","terminal.ansiBrightCyan":"#a4ffff","terminal.ansiBrightGreen":"#69ff94","terminal.ansiBrightMagenta":"#ff92df","terminal.ansiBrightRed":"#ff6e6e","terminal.ansiBrightWhite":"#ffffff","terminal.ansiBrightYellow":"#ffffa5","terminal.ansiCyan":"#8be9fd","terminal.ansiGreen":"#50fa7b","terminal.ansiMagenta":"#ff79c6","terminal.ansiRed":"#ff5555","terminal.ansiWhite":"#f8f8f2","terminal.ansiYellow":"#f1fa8c","terminal.background":Io,"terminal.foreground":"#f8f8f2","titleBar.activeBackground":"#21222c","titleBar.activeForeground":"#f8f8f2","titleBar.inactiveBackground":"#191a21","titleBar.inactiveForeground":"#6272a4","walkThrough.embeddedEditorBackground":"#21222c"}},Oo={wordPattern:/(-?\d*\.\d\w*)|(::|:=|<<=|>>=|!=|<>|<=|>=|\|\||[-+*/%~<>^|&=!]|\b(?:not|and|or|in|between|within|like|ilike)\b|[^\`\~\!\@\#\$\%\^\&\*\-\+\[\{\]\}\\\|\;\:\"\,\<\>\/\?\s]+)/g,comments:{lineComment:"--",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]},Ao=["ALL","AND","ANY","BETWEEN","EXISTS","IN","LIKE","NOT","OR","SOME","EXCEPT","INTERSECT","UNION","APPLY","CROSS","FULL","INNER","JOIN","LEFT","OUTER","RIGHT","CONTAINS","FREETEXT","IS","NULL","PIVOT","UNPIVOT","MATCHED","EXPLAIN"];var Mo=n(50170);class Po extends Error{constructor(e){super(e),this.name="WorkerCreationError"}}class Lo extends Error{constructor(e,t){super(e),this.name="Search timeout error",t&&(t.length>0&&"startOffset"in t[0]?this.partialMatches=t:this.partialSearchMatches=t)}}class Do extends Error{constructor(e="Search was cancelled"){super(e),this.name="SearchCancelledError"}}function Bo(e){const t=e.split("\n"),n=[0];let r=0;for(let e=0;e<t.length-1;e++)r+=t[e].length+1,n.push(r);return{lines:t,lineStarts:n}}function zo(e,t){let n=0,r=t.length-1;for(;n<r;){const a=Math.floor((n+r+1)/2);t[a]<=e?n=a:r=a-1}return n+1}function Fo(e,t,n){return e-n[t-1]+1}function Ho(e){return e.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function Uo(e,t){const{caseSensitive:n=!1,wholeWord:r=!1,useRegex:a=!1}=t;let o=e;return a||(o=Ho(o)),r&&(/\B/.test(o.charAt(0))||(o="\\b"+o),/\B/.test(o.charAt(o.length-1))||(o+="\\b")),new RegExp(o,n?"gm":"gim")}function Zo(e,t,n){const r=e.index,a=e.index+e[0].length,o=zo(r,n),i=zo(a-1,n),l=Fo(r,o,n),s=Fo(a-1,i,n)+1,c=t[o-1],d=l-1,u=o===i?s-1:c.length,m=Math.max(0,d-15),p=Math.min(c.length,u+15);let g="",f=d-m,h=u-m;return m>0&&(g+="...",f+=3,h+=3),g+=c.substring(m,p),p<c.length&&(g+="..."),{startOffset:r,endOffset:a,lineNumber:o,column:l,endLineNumber:i,endColumn:s,text:e[0],previewText:g,matchStartInPreview:f,matchEndInPreview:h}}function Vo(e,t,n,r){const a=Uo(t,n),{lines:o,lineStarts:i}=Bo(e),l=[];let s;for(;null!==(s=a.exec(e))&&!(l.length>=r);)l.push(Zo(s,o,i)),0===s[0].length&&s.index===a.lastIndex&&(a.lastIndex=s.index+1);return l}function qo(e){const{text:t,query:n,options:r,limit:a}=e.data;try{const e=Vo(t,n,r,a);self.postMessage({success:!0,matches:e})}catch(e){e instanceof Error?self.postMessage({success:!1,error:e.message}):self.postMessage({success:!1,error:"Unknown error occurred: "+e.toString()})}}let $o=null;function jo(){$o&&($o.worker.terminate(),URL.revokeObjectURL($o.url),$o=null)}async function Go(e,t,n,r,a){if("undefined"!=typeof Worker)try{return await async function(e,t,n,r,a){const o=function(e){return $o&&$o.searchId===e||(jo(),$o=function(e){if("undefined"==typeof Worker)throw new Po("Worker not available in browser");try{const t=`\n      ${Bo.toString()}\n      ${zo.toString()}\n      ${Fo.toString()}\n      ${Ho.toString()}\n      ${Uo.toString()}\n      ${Zo.toString()}\n      ${Vo.toString()}\n      ${qo.toString()}\n      \n      self.onmessage = ${qo.name}\n    `,n=new Blob([t],{type:"application/javascript"}),r=URL.createObjectURL(n);return{worker:new Worker(r),url:r,searchId:e}}catch(e){throw new Po("Worker creation failed: "+e.message)}}(e)),$o}(a),{worker:i}=o;return new Promise(((o,l)=>{let s=null;const c=()=>{i.removeEventListener("message",u),i.removeEventListener("error",m)},d=()=>{s&&clearTimeout(s)};s=setTimeout((()=>{c(),l(new Lo("Search took too long and was interrupted. Try using simpler search patterns.",[]))}),1e4);const u=e=>{if(!$o||$o.searchId!==a)return d(),c(),void l(new Do("Result from outdated worker"));e.data.success?o(e.data.matches):l(new Error(e.data.error))},m=e=>{d(),c(),l($o?.searchId!==a?new Do("Result from outdated worker"):new Error("Worker error: "+e.message))};i.addEventListener("message",u),i.addEventListener("error",m),i.postMessage({text:e,query:t,options:n,limit:r})}))}(e,t,n,r,a)}catch(e){throw e instanceof Po&&console.warn("Worker not available, falling back to main search:",e),e}try{return Vo(e,t,n,r)}catch(e){throw console.warn("Main search failed",e),e}}const Wo=new RegExp(`(${Mo.wk.filter((e=>!Mo.Hw.includes(e))).map(Ho).join("|")})(\\s*)(?=\\s*\\()`,"i"),Qo={defaultToken:"",tokenPostfix:".sql",ignoreCase:!0,brackets:[{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"}],constants:Mo._G,dataTypes:Mo.DJ,keywords:Mo.Hw,operators:Ao,builtinVariables:["@@DATEFIRST","@@DBTS","@@LANGID","@@LANGUAGE","@@LOCK_TIMEOUT","@@MAX_CONNECTIONS","@@MAX_PRECISION","@@NESTLEVEL","@@OPTIONS","@@REMSERVER","@@SERVERNAME","@@SERVICENAME","@@SPID","@@TEXTSIZE","@@VERSION","@@CURSOR_ROWS","@@FETCH_STATUS","@@DATEFIRST","@@PROCID","@@ERROR","@@IDENTITY","@@ROWCOUNT","@@TRANCOUNT","@@CONNECTIONS","@@CPU_BUSY","@@IDLE","@@IO_BUSY","@@PACKET_ERRORS","@@PACK_RECEIVED","@@PACK_SENT","@@TIMETICKS","@@TOTAL_ERRORS","@@TOTAL_READ","@@TOTAL_WRITE"],pseudoColumns:["$ACTION","$IDENTITY","$ROWGUID","$PARTITION"],tokenizer:{root:[{include:"@comments"},{include:"@whitespace"},{include:"@pseudoColumns"},{include:"@numbers"},{include:"@strings"},[Wo,"predefined"],{include:"@complexIdentifiers"},{include:"@variable"},{include:"@scopes"},{include:"@array"},[/[;,.]/,"delimiter"],[/[()[\]]/,"@brackets"],[/[\w@#$]+/,{cases:{"@constants":"constant.language","@operators":"operator","@builtinVariables":"predefined","@keywords":"keyword","@dataTypes":"dataType","@default":"identifier"}}],[/[<>=!%&+\-*/|~^:]/,"operator"]],whitespace:[[/\s+/,"white"]],comments:[[/--+.*/,"comment"],[/\/\*/,{token:"comment.quote",next:"@comment"}]],comment:[[/[^*/]+/,"comment"],[/\*\//,{token:"comment.quote",next:"@pop"}],[/./,"comment"]],pseudoColumns:[[/[$][A-Za-z_][\w@#$]*/,{cases:{"@pseudoColumns":"predefined","@default":"identifier"}}]],numbers:[[/\b(\d+)([utsmhdwmy])\b/i,"number"],[/([+-]?\d+\.\d+[eE]?[+-]?\d+)/,"number"],[/0[xX][0-9a-fA-F]*/,"number"],[/[+-]?\d+((_)?\d+)*[Ll]?/,"number"]],strings:[[/N'/,{token:"string",next:"@string"}],[/'/,{token:"string",next:"@string"}]],string:[[/[^']+/,"string"],[/''/,"string"],[/'/,{token:"string",next:"@pop"}]],variable:[[/@[\w.$]+/,"variable"],[/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,"variable"]],complexIdentifiers:[[/"/,{token:"identifier.quote",next:"@quotedIdentifier"}]],quotedIdentifier:[[/[^"]+/,"identifier"],[/""/,"identifier"],[/"/,{token:"identifier.quote",next:"@pop"}]],scopes:[[/BEGIN\s+(DISTRIBUTED\s+)?TRAN(SACTION)?\b/i,"keyword"],[/BEGIN\s+TRY\b/i,{token:"keyword.try"}],[/END\s+TRY\b/i,{token:"keyword.try"}],[/BEGIN\s+CATCH\b/i,{token:"keyword.catch"}],[/END\s+CATCH\b/i,{token:"keyword.catch"}],[/(BEGIN|CASE)\b/i,{token:"keyword.block"}],[/END\b/i,{token:"keyword.block"}],[/WHEN\b/i,{token:"keyword.choice"}],[/THEN\b/i,{token:"keyword.choice"}]],array:[[/ARRAY\s*\[/,{token:"keyword",next:"@arrayArguments"}]],arrayArguments:[{include:"@comments"},{include:"@whitespace"},{include:"@numbers"},{include:"@strings"},[/\[/,{token:"delimiter.square",next:"@arrayArguments"}],[/\]/,{token:"delimiter.square",next:"@pop"}],[/,/,"delimiter"]]}};let Yo=function(e){return e.High="1",e.MediumHigh="2",e.Medium="3",e.MediumLow="4",e.Low="5",e}({}),Ko=function(e){return e[e.Method=0]="Method",e[e.Function=1]="Function",e[e.Constructor=2]="Constructor",e[e.Field=3]="Field",e[e.Variable=4]="Variable",e[e.Class=5]="Class",e[e.Struct=6]="Struct",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Event=10]="Event",e[e.Operator=11]="Operator",e[e.Unit=12]="Unit",e[e.Value=13]="Value",e[e.Constant=14]="Constant",e[e.Enum=15]="Enum",e[e.EnumMember=16]="EnumMember",e[e.Keyword=17]="Keyword",e[e.Text=18]="Text",e[e.Color=19]="Color",e[e.File=20]="File",e[e.Reference=21]="Reference",e[e.Customcolor=22]="Customcolor",e[e.Folder=23]="Folder",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue",e[e.Snippet=27]="Snippet",e}({});const Xo=({tables:e,range:t,priority:n,openQuote:r,nextCharQuote:a})=>e.map((e=>({label:e.table_name,kind:Ko.Class,insertText:r?e.table_name+(a?"":'"'):/^[a-z0-9_]+$/i.test(e.table_name)?e.table_name:`"${e.table_name}"`,sortText:n,range:t}))),Jo=({columns:e,range:t,withTableName:n,priority:r})=>n?e.map((e=>({label:{label:`${e.table_name}.${e.column_name}`,detail:"",description:e.data_type},kind:Ko.Enum,insertText:`${e.table_name}.${e.column_name}`,sortText:r,range:t}))):Y(e.map((e=>e.column_name))).map((n=>{const a=e.filter((e=>e.column_name===n)).map((e=>e.table_name));return{label:{label:n,detail:` (${a.sort().join(", ")})`,description:a.length>1?"":e.find((e=>e.column_name===n))?.data_type},kind:Ko.Enum,insertText:n,sortText:r,range:t}})),ei=e=>[...Mo.wk.map((t=>({label:t,kind:Ko.Function,insertText:t,range:e}))),...Mo.DJ.map((t=>({label:t,kind:Ko.Keyword,insertText:t,range:e}))),...Mo.Hw.map((t=>{const n=t.toUpperCase();return{label:n,kind:Ko.Keyword,filterText:t,insertText:n,range:e}})),...Ao.map((t=>{const n=t.toUpperCase();return{label:n,kind:Ko.Operator,filterText:t,insertText:n,range:e}}))],ti=e=>e.replace(/(^")|("$)/g,""),ni=e=>e.match(/(?:,$|,\s$|\b(?:SELECT|UPDATE|COLUMN|ON|JOIN|BY|WHERE|DISTINCT)\s$)/gim),ri={provideDocumentFormattingEdits(e,t){const n=z(e.getValue(),{indent:" ".repeat(t.tabSize)});return[{range:e.getFullModelRange(),text:n}]}},ai={provideDocumentRangeFormattingEdits:(e,t,n)=>[{range:t,text:z(e.getValueInRange(t),{indent:" ".repeat(n.tabSize)})}]};var oi=function(e){return e.EXECUTE="execute",e.RUN_SCRIPT="run_script",e.FOCUS_GRID="focus_grid",e.ADD_NEW_TAB="add_new_tab",e.CLOSE_ACTIVE_TAB="close_active_tab",e.SEARCH_DOCS="search_docs",e}(oi||{}),ii=n(8635),li=n(90281);function si(){return si=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},si.apply(this,arguments)}const ci=(0,s.ZP)(Vn.z).withConfig({displayName:"CopyButton__StyledButton"})(["\n  padding: 1.2rem 0.6rem;\n"]),di=(0,s.ZP)(li.e).withConfig({displayName:"CopyButton__StyledCheckboxCircle"})(["\n  position: absolute;\n  transform: translate(75%, -75%);\n  color: ",";\n"],(({theme:e})=>e.color.green)),ui=({text:e,iconOnly:t})=>{const[n,a]=(0,r.useState)(!1);return r.createElement(ci,si({skin:"secondary","data-hook":"copy-value",onClick:t=>{p(e),t.stopPropagation(),a(!0),setTimeout((()=>a(!1)),2e3)}},!t&&{prefixIcon:r.createElement(ii.f,{size:"16px"})}),n&&r.createElement(di,{size:"14px"}),t?r.createElement(ii.f,{size:"16px"}):"Copy")},mi=(0,s.ZP)(Pe).withConfig({displayName:"query-in-notification__StyledText"})(["\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"]),pi=({query:e})=>e?r.createElement(Zn.x,{gap:"1rem",align:"center"},r.createElement(ui,{text:e,iconOnly:!0}),r.createElement(mi,{color:"foreground",title:e},e)):null;var gi=n(23737),fi=n(95818);const hi=s.ZP.div.withConfig({displayName:"ButtonBar__ButtonBarWrapper"})(["\n  position: absolute;\n  top: ",";\n  right: 2.4rem;\n  z-index: 1;\n  transition: top .1s linear;\n"],(({$searchWidgetType:e})=>"replace"===e?"8.2rem":"find"===e?"5.3rem":"1rem")),bi=s.ZP.div.withConfig({displayName:"ButtonBar__ButtonGroup"})(["\n  display: flex;\n  gap: 0;\n"]),yi=(0,s.ZP)(Vn.z).withConfig({displayName:"ButtonBar__SuccessButton"})(["\n  background-color: ",";\n  border-color: ",";\n  color: ",";\n\n  &:hover:not(:disabled) {\n    background-color: ",";\n    border-color: ",";\n    color: ",";\n  }\n  \n  &:disabled {\n    background-color: ",";\n    border-color: ",";\n    color: ",";\n    opacity: 0.6;\n  }\n  \n  svg {\n    color: ",";\n  }\n  \n  &:hover:not(:disabled) svg {\n    color: ",";\n  }\n  \n  &:disabled svg {\n    color: ",";\n  }\n"],D("greenDarker"),D("greenDarker"),D("foreground"),D("green"),D("green"),D("gray1"),D("greenDarker"),D("greenDarker"),D("foreground"),D("foreground"),D("gray1"),D("foreground")),Ei=(0,s.ZP)(Vn.z).withConfig({displayName:"ButtonBar__StopButton"})(["\n  background-color: ",";\n  border-color: ",";\n  color: ",";\n  \n  &:hover:not(:disabled) {\n    background-color: ",";\n    border-color: ",";\n    color: ",";\n    filter: brightness(1.2);\n  }\n  \n  &:disabled {\n    background-color: ",";\n    border-color: ",";\n    color: ",";\n    opacity: 0.6;\n  }\n  \n  svg {\n    color: ",";\n  }\n  \n  &:hover:not(:disabled) svg {\n    color: ",";\n  }\n  \n  &:disabled svg {\n    color: ",";\n  }\n"],D("red"),D("red"),D("foreground"),D("red"),D("red"),D("foreground"),D("red"),D("red"),D("foreground"),D("foreground"),D("foreground"),D("foreground")),wi=(0,s.ZP)(yi).withConfig({displayName:"ButtonBar__MainRunButton"})(["\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n"]),Ci=(0,s.ZP)(yi).withConfig({displayName:"ButtonBar__DropdownButton"})(["\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n  padding: 0 0.5rem;\n  min-width: auto;\n  svg {\n    transform: ",";\n  }\n"],(({$open:e})=>e?"rotate(180deg)":"rotate(0deg)")),vi=s.ZP.div.withConfig({displayName:"ButtonBar__DropdownMenu"})(["\n  background: ",";\n  border-radius: 0.4rem;\n  box-shadow: 0 0.4rem 1.2rem rgba(0, 0, 0, 0.3);\n  overflow: hidden;\n  transform: translateX(-7rem) translateY(0.5rem);\n  padding: 0;\n  min-width: unset;\n  border: 0;\n\n  > * {\n    justify-content: space-between;\n    width: 100%;\n    font-size: 1.4rem;\n  }\n"],D("backgroundDarker")),xi=(0,s.ZP)(Zn.x).attrs({alignItems:"center"}).withConfig({displayName:"ButtonBar__Key"})(["\n  padding: 0 0.4rem;\n  background: ",";\n  border-radius: 0.2rem;\n  font-size: 1.2rem;\n  height: 1.8rem;\n  color: ",";\n\n  &:not(:last-child) {\n    margin-right: 0.25rem;\n  }\n  \n  svg {\n    color: "," !important;\n  }\n"],D("gray1"),D("green"),D("green")),_i=(0,s.ZP)(Zn.x).attrs({alignItems:"center",gap:"0"}).withConfig({displayName:"ButtonBar__RunShortcut"})(["\n  margin-left: 1rem;\n"]),Si=F.isMacintosh||F.isIOS?"⌘":"Ctrl",ki=F.isMacintosh||F.isIOS?{[Vt.QUERY]:"Cmd+Enter",[Vt.SCRIPT]:"Cmd+Shift+Enter"}:{[Vt.QUERY]:"Ctrl+Enter",[Vt.SCRIPT]:"Ctrl+Shift+Enter"},Ti=({onTriggerRunScript:e,isTemporary:t})=>{const n=(0,o.I0)(),a=(0,o.v9)(Tn.query.getRunning),i=(0,o.v9)(Tn.query.getQueriesToRun),[l,s]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null),u=(0,r.useCallback)((()=>{i.length>1?e():n(Jt())}),[n,i,e]),m=(0,r.useCallback)((()=>{e(!0),s(!1)}),[n,e]),p=(0,r.useCallback)((e=>{s(e)}),[]);(0,r.useEffect)((()=>{const e=new MutationObserver((e=>{let t=!1;e.forEach((e=>{"childList"===e.type?e.addedNodes.forEach((e=>{if(e.nodeType===Node.ELEMENT_NODE){const n=e;(n.classList?.contains("find-widget")||n.querySelector?.(".find-widget"))&&(t=!0)}})):"attributes"===e.type&&e.target instanceof Element&&e.target.classList.contains("find-widget")&&(t=!0)})),t&&(()=>{const e=document.querySelector(".find-widget"),t=!!e&&e.classList.contains("visible"),n=!!e&&e.classList.contains("replaceToggled");d(t?n?"replace":"find":null)})()}));return e.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"],attributeOldValue:!1}),()=>{e.disconnect()}}),[]);const g=()=>a===Vt.SCRIPT?r.createElement(Ei,{skin:"error","data-hook":"button-cancel-script",onClick:m,prefixIcon:r.createElement(bo.d,{size:"18px"})},"Cancel"):r.createElement(yi,{skin:"success","data-hook":"button-run-script",title:ki[Vt.SCRIPT],onClick:m,disabled:a!==Vt.NONE||t},"Run all queries",r.createElement(_i,null,r.createElement(xi,null,Si),r.createElement(xi,null,"⇧"),r.createElement(xi,null,r.createElement(gi.i,{size:"16px"}))));return r.createElement(hi,{$searchWidgetType:c},a===Vt.SCRIPT?g():a!==Vt.NONE&&a!==Vt.SCRIPT?r.createElement(bi,null,r.createElement(Ei,{skin:"error","data-hook":"button-cancel-query",onClick:u,prefixIcon:r.createElement(bo.d,{size:"18px"})},"Cancel")):r.createElement(bi,null,r.createElement(wi,{skin:"success","data-hook":"button-run-query",title:ki[Vt.QUERY],onClick:u,disabled:a!==Vt.NONE||0===i.length||t},(()=>{const e=i.length;return 1===e?i[0].selection?"Run selected query":"Run query":e>1?`Run ${e} selected queries`:"Run query"})(),r.createElement(_i,null,r.createElement(xi,null,Si),r.createElement(xi,null,r.createElement(gi.i,{size:"16px"})))),r.createElement(ut,{active:l,onToggle:p,placement:"bottom",trigger:r.createElement(Ci,{skin:"success","data-hook":"button-run-query-dropdown",$open:l,title:"More run options"},r.createElement(fi._,{size:"16px"}))},r.createElement(vi,null,g()))))};var Ni=n(56514);const Ii={Root:Ni.fC,Trigger:(0,s.ZP)(Ni.xz).withConfig({displayName:"DropdownMenu__Trigger"})(["\n    cursor: pointer;\n  "]),Portal:(0,s.ZP)(Ni.Uv).withConfig({displayName:"DropdownMenu__Portal"})([""]),Content:(0,s.ZP)(Ni.VY).withConfig({displayName:"DropdownMenu__Content"})(["\n    display: grid;\n    gap: 0.5rem;\n    min-width: 22rem;\n    background: ",";\n    border-radius: ",";\n    box-shadow: 0 5px 5px 0 ",";\n    padding: 1rem 0;\n  "],(({theme:e})=>e.color.backgroundLighter),(({theme:e})=>e.borderRadius),(({theme:e})=>e.color.black40)),Arrow:(0,s.ZP)(Ni.Eh).withConfig({displayName:"DropdownMenu__Arrow"})(["\n    fill: ",";\n  "],(({theme:e})=>e.color.black40)),Item:(0,s.ZP)(Ni.ck).withConfig({displayName:"DropdownMenu__Item"})(["\n    border-radius: 3px;\n    display: flex;\n    gap: 1.5rem;\n    align-items: center;\n    padding: 0.5rem 1rem;\n    margin: 0 0.5rem;\n    user-select: none;\n    outline: none;\n\n    &[data-disabled] {\n      pointer-events: none;\n      opacity: 0.8;\n    }\n\n    &:focus {\n      background: ",";\n      cursor: pointer;\n    }\n  "],(({theme:e})=>e.color.comment)),Divider:s.ZP.div.withConfig({displayName:"DropdownMenu__Divider"})(["\n    height: 1px;\n    background: ",";\n    margin: 0.5rem 0;\n  "],(({theme:e})=>e.color.selection))},Ri=({size:e=24,color:t="currentColor"})=>r.createElement("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:t,xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M6 2v20l16-10z"})),Oi=(0,s.ZP)(Ii.Content).withConfig({displayName:"QueryDropdown__StyledDropdownContent"})(["\n  background-color: #343846;\n  border-radius: 0.5rem;\n  padding: 0.4rem;\n  box-shadow: 0 0.2rem 0.8rem rgba(0, 0, 0, 0.36);\n  z-index: 9999;\n  min-width: 160px;\n  gap: 0;\n"]),Ai=(0,s.ZP)(Ii.Item).withConfig({displayName:"QueryDropdown__StyledDropdownItem"})(['\n  font-size: 1.3rem;\n  height: 3rem;\n  font-family: "system-ui", sans-serif;\n  cursor: pointer;\n  color: rgb(248, 248, 242);\n  display: flex;\n  align-items: center;\n  padding: 1rem 1.2rem;\n  border-radius: 0.4rem;\n  margin: 0;\n  gap: 0;\n  border: 1px solid transparent;\n\n  &[data-highlighted] {\n    background: #043c5c;\n    border: 1px solid #8be9fd;\n  }\n\n  &[data-disabled] {\n    opacity: 0.5;\n  }\n']),Mi=s.ZP.span.withConfig({displayName:"QueryDropdown__IconWrapper"})(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-right: 1.2rem;\n"]),Pi=(0,s.ZP)(Ri).withConfig({displayName:"QueryDropdown__StyledPlayFilled"})(["\n  transform: scale(1.3);\n"]),Li=s.ZP.div.withConfig({displayName:"QueryDropdown__HiddenTrigger"})(["\n  position: fixed;\n  width: 1px;\n  height: 1px;\n  opacity: 0;\n  pointer-events: none;\n  top: ",";\n  left: ",";\n  z-index: 9998;\n"],(e=>e.style?.top||"0px"),(e=>e.style?.left||"0px")),Di=({open:e,onOpenChange:t,positionRef:n,queriesRef:a,isContextMenuRef:o,onRunQuery:i,onExplainQuery:l})=>{const s=e=>{if(!e)return"query";const t=e.selection?e.selection.queryText:e.query;return t.length>30?`"${t.substring(0,30)}..."`:`"${t}"`},c=e=>{if(!e)return!1;const t=e.selection?e.selection.queryText:e.query;return t.startsWith("EXPLAIN")||t.startsWith("explain")};return r.createElement(Ii.Root,{open:e,onOpenChange:e=>{t(e)}},r.createElement(Ii.Trigger,{asChild:!0},r.createElement(Li,{style:{top:n.current?.y?`${n.current.y}px`:"0px",left:n.current?.x?`${n.current.x}px`:"0px"}})),r.createElement(Ii.Portal,null,r.createElement(Oi,null,a.current.length>1?a.current.map(((e,t)=>{const n=[r.createElement(Ai,{key:`run-${t}`,onClick:()=>i(e),"data-hook":`dropdown-item-run-query-${t}`},r.createElement(Mi,null,r.createElement(Pi,{size:18,color:"#fff"})),"Run ",s(e))];return o.current&&n.push(r.createElement(Ai,{key:`explain-${t}`,disabled:c(e),onClick:()=>l(e),"data-hook":`dropdown-item-explain-query-${t}`},r.createElement(Mi,null,r.createElement(Ot.d,{size:18})),"Get query plan for ",s(e))),n})).flat():[r.createElement(Ai,{key:"run",onClick:()=>i(a.current[0]),"data-hook":"dropdown-item-run-query"},r.createElement(Mi,null,r.createElement(Pi,{size:18,color:"#fff"})),"Run ",s(a.current[0])),r.createElement(Ai,{key:"explain",disabled:c(a.current[0]),onClick:()=>l(a.current[0]),"data-hook":"dropdown-item-get-query-plan"},r.createElement(Mi,null,r.createElement(Ot.d,{size:18})),"Get query plan for ",s(a.current[0]))])))};function Bi(){return Bi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bi.apply(this,arguments)}fo._m.config({paths:{vs:"assets/vs"}});const zi=(0,s.ZP)(it).withConfig({displayName:"Monaco__Content"})(["\n  position: relative;\n  overflow: hidden;\n  background: #2c2e3d;\n  .monaco-editor .squiggly-error {\n    background: none;\n    border-bottom: 0.3rem "," solid;\n  }\n\n  .monaco-scrollable-element > .scrollbar > .slider {\n    background: ",";\n  }\n\n  .cursorQueryDecoration {\n    width: 0.2rem !important;\n    background: ",";\n    margin-left: 0.5rem;\n\n    &.hasError {\n      background: ",';\n    }\n  }\n\n  .selectionErrorHighlight {\n    background-color: rgba(255, 85, 85, 0.15);\n    border-radius: 2px;\n  }\n\n  .selectionSuccessHighlight {\n    background-color: rgba(80, 250, 123, 0.15);\n    border-radius: 2px;\n  }\n\n  .searchHighlight {\n    background-color: rgba(255, 184, 108, 0.5);\n    border-radius: 2px;\n  }\n\n  .cursorQueryGlyph,\n  .cancelQueryGlyph {\n    margin-left: 2rem;\n    z-index: 1;\n    cursor: pointer;\n\n    &:after {\n      display: block;\n      content: "";\n      width: 22px;\n      height: 22px;\n      background-repeat: no-repeat;\n      background-image: url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIGhlaWdodD0iMjJweCIgd2lkdGg9IjIycHgiIGFyaWEtaGlkZGVuPSJ0cnVlIiBmb2N1c2FibGU9ImZhbHNlIiBmaWxsPSIjNTBmYTdiIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGNsYXNzPSJTdHlsZWRJY29uQmFzZS1zYy1lYTl1bGotMCBrZkRiTmwiPjxwYXRoIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMjR2MjRIMHoiPjwvcGF0aD48cGF0aCBkPSJNMTYuMzk0IDEyIDEwIDcuNzM3djguNTI2TDE2LjM5NCAxMnptMi45ODIuNDE2TDguNzc3IDE5LjQ4MkEuNS41IDAgMCAxIDggMTkuMDY2VjQuOTM0YS41LjUgMCAwIDEgLjc3Ny0uNDE2bDEwLjU5OSA3LjA2NmEuNS41IDAgMCAxIDAgLjgzMnoiPjwvcGF0aD48L3N2Zz4K");\n      transform: scale(1.1);\n    }\n    &:hover:after {\n      filter: brightness(1.3);\n    }\n  }\n\n  .cursorQueryGlyph.success-glyph:after {\n    background-image: url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIGhlaWdodD0iMjJweCIgd2lkdGg9IjIycHgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8ZGVmcz4KICAgICAgICA8Y2xpcFBhdGggaWQ9ImNsaXAwIj48cmVjdCB3aWR0aD0iMjQiIGhlaWdodD0iMjQiLz48L2NsaXBQYXRoPgogICAgPC9kZWZzPgogICAgPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CiAgICAgICAgPHBhdGggZD0iTTggNC45MzR2MTQuMTMyYzAgLjQzMy40NjYuNzAyLjgxMi40ODRsMTAuNTYzLTcuMDY2YS41LjUgMCAwIDAgMC0uODMyTDguODEyIDQuNjE2QS41LjUgMCAwIDAgOCA0LjkzNFoiIGZpbGw9IiM1MGZhN2IiLz4KICAgICAgICA8Y2lyY2xlIGN4PSIxOCIgY3k9IjgiIHI9IjYiIGZpbGw9IiMwMGFhM2IiLz4KICAgICAgICA8cGF0aCBkPSJtMTUgOC41IDIgMiA0LTQiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9Im5vbmUiLz4KICAgIDwvZz4KPC9zdmc+");\n  }\n\n  .cursorQueryGlyph.error-glyph:after {\n    background-image: url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIGhlaWdodD0iMjJweCIgd2lkdGg9IjIycHgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8ZGVmcz4KICAgICAgICA8Y2xpcFBhdGggaWQ9ImNsaXAwIj48cmVjdCB3aWR0aD0iMjQiIGhlaWdodD0iMjQiLz48L2NsaXBQYXRoPgogICAgPC9kZWZzPgogICAgPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CiAgICAgICAgPHBhdGggZD0iTTggNC45MzR2MTQuMTMyYzAgLjQzMy40NjYuNzAyLjgxMi40ODRsMTAuNTYzLTcuMDY2YS41LjUgMCAwIDAgMC0uODMyTDguODEyIDQuNjE2QS41LjUgMCAwIDAgOCA0LjkzNFoiIGZpbGw9IiM1MGZhN2IiLz4KICAgICAgICA8Y2lyY2xlIGN4PSIxOCIgY3k9IjgiIHI9IjYiIGZpbGw9IiNmZjU1NTUiLz4KICAgICAgICA8cmVjdCB4PSIxNyIgeT0iNCIgd2lkdGg9IjIiIGhlaWdodD0iNSIgZmlsbD0id2hpdGUiIHJ4PSIwLjUiLz4KICAgICAgICA8Y2lyY2xlIGN4PSIxOCIgY3k9IjExIiByPSIxIiBmaWxsPSJ3aGl0ZSIvPgogICAgPC9nPgo8L3N2Zz4=");\n  }\n\n  .cursorQueryGlyph.loading-glyph:after {\n    height: 22px;\n    width: 22px;\n    background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0id2hpdGUiPgogIDxwYXRoIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMjR2MjRIMHoiIC8+CiAgPHBhdGggZD0iTTEyIDJhMSAxIDAgMCAxIDEgMXYzYTEgMSAwIDAgMS0yIDBWM2ExIDEgMCAwIDEgMS0xem0wIDE1YTEgMSAwIDAgMSAxIDF2M2ExIDEgMCAwIDEtMiAwdi0zYTEgMSAwIDAgMSAxLTF6bTguNjYtMTBhMSAxIDAgMCAxLS4zNjYgMS4zNjZsLTIuNTk4IDEuNWExIDEgMCAxIDEtMS0xLjczMmwyLjU5OC0xLjVBMSAxIDAgMCAxIDIwLjY2IDd6TTcuNjcgMTQuNWExIDEgMCAwIDEtLjM2NiAxLjM2NmwtMi41OTggMS41YTEgMSAwIDEgMS0xLTEuNzMybDIuNTk4LTEuNWExIDEgMCAwIDEgMS4zNjYuMzY2ek0yMC42NiAxN2ExIDEgMCAwIDEtMS4zNjYuMzY2bC0yLjU5OC0xLjVhMSAxIDAgMCAxIDEtMS43MzJsMi41OTggMS41QTEgMSAwIDAgMSAyMC42NiAxN3pNNy42NyA5LjVhMSAxIDAgMCAxLTEuMzY2LjM2NmwtMi41OTgtMS41YTEgMSAwIDEgMSAxLTEuNzMybDIuNTk4IDEuNUExIDEgMCAwIDEgNy42NyA5LjV6IiAvPgo8L3N2Zz4=");\n    animation: loading-glyph-spin 3s linear infinite;\n  }\n\n  @keyframes loading-glyph-spin {\n    from { transform: rotate(0); }\n    to { transform: rotate(360deg); }\n  }\n\n  .cancelQueryGlyph {\n    &:after {\n      background-image: url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIGhlaWdodD0iMjJweCIgd2lkdGg9IjIycHgiIGFyaWEtaGlkZGVuPSJ0cnVlIiBmb2N1c2FibGU9ImZhbHNlIiBmaWxsPSIjZmY1NTU1IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGNsYXNzPSJTdHlsZWRJY29uQmFzZS1zYy1lYTl1bGotMCBqQ2hkR0siPjxwYXRoIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMjR2MjRIMHoiPjwvcGF0aD48cGF0aCBkPSJNNyA3djEwaDEwVjdIN3pNNiA1aDEyYTEgMSAwIDAgMSAxIDF2MTJhMSAxIDAgMCAxLTEgMUg2YTEgMSAwIDAgMS0xLTFWNmExIDEgMCAwIDEgMS0xeiI+PC9wYXRoPjwvc3ZnPgo=");\n    }\n\n    &:hover:after {\n      filter: brightness(1.3);\n    }\n  }\n'],D("red"),D("selection"),D("green"),D("red")),Fi=(0,s.ZP)(Vn.z).withConfig({displayName:"Monaco__CancelButton"})(["\n  padding: 1.2rem 0.6rem;\n"]),Hi=(0,s.ZP)(ho.V.Description).withConfig({displayName:"Monaco__StyledDialogDescription"})(["\n  font-size: 1.4rem;\n"]),Ui=(0,s.ZP)(Vn.z).withConfig({displayName:"Monaco__StyledDialogButton"})(["\n  padding: 1.2rem 0.6rem;\n  font-size: 1.4rem;\n\n  &:focus {\n    outline: 1px solid ",";\n  }\n"],(({theme:e})=>e.color.foreground)),Zi=({executionRefs:e})=>{const t=Ma(),{buffers:n,editorRef:a,monacoRef:i,insertTextAtCursor:l,activeBuffer:s,updateBuffer:c,editorReadyTrigger:d,queryParamProcessedRef:u,isNavigatingFromSearchRef:m}=t,{quest:p}=(0,r.useContext)(Jr),[g,f]=(0,r.useState)(),[h,b]=(0,r.useState)(!1),[y,E]=(0,r.useState)(""),[w,C]=(0,r.useState)(!1),[v,x]=(0,r.useState)(!1),[_,S]=(0,r.useState)(!1),k=(0,o.I0)(),N=(0,o.v9)(Tn.query.getRunning),I=(0,o.v9)(Tn.query.getTables),R=(0,o.v9)(Tn.query.getColumns),M=(0,o.v9)(Tn.query.getActiveNotification),P=(0,o.v9)(Tn.query.getQueryNotificationsForBuffer(s.id)),[L,D]=(0,r.useState)(),B=(0,r.useRef)(!1),z=(0,r.useRef)([]),F=(0,r.useRef)([]),H=(0,r.useRef)(!1),U=(0,r.useRef)(!0),Z=(0,r.useRef)([]),V=(0,r.useRef)(N),q=(0,r.useRef)(s),$=(0,r.useRef)(g),j=(0,r.useRef)(P),G=(0,r.useRef)(M),W=(0,r.useRef)(!1),Q=(0,r.useRef)(null),K=(0,r.useRef)(null),X=(0,r.useRef)({startLine:1,endLine:1}),J=(0,r.useRef)(null),ee=(0,r.useRef)(null),te=(0,r.useRef)(null),ne=(0,r.useRef)(s.value),re=(0,r.useRef)(null),ae=(0,r.useRef)([]),oe=(0,r.useRef)(!1),ie=(0,r.useRef)([]),[le,se]=(0,r.useState)(5+s.value.split("\n").length.toString().length-1),ce=e=>{k(Jt(e))},de=e=>{const t=((e,t,n)=>{const r=e.getModel();if(!r||!n)return[];const a=[];for(const e of n){const n=r.getPositionAt(e.startOffset);if(n.lineNumber===t){const t=r.getPositionAt(e.endOffset),o=r.getValueInRange({startLineNumber:n.lineNumber,startColumn:n.column,endLineNumber:t.lineNumber,endColumn:t.column});a.push({query:o,row:n.lineNumber-1,column:n.column,endRow:t.lineNumber-1,endColumn:t.column})}}return a})(a.current,e,z.current||[]),n=(F.current||[]).filter((t=>t.selection&&t.row+1===e));return[...t.filter((e=>!n.some((t=>t.row===e.row&&t.column===e.column&&t.endRow===e.endRow&&t.endColumn===e.endColumn)))),...n].sort(((e,t)=>e.column-t.column))},ue=e=>{const t=a.current,n=t?.getModel();if(t&&n)if(e.selection){const r=n.getPositionAt(e.selection.startOffset),a=n.getPositionAt(e.selection.endOffset);t.setSelection({startLineNumber:r.lineNumber,startColumn:r.column,endLineNumber:a.lineNumber,endColumn:a.column})}else t.setPosition({lineNumber:e.row+1,column:e.column})},me=(e,t,n,r=!1)=>{if(te.current=n,oe.current=r,a.current){const o=a.current.getDomNode(),i=o?.getBoundingClientRect();let l;if(i){const e=24,t=n.lineNumber,r=a.current.getScrollTop(),o=i.top+(t-1)*e-r+e/2+5;l={x:i.left+115,y:o}}else l={x:e,y:t};re.current=l,oe.current=r,x(!0)}},pe=(t,n,r)=>{const a=n.getModel();if(!n.getValue()||!a)return;const o=ia(n),i=q.current.id,l=[],s=e.current[i]||{};if(o){const e=s[wa(n,o)],r=e&&void 0!==e.error,i=o.row+1,c=o.endRow+1;if(e&&e.selection){const n=a.getPositionAt(e.selection.startOffset),r=a.getPositionAt(e.selection.endOffset),o=void 0!==e.error,i=!0===e.success;l.push({range:new t.Range(n.lineNumber,n.column,r.lineNumber,r.column),options:{isWholeLine:!1,className:o?"selectionErrorHighlight":i?"selectionSuccessHighlight":"selectionErrorHighlight"}})}l.push({range:new t.Range(i,o.column,c,o.endColumn),options:{isWholeLine:!0,linesDecorationsClassName:"cursorQueryDecoration "+(r?"hasError":"")}})}const c=n.deltaDecorations(Z.current,l);Z.current=c,["scroll","script"].includes(r??"")||B.current||(e=>{let t=null;if(e){const n=j.current?.[e];n&&(t=n.latest||null)}G.current?.query!==t?.query&&k(nn(t))})(o?wa(n,o):void 0),s&&((e,t,n,r)=>{const a=t.getModel();if(!a)return;const o=[];if(r){const i=n[wa(t,r)];if(i&&i.error){const{error:n,selection:l}=i,s=ca(t,r,n.position);if(s){const t=l?da(a,s,l):s;o.push({message:n.error,severity:e.MarkerSeverity.Error,startLineNumber:t.startLineNumber,endLineNumber:t.endLineNumber,startColumn:t.startColumn,endColumn:t.endColumn})}else{const t=pa(r,n.position);o.push({message:n.error,severity:e.MarkerSeverity.Error,startLineNumber:t.lineNumber,endLineNumber:t.lineNumber,startColumn:t.column,endColumn:t.column})}}}e.editor.setModelMarkers(a,ta,o)})(t,n,s,o)},ge=(t,n,r)=>{const a=n.getModel();if(!n.getValue()||!a)return;let o=[];const i=X.current;if(i){const e=a.getLineCount(),t=500,r=Math.max(1,i.startLine-t),l=Math.min(e,i.endLine+t),s={lineNumber:r,column:1},c={lineNumber:l,column:n.getModel()?.getLineMaxColumn(l)??1};o=sa(n,s,c)}else o=la(n);const l=q.current.id,s=[],c=[];o.length>0&&o.forEach((r=>{const o={startOffset:a.getOffsetAt({lineNumber:r.row+1,column:r.column}),endOffset:a.getOffsetAt({lineNumber:r.endRow+1,column:r.endColumn})};c.push(o);const i=e.current[l]||{},d=wa(n,r),u=i[d],m=u&&void 0!==u.error,p=j.current?.[d]?.latest?.type===Zt.SUCCESS,g=r.row+1,f=V.current!==Vt.NONE&&void 0!==$.current?.row&&$.current?.row+1===g?`cancelQueryGlyph cancelQueryGlyph-line-${g}`:m?`cursorQueryGlyph error-glyph cursorQueryGlyph-line-${g}`:p?`cursorQueryGlyph success-glyph cursorQueryGlyph-line-${g}`:`cursorQueryGlyph cursorQueryGlyph-line-${g}`;s.push({range:new t.Range(g,1,g,1),options:{isWholeLine:!1,glyphMarginClassName:f}})})),K.current&&K.current.clear(),K.current=n.createDecorationsCollection(s),z.current=c,pe(t,n,r)},fe=async(t,n)=>{const o=a.current,i=a.current?.getModel();if(!o||!i)return{success:!1,notification:null,result:void 0};const l=t.selection?t.selection.queryText:t.query,c=wa(o,t),d=s.id;let u=null;k(Kt(void 0)),k(nn({type:Zt.LOADING,query:`${q.current.label}@0-0`,content:r.createElement(Zn.x,{gap:"1rem",align:"center"},r.createElement(Pe,{color:"foreground"},'Running query "',l.length>30?`${l.slice(0,30)}...`:l,'"')),createdAt:new Date}));try{const a=await p.queryRaw(ga(l),{limit:"0,1000",explain:!0});if(e.current[d]&&(delete e.current[d][c],0===Object.keys(e.current[d]).length&&delete e.current[d]),a.type!==T.DDL&&a.type!==T.DML||(u={query:c,content:r.createElement(pi,{query:l})}),a.type===T.NOTICE&&(u={query:c,content:r.createElement(Pe,{color:"foreground",ellipsis:!0,title:l},a.notice,void 0!==l&&""!==l&&`: ${l}`),sideContent:r.createElement(pi,{query:l}),type:Zt.NOTICE}),a.type===T.DQL&&(E(l),u={query:c,jitCompiled:a.explain?.jitCompiled??!1,content:r.createElement(So,Bi({},a.timings,{rowCount:a.count})),sideContent:r.createElement(pi,{query:l})}),t.selection){e.current[d]||(e.current[d]={});const n=ba(o,t);e.current[d][c]={success:!0,selection:t.selection,queryText:t.query,startOffset:n,endOffset:n+ga(t.query).length}}return n&&k(Kt(a)),{success:!0,notification:u,result:a}}catch(n){const a=n;e.current[d]||(e.current[d]={});const i=ba(o,t);return e.current[d][c]={error:a,queryText:t.query,startOffset:i,endOffset:i+ga(t.query).length,selection:t.selection},u={query:c,content:r.createElement(Pe,{color:"red"},a.error),sideContent:r.createElement(pi,{query:t.query}),type:Zt.ERROR},{success:!1,notification:u,result:void 0}}},he=e=>{if(N===Vt.SCRIPT)k(Jt());else if(N===Vt.NONE){if(e)return void S(!0);F.current&&F.current.length>1?k(Jt(Vt.SCRIPT)):S(!0)}},be=e=>{S(e),e||setTimeout((()=>a.current?.focus()))};(0,r.useEffect)((()=>{Object.keys(e.current).map((t=>{n.find((e=>e.id===parseInt(t)))||delete e.current[t]}))}),[n]),(0,r.useEffect)((()=>{G.current=M}),[M]),(0,r.useEffect)((()=>{j.current=P,i.current&&a.current&&!W.current&&!M?.query.endsWith("@100000-100000")&&ge(i.current,a.current)}),[P]),(0,r.useEffect)((()=>{N===Vt.NONE&&g&&(p.abort(),k(Xt()),f(void 0))}),[g,p,k,N]),(0,r.useEffect)((()=>{if(V.current=N,![Vt.NONE,Vt.SCRIPT].includes(N)&&a?.current){i?.current&&ma(i.current,a.current),i?.current&&a?.current&&ge(i.current,a.current);const t=N===Vt.REFRESH?{query:y,row:0,column:1,endRow:0,endColumn:1}:(e=>{let t;const n=ra(e);if(t=(n?na(ga(n)):void 0)?(e=>{const t=e.getModel();if(!t)return;const n=e.getSelection(),r=ra(e);if(n&&r){let a=t.getOffsetAt(n.getStartPosition()),o=t.getOffsetAt(n.getEndPosition());const i=ga(r);if(na(i).length>0){a+=r.indexOf(i),o=a+i.length;const n=t.getPositionAt(a),l=t.getPositionAt(o);e.setSelection({startLineNumber:n.lineNumber,endLineNumber:l.lineNumber,startColumn:n.column,endColumn:l.column});const s=ia(e);if(s)return{...s,selection:{startOffset:a,endOffset:o,queryText:i}}}}})(e):ia(e),!t)return;let r;return r=t.selection?{...t,selection:{...t.selection,queryText:ga(t.selection.queryText)}}:{...t,query:ga(t.query)},r})(a.current),n=N===Vt.EXPLAIN;if(t?.query){a.current?.updateOptions({readOnly:!0});const o=t.query,l=wa(a.current,t),c=t.selection?t.selection.queryText:t.query;let d=c;n&&(d=`EXPLAIN ${c}`),ee.current=window.setTimeout((()=>{V.current&&$.current&&a.current&&k(Gt({type:Zt.LOADING,query:l,isExplain:n,content:r.createElement(Zn.x,{gap:"1rem",align:"center"},r.createElement(Pe,{color:"foreground"},"Running..."),r.createElement(Fi,{skin:"error",onClick:()=>ce()},r.createElement(bo.d,{size:"18px"}))),sideContent:r.createElement(pi,{query:d})},s.id)),ee.current=null}),1e3),p.queryRaw(ga(d),{limit:"0,1000",explain:!0}).then((i=>{if(ee.current&&(window.clearTimeout(ee.current),ee.current=null),f(void 0),!a.current)return;const c=s.id;if(e.current[c]&&a.current&&(delete e.current[c][l],0===Object.keys(e.current[c]).length&&delete e.current[c]),t.selection&&a.current.getModel()){e.current[c]||(e.current[c]={});const n=ba(a.current,t);e.current[c][l]={success:!0,selection:t.selection,queryText:o,startOffset:n,endOffset:n+ga(o).length}}k(Xt()),k(Kt(i)),i.type!==T.DDL&&i.type!==T.DML||(k(Gt({query:l,isExplain:n,content:r.createElement(pi,{query:d})},s.id)),O.publish(A.MSG_QUERY_SCHEMA)),i.type===T.NOTICE&&(k(Gt({query:l,isExplain:n,content:r.createElement(Pe,{color:"foreground",ellipsis:!0,title:d},i.notice,void 0!==d&&""!==d&&`: ${d}`),sideContent:r.createElement(pi,{query:d}),type:Zt.NOTICE},s.id)),O.publish(A.MSG_QUERY_SCHEMA)),i.type===T.DQL&&(E(d),k(Gt({query:l,isExplain:n,jitCompiled:i.explain?.jitCompiled??!1,content:r.createElement(So,Bi({},i.timings,{rowCount:i.count})),sideContent:r.createElement(pi,{query:d})},s.id)),O.publish(A.MSG_QUERY_DATASET,i))})).catch((l=>{if(ee.current&&(window.clearTimeout(ee.current),ee.current=null),f(void 0),k(Xt()),a?.current&&i?.current){let i=l.position;n&&(i=Math.max(0,l.position-8)),t.selection&&(i+=o.indexOf(t.selection.queryText));const c=ca(a.current,t,i);let u={...l,position:i};const m=wa(a.current,t),p=s.id;e.current[p]||(e.current[p]={});const g=ba(a.current,t);e.current[p][m]={error:u,selection:t.selection,queryText:o,startOffset:g,endOffset:g+ga(o).length},c&&(a?.current.focus(),t.selection||a?.current.setPosition({lineNumber:c.startLineNumber,column:c.startColumn}),a?.current.revealPosition({lineNumber:c.startLineNumber,column:c.endColumn})),k(Gt({query:m,isExplain:n,content:r.createElement(Pe,{color:"red"},l.error),sideContent:r.createElement(pi,{query:d}),type:Zt.ERROR},s.id))}})),f(t)}else k(Xt())}else N===Vt.SCRIPT?(async()=>{let t=0,n=0;const o=a.current,l=i.current;if(!o||!l)return;const c=F.current&&F.current.length>1?F.current:void 0,d=!c,u=s.id;d&&(k(Wt(u)),e.current[u]&&delete e.current[u]),B.current=!0;const m=c??la(o);let p,g=[];o.updateOptions({readOnly:!0});const f=Date.now();for(let e=0;e<m.length;e++){const r=m[e];o.revealPositionInCenterIfOutsideViewport({lineNumber:r.row+1,column:r.column});const a=o.getLineDecorations(r.row+1)?.find((e=>e.options.glyphMarginClassName?.includes("cursorQueryGlyph")));let i=null;a&&(i=o.createDecorationsCollection([{range:new l.Range(r.row+1,1,r.row+1,1),options:{isWholeLine:!1,glyphMarginClassName:"cursorQueryGlyph loading-glyph"}}]));const s=await fe(r,e===m.length-1);if(i&&i.clear(),g.push(s),s.success?t++:n++,p=r,H.current||n>0&&U.current&&d)break}const h=1e6*(Date.now()-f),b=g[g.length-1];b&&b.result?.type===T.DQL&&(k(Kt(b.result)),O.publish(A.MSG_QUERY_DATASET,b.result));const y=[T.DDL,T.DML,T.NOTICE],E=g.filter((e=>e&&e.result)).find((e=>e?.result?.type&&y.includes(e.result.type)));E&&O.publish(A.MSG_QUERY_SCHEMA,E.result),g.filter((e=>e&&e.notification)).map((e=>e.notification)).forEach((e=>{k(Gt({...e,updateActiveNotification:!1},s.id))}));const w=g.reduce(((e,t,n)=>t.success?e:n),-1);-1!==w&&o.setPosition({lineNumber:m[w].row+1,column:m[w].column},"script"),o.focus(),o.revealPositionInCenterIfOutsideViewport(o.getPosition());const C=m.length===g.length;(C||n>0&&U.current&&d)&&(B.current=!1,k(Xt()));const v=C?`Running completed in ${_o(h)} with `:"Stopped after running ";k(Gt({query:`${q.current.label}@100000-100000`,content:r.createElement(Pe,{color:"foreground"},v,t>0?`${t} successful`:"",t>0&&n>0?" and ":"",n>0?`${n} failed`:""," ",n+t>1?" queries":" query"),type:C?Zt.SUCCESS:Zt.ERROR},q.current.id)),B.current=!1,H.current=!1,U.current=!0,o.updateOptions({readOnly:!1})})():N===Vt.NONE&&B.current&&(p.abort(),H.current=!0,O.publish(A.MSG_QUERY_SCHEMA))}),[N]),(0,r.useEffect)((()=>{$.current=g,i?.current&&a?.current&&ge(i.current,a.current),a.current?.updateOptions({readOnly:!!g})}),[g]);const ye=(0,r.useCallback)((async()=>{h&&i?.current&&a?.current&&(L?.dispose(),C(!0),D(i.current.languages.registerCompletionItemProvider(ta,((e,t=[],n={})=>({triggerCharacters:'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\n ."'.split(""),provideCompletionItems(r,a){const o=r.getWordUntilPosition(a),i=ia(e),l=r.getValueInRange({startLineNumber:a.lineNumber,startColumn:1,endLineNumber:a.lineNumber,endColumn:a.column});let s=[];const c=/^\s*$/.test(l),d=/(-- |--|\/\/ |\/\/)$/gim.test(l);if(c||d)return null;if(i){const e=fa(r,i.query);if(e.length>0){const l=e.find((e=>e.range.startLineNumber===i.row+1)),d=i.query.match(/(?<=FROM\s)([^ )]+)/gim),u=i.query.match(/(JOIN)\s+([^ ]+)/i),m=i.query.match(/(ALTER TABLE)\s+([^ ]+)/i);d?s=Y(d):m&&m[2]&&s.push(m[2]),u&&u[2]&&s.push(u[2]),s=s.map(ti);const p=r.getValueInRange({startLineNumber:l?.range.startLineNumber??1,startColumn:l?.range.startColumn??1,endLineNumber:a.lineNumber,endColumn:o.startColumn}),g={startLineNumber:a.lineNumber,endLineNumber:a.lineNumber,startColumn:o.startColumn,endColumn:o.endColumn},f=r.getValueInRange({startLineNumber:a.lineNumber,startColumn:o.endColumn,endLineNumber:a.lineNumber,endColumn:o.endColumn+1}),h='"'===p.substr(-1),b='"'==f;if(r.getValueInRange({startLineNumber:a.lineNumber,startColumn:1,endLineNumber:a.lineNumber,endColumn:a.column}),/(FROM|INTO|(ALTER|BACKUP|DROP|REINDEX|RENAME|TRUNCATE|VACUUM) TABLE|JOIN|UPDATE)\s$/gim.test(p)||/'$/gim.test(p)&&!p.endsWith("= '"))return{suggestions:Xo({tables:t,range:g,priority:Yo.High,openQuote:h,nextCharQuote:b})};if(/(?:(SELECT|UPDATE).*?(?:(?:,(?:COLUMN )?)|(?:ALTER COLUMN ))?(?:WHERE )?(?: BY )?(?: ON )?(?: SET )?$|ALTER COLUMN )/gim.test(p)&&!c){if(s.length>0){const e=null!==p.match(/\sON\s/gim);return{suggestions:[...ni(p)?Jo({columns:s.reduce(((e,t)=>[...e,...n[t]??[]]),[]),range:g,withTableName:e,priority:Yo.High}):[],...ei(g)]}}if(ni(p))return{suggestions:[...Jo({columns:Object.values(n).reduce(((e,t)=>[...e,...t]),[]),range:g,withTableName:!1,priority:Yo.High})]}}if(o.word)return{suggestions:[...Xo({tables:t,range:g,priority:Yo.High,openQuote:h,nextCharQuote:b}),...ei(g)]}}}}}))(a.current,I,R))),C(!1))}),[h,L,I,R]);return(0,r.useEffect)((()=>{w||ye()}),[I,R,i,h]),(0,r.useEffect)((()=>{q.current=s,ne.current=s.value,i.current&&a.current&&(ma(i.current,a.current),ge(i.current,a.current))}),[s]),(0,r.useEffect)((()=>(window.addEventListener("focus",ye),()=>{window.removeEventListener("focus",ye)})),[ye]),(0,r.useEffect)((()=>()=>{ie.current.forEach((e=>e())),Q.current&&window.clearTimeout(Q.current),J.current&&window.clearTimeout(J.current),ee.current&&window.clearTimeout(ee.current),K.current&&K.current.clear(),a.current?.getModel()?.dispose(),a.current?.dispose(),a.current=null,i.current=null}),[]),r.createElement(r.Fragment,null,r.createElement(zi,{className:"monaco-content",onClick:e=>{if(B.current&&e.target instanceof Element&&e.target.classList.contains("cursorQueryGlyph"))return;const t=a.current,n=t?.getModel();if(t&&n)if(e.target instanceof Element&&e.target.classList.contains("cancelQueryGlyph"))ce(Vt.NONE);else if(e.target instanceof Element&&e.target.classList.contains("cursorQueryGlyph")){t.focus();const n=t.getTargetAtClientPoint(e.clientX,e.clientY);if(n&&n.position){const t={lineNumber:n.position.lineNumber,column:1},r=de(t.lineNumber);if(r.length>1)return ae.current=r,void me(e.clientX,e.clientY,t,!1);1===r.length&&(ue(r[0]),ce())}}}},r.createElement(Ti,{onTriggerRunScript:he,isTemporary:s.isTemporary}),r.createElement(fo.ZP,{beforeMount:e=>{(e=>{e.languages.register({id:ta}),e.languages.setMonarchTokensProvider(ta,Qo),e.languages.setLanguageConfiguration(ta,Oo),e.languages.registerDocumentFormattingEditProvider(ta,ri),e.languages.registerDocumentRangeFormattingEditProvider(ta,ai)})(e),e.editor.defineTheme("dracula",Ro)},defaultLanguage:ta,onMount:(n,r)=>{i.current=r,a.current=n,r.editor.setTheme("dracula"),n.updateOptions({find:{addExtraSpaceOnTop:!1}}),n.setModel(r.editor.createModel(s.value,ta)),b(!0),d(n),m.current=!1,ie.current.push((({editor:e,insertTextAtCursor:t,toggleRunning:n})=>(O.subscribe(A.MSG_EDITOR_INSERT_COLUMN,(e=>{e&&t(e)})),O.subscribe(A.MSG_QUERY_FIND_N_EXEC,(t=>{if(t){const r=`${t.query};`;ua(e,r,t.options),n()}})),O.subscribe(A.MSG_QUERY_EXEC,(()=>{n(Vt.REFRESH)})),O.subscribe(A.MSG_EDITOR_FOCUS,(()=>{const t=e.getPosition();t&&e.setPosition({lineNumber:t.lineNumber+1,column:t?.column}),e.focus()})),()=>{O.unsubscribe(A.MSG_EDITOR_INSERT_COLUMN),O.unsubscribe(A.MSG_QUERY_FIND_N_EXEC),O.unsubscribe(A.MSG_QUERY_EXEC),O.unsubscribe(A.MSG_EDITOR_FOCUS)}))({editor:n,insertTextAtCursor:l,toggleRunning:ce})),ie.current.push((({editor:e,monaco:t,runQuery:n,runScript:r,onTabClosed:a,deleteBuffer:o,addBuffer:i})=>{const l=[];return e.addCommand(t.KeyMod.CtrlCmd|t.KeyMod.Shift|t.KeyCode.Enter,(()=>{})),l.push(e.addAction({id:oi.EXECUTE,label:"Execute command",keybindings:[t.KeyCode.F9,t.KeyMod.CtrlCmd|t.KeyCode.Enter],run:()=>{n()}})),l.push(e.addAction({id:oi.RUN_SCRIPT,label:"Run script",keybindings:[t.KeyMod.CtrlCmd|t.KeyMod.Shift|t.KeyCode.Enter],run:()=>{r()}})),l.push(e.addAction({id:oi.ADD_NEW_TAB,label:"Add new tab",keybindings:[t.KeyMod.Alt|t.KeyCode.KeyT],run:()=>{i()}})),l.push(e.addAction({id:oi.CLOSE_ACTIVE_TAB,label:"Close current tab",keybindings:[t.KeyMod.Alt|t.KeyCode.KeyW],run:async()=>{const e=await Na.getAll(),t=await Na.getActiveId();e.length>1&&t?.value&&"number"==typeof t?.value&&(o(t.value),a&&a())}})),l.push(e.addAction({id:oi.SEARCH_DOCS,label:"Search QuestDB Docs",keybindings:[t.KeyMod.CtrlCmd|t.KeyCode.KeyK],run:()=>{const e=document.querySelector(".DocSearch-Button");e&&e.click()}})),()=>{l.forEach((e=>{e.dispose()}))}})({editor:n,monaco:r,runQuery:()=>{V.current===Vt.NONE&&(1===F.current.length?ce():F.current.length>1&&he())},runScript:()=>{V.current===Vt.NONE&&he(!0)},deleteBuffer:e=>t.deleteBuffer(e),addBuffer:()=>t.addBuffer()})),n.onContextMenu((e=>{if(e.target.element&&e.target.element.classList.contains("cursorQueryGlyph")){const t=e.event.posx,n=e.event.posy;if(a.current){const e=a.current.getTargetAtClientPoint(t,n);if(e&&e.position){const r={lineNumber:e.position.lineNumber,column:1},a=de(r.lineNumber);a.length>0&&(ae.current=a,me(t,n,r,!0))}}}})),n.onDidChangeCursorPosition((e=>{const t=a.current?.getModel()?.getLineCount();t&&se(t.toString().length-1+5),W.current||(Q.current&&window.clearTimeout(Q.current),Q.current=window.setTimeout((()=>{const t=aa(n,z.current??[]);F.current=t,k(rn(t)),i.current&&a.current&&pe(r,n,e.source),Q.current=null}),50))})),n.onDidChangeModelContent((t=>{if(!n.getModel())return;W.current=!0;const a=q.current.id,o=e.current[a],i=[];if(o){const e=[],r=[];Object.keys(o).forEach((l=>{const s=l,{queryText:c,startOffset:d,endOffset:u}=o[s],m=t.changes.filter((e=>e.rangeOffset<u)).reduce(((e,t)=>e+t.text.length-t.rangeLength),0);if(0===m)return;const p=d+m;if(Ea(n,c,p)){const t=o[s].selection,n=t?{startOffset:t.startOffset+m,endOffset:t.endOffset+m}:void 0;e.push({oldKey:s,newKey:ya(c,p),data:{...o[s],startOffset:p,endOffset:u+m,selection:n}})}else r.push(s),i.push((()=>k(Qt(s,a))))})),r.forEach((e=>{delete o[e]})),e.forEach((({oldKey:e,newKey:t,data:n})=>{delete o[e],o[t]=n,i.push((()=>k(Yt(e,t,a))))}))}const l=j.current||{};Object.keys(l).forEach((e=>{const r=e,{queryText:o,startOffset:l,endOffset:s}=(e=>{const[t,n]=e.split("@"),[r,a]=n.split("-");return{queryText:t,startOffset:parseInt(r,10),endOffset:parseInt(a,10)}})(r),c=t.changes.filter((e=>e.rangeOffset<s)).reduce(((e,t)=>e+t.text.length-t.rangeLength),0);if(0===c)return;const d=l+c;if(Ea(n,o,d)){const e=ya(o,d);i.push((()=>k(Yt(r,e,a))))}else i.push((()=>k(Qt(r,a))))})),o&&0===Object.keys(o).length&&delete e.current[a],e.current[a]=o,ge(r,n);const s=aa(n,z.current??[]);F.current=s,k(rn(s)),W.current=!1,i.forEach((e=>e()))})),n.onDidChangeModel((()=>{setTimeout((()=>{i.current&&a.current&&ge(i.current,a.current)}),10)})),n.onDidScrollChange((()=>{J.current&&window.clearTimeout(J.current),J.current=window.setTimeout((()=>{const e=n.getVisibleRanges();if(e.length>0){const t=e[0],n={startLine:t.startLineNumber,endLine:t.endLineNumber},r=X.current,o=Math.abs(n.startLine-r.startLine),l=Math.abs(n.endLine-r.endLine);X.current=n,(o>100||l>100)&&i.current&&a.current&&ge(i.current,a.current,"scroll")}J.current=null}),200)}));const o=new URLSearchParams(window.location.search),p=o.get("query"),g=n.getModel();if(p&&g&&!u.current){const e=p.trim(),t=fa(g,e);if(t&&t.length>0)n.setSelection(t[0].range),n.revealPositionInCenter({lineNumber:t[0].range.startLineNumber,column:t[0].range.startColumn});else{ua(n,e,{appendAt:"end"});const t=n.getValue();c(s.id,{value:t})}u.current=!0}const f=n.getVisibleRanges();if(f.length>0){const e=f[0];X.current={startLine:e.startLineNumber,endLine:e.endLineNumber}}ge(r,n);const h=aa(n,z.current??[]);F.current=h,k(rn(h)),o.get("executeQuery")&&(h.length>1?he():ce())},saveViewState:!1,onChange:e=>{const t=a.current?.getModel()?.getLineCount();if(t&&t>99999)return a.current&&void 0!==ne.current&&a.current.setValue(ne.current),void zt("Maximum line limit reached");ne.current=e,c(s.id,{value:e})},options:{model:null,fixedOverflowWidgets:!0,fontSize:14,lineHeight:24,fontFamily:Mt.fontMonospace,glyphMargin:!0,renderLineHighlight:"gutter",useShadowDOM:!1,minimap:{enabled:!1},selectOnLineNumbers:!1,scrollBeyondLastLine:!1,tabSize:2,lineNumbersMinChars:le},theme:"vs-dark"}),r.createElement(No,{show:!!g||!I})),r.createElement(Di,{open:v,onOpenChange:e=>{x(e),e||(re.current=null,ae.current=[],oe.current=!1)},positionRef:re,queriesRef:ae,isContextMenuRef:oe,onRunQuery:e=>{x(!1),e?ue(e):te.current&&a.current?.setPosition(te.current),ce()},onExplainQuery:e=>{x(!1),e?ue(e):te.current&&a.current?.setPosition(te.current),ce(Vt.EXPLAIN)}}),r.createElement(ho.V.Root,{open:_,onOpenChange:be},r.createElement(ho.V.Portal,null,r.createElement(Ce.A,null,r.createElement(ve.a,{primitive:ho.V.Overlay})),r.createElement(ho.V.Content,{onEscapeKeyDown:()=>be(!1),onInteractOutside:()=>be(!1)},r.createElement(ho.V.Title,null,"Run all queries"),r.createElement(Hi,null,r.createElement(Pe,{color:"foreground"},"You are about to run all queries in this tab. This action may modify or delete your data permanently."),r.createElement(Zn.x,{gap:"1rem",margin:"1.6rem 0"},r.createElement("label",{htmlFor:"stop-after-failure",style:{display:"flex",alignItems:"center",gap:"0.8rem",cursor:"pointer"}},r.createElement(ir.X,{defaultChecked:U.current,onChange:e=>{U.current=e.target.checked},id:"stop-after-failure","data-hook":"stop-after-failure-checkbox"}),r.createElement(Pe,{color:"foreground"},"Stop running after a failed query")))),r.createElement(ho.V.ActionButtons,null,r.createElement(ho.V.Close,{asChild:!0},r.createElement(Ui,{skin:"secondary",onClick:()=>be(!1)},"Cancel")),r.createElement(Ui,{skin:"primary","data-hook":"run-all-queries-confirm",onClick:()=>{S(!1),F.current=[],k(Jt(Vt.SCRIPT))}},"Run all queries"))))))};var Vi=n(72320),qi=n.n(Vi);const $i=e=>{},ji={title:"New tab",favicon:!1};let Gi=0;const Wi=class{constructor(){this.draggabillies=[]}init(e,t){this.el=e,this.limit=t,this.instanceId=Gi,this.el.setAttribute("data-chrome-tabs-instance-id",this.instanceId+""),Gi+=1,this.setupCustomProperties(),this.setupStyleEl(),this.setupEvents(),this.layoutTabs(),this.setupNewTabButton(),this.setupDraggabilly()}emit(e,t){this.el.dispatchEvent(new CustomEvent(e,{detail:t}))}setupCustomProperties(){this.el.style.setProperty("--tab-content-margin","10px")}setupStyleEl(){this.styleEl=document.createElement("style"),this.el.appendChild(this.styleEl)}setupEvents(){window.addEventListener("resize",(e=>{this.cleanUpPreviouslyDraggedTabs(),this.layoutTabs()})),new ResizeObserver((e=>{this.cleanUpPreviouslyDraggedTabs(),this.layoutTabs()})).observe(this.el),this.el.addEventListener("click",(({target:e})=>{e instanceof Element&&e.classList.contains("new-tab-button")&&(this.emit("newTab",{}),this.setupNewTabButton())})),this.tabEls.forEach((e=>this.setTabCloseEventListener(e))),this.tabEls.forEach((e=>this.setTabRenameConfirmEventListener(e))),document.addEventListener("click",(({target:e})=>{e instanceof Element&&!e.classList.contains("chrome-tab-rename")&&!e.classList.contains("chrome-tab-content")&&this.tabEls.forEach((e=>{const t=e.querySelector(".chrome-tab-rename").value;null!==e.getAttribute("is-renaming")&&""!==t.trim()&&t.trim()!==e.getAttribute("data-tab-title")&&(e.setAttribute("data-tab-title",t),this.emit("tabRename",{tabEl:e,title:t})),this.hideRenameTab(e)}))}))}get tabEls(){return Array.prototype.slice.call(this.el.querySelectorAll(".chrome-tab"))}get tabContentEl(){return this.el.querySelector(".chrome-tabs-content")}get tabContentWidths(){const e=this.tabEls.length,t=this.el.clientWidth-90,n=1*(e-1),r=(t-20+n)/e,a=Math.max(24,Math.min(240,r)),o=Math.floor(a),i=[];let l=t-(o*e+20-n);for(let t=0;t<e;t+=1){const e=o<240&&l>0?1:0;i.push(o+e),l>0&&(l-=1)}return i}get tabContentPositions(){const e=[],t=this.tabContentWidths;let n=10;return t.forEach(((t,r)=>{const a=1*r;e.push(n-a),n+=t})),e}get tabPositions(){const e=[];return this.tabContentPositions.forEach((t=>{e.push(t-10)})),e}layoutTabs(){const e=this.tabContentWidths;this.tabEls.forEach(((t,n)=>{const r=e[n],a=r+20;t.style.width=a+"px",t.removeAttribute("is-small"),t.removeAttribute("is-smaller"),t.removeAttribute("is-mini"),r<84&&t.setAttribute("is-small",""),r<60&&t.setAttribute("is-smaller",""),r<48&&t.setAttribute("is-mini",""),t.querySelector(".chrome-tab-close").style.display=this.tabEls.length>1?"block":"none"}));let t="";this.tabPositions.forEach(((e,n)=>{t+=`\n            .chrome-tabs[data-chrome-tabs-instance-id="${this.instanceId}"] .chrome-tab:nth-child(${n+1}) {\n              transform: translate3d(${e}px, 0, 0)\n            }\n          `})),this.styleEl.innerHTML=t;const n=this.tabEls.length;this.el.offsetWidth-this.tabContentEl.offsetWidth>95||n<5?(this.tabContentEl.style.width=(this.tabEls[0]?this.tabEls[0].offsetWidth*n:0)-(n>0?10*n*2-24+10:0)+"px",this.tabContentEl.nextElementSibling.classList.remove("overflow-shadow")):this.tabContentEl.nextElementSibling.classList.add("overflow-shadow")}createNewTabEl(){const e=document.createElement("div");return e.innerHTML='\n      <div class="chrome-tab">\n        <div class="chrome-tab-dividers"></div>\n        <div class="chrome-tab-background">\n          <svg xmlns="http://www.w3.org/2000/svg"><defs><symbol id="chrome-tab-geometry-left" viewBox="0 0 214 36"><path d="M17 0h197v36H0v-2c4.5 0 9-3.5 9-8V8c0-4.5 3.5-8 8-8z"/></symbol><symbol id="chrome-tab-geometry-right" viewBox="0 0 214 36"><use xlink:href="#chrome-tab-geometry-left"/></symbol><clipPath id="crop"><rect class="mask" width="100%" height="100%" x="0"/></clipPath></defs><svg width="52%" height="100%"><use xlink:href="#chrome-tab-geometry-left" width="214" height="36" class="chrome-tab-geometry"/></svg><g transform="scale(-1, 1)"><svg width="52%" height="100%" x="-100%" y="0"><use xlink:href="#chrome-tab-geometry-right" width="214" height="36" class="chrome-tab-geometry"/></svg></g></svg>\n        </div>\n        <div class="chrome-tab-content">\n          <div class="chrome-tab-favicon"></div>\n          <div class="chrome-tab-title"></div>\n          <input class="chrome-tab-rename" type="text" />\n          <div class="chrome-tab-drag-handle"></div>\n          <div class="chrome-tab-close"></div>\n        </div>\n      </div>\n    ',e.firstElementChild}addTab(e,{animate:t=!0,background:n=!1}={}){const r=this.createNewTabEl();return r.oncontextmenu=e=>{this.emit("contextmenu",{tabEl:r,event:e})},t&&(r.classList.add("chrome-tab-was-just-added"),setTimeout((()=>r.classList.remove("chrome-tab-was-just-added")),500)),e=Object.assign({},ji,e),this.tabContentEl.appendChild(r),this.setTabCloseEventListener(r),this.setTabRenameConfirmEventListener(r),this.updateTab(r,e),this.emit("tabAdd",{tabEl:r}),n||this.setCurrentTab(r),this.cleanUpPreviouslyDraggedTabs(),this.layoutTabs(),this.setupDraggabilly(),r}setTabCloseEventListener(e){const t=t=>{t.stopImmediatePropagation(),this.emit("tabClose",{tabEl:e}),this.setupNewTabButton()};e.querySelector(".chrome-tab-close").addEventListener("click",t),e.addEventListener("auxclick",t)}setTabRenameConfirmEventListener(e){const t=e.querySelector(".chrome-tab-rename");t.addEventListener("keydown",(n=>{"Enter"===n.key&&""!==t.value?(e.setAttribute("data-tab-title",t.value),this.emit("tabRename",{tabEl:e,title:t.value}),this.toggleRenameTab(e)):"Escape"===n.key&&this.toggleRenameTab(e)}))}get activeTabEl(){return this.el.querySelector(".chrome-tab[active]")}hasActiveTab(){return!!this.activeTabEl}setCurrentTab(e){const t=this.activeTabEl;t!==e&&(t&&t.removeAttribute("active"),e.setAttribute("active",""),this.emit("activeTabChange",{tabEl:e}))}removeTab(e){e===this.activeTabEl&&(e.nextElementSibling?this.setCurrentTab(e.nextElementSibling):e.previousElementSibling&&this.setCurrentTab(e.previousElementSibling)),e.parentNode.removeChild(e),this.emit("tabRemove",{tabEl:e}),this.cleanUpPreviouslyDraggedTabs(),this.layoutTabs(),this.setupDraggabilly()}updateTab(e,t){e.setAttribute("data-tab-title",t.title),e.querySelector(".chrome-tab-title").textContent=t.title;const n=e.querySelector(".chrome-tab-rename");n.setAttribute("value",t.title),n.setAttribute("placeholder",t.title);const r=e.querySelector(".chrome-tab-favicon"),{favicon:a,faviconClass:o,className:i}=t,l=e.className.split(" ").filter((e=>e.startsWith("chrome-tab")||"dragging"===e||"phantom-tab"===e));e.className=i?[...l,...i.split(" ")].join(" "):l.join(" "),r.className="chrome-tab-favicon",r.style.backgroundImage="",a||o?(o&&(r.className=["chrome-tab-favicon",o].join(" ")),a&&(r.style.backgroundImage=`url('${a}')`),r?.removeAttribute("hidden")):(r?.setAttribute("hidden",""),r?.removeAttribute("style")),t.id&&e.setAttribute("data-tab-id",t.id)}showRenameTab(e){e.setAttribute("is-renaming",""),e.setAttribute("data-tab-title",e.textContent?.trim()||"");const t=e.querySelector(".chrome-tab-title"),n=e.querySelector(".chrome-tab-rename"),r=e.querySelector(".chrome-tab-close");t.style.display="none",n.style.display="block",r.style.display="none",n.focus(),n.select()}hideRenameTab(e){e.removeAttribute("is-renaming");const t=e.querySelector(".chrome-tab-title"),n=e.querySelector(".chrome-tab-rename");e.getAttribute("data-tab-title")&&(n.value=e.getAttribute("data-tab-title")||"",t.textContent=e.getAttribute("data-tab-title")||"");const r=e.querySelector(".chrome-tab-close");t.style.display="block",n.style.display="none",r.style.display=this.tabEls.length>1?"block":"none"}toggleRenameTab(e){"none"===e.querySelector(".chrome-tab-title").style.display?this.hideRenameTab(e):this.showRenameTab(e)}cleanUpPreviouslyDraggedTabs(){this.tabEls.forEach((e=>e.classList.remove("chrome-tab-was-just-dragged")))}setupDraggabilly(){const e=this.tabEls,t=this.tabPositions;this.isDragging&&(this.isDragging=!1,this.el.classList.remove("chrome-tabs-is-sorting"),this.draggabillyDragging.element.classList.remove("chrome-tab-is-dragging"),this.draggabillyDragging.element.style.transform="",this.draggabillyDragging.dragEnd(),this.draggabillyDragging.isDragging=!1,this.draggabillyDragging.positionDrag=$i,this.draggabillyDragging.destroy(),this.draggabillyDragging=null),this.draggabillies.forEach((e=>e.destroy())),e.find((e=>e.classList.contains("temporary-tab")))||e.forEach(((n,r)=>{const a=t[r],o=new(qi())(n,{axis:"x",handle:".chrome-tab-drag-handle",containment:this.tabContentEl});let i,l,s,c=0;this.draggabillies.push(o),o.on("pointerDown",((t,r)=>{const a=r.timeStamp;t.target===n.querySelector(".chrome-tab-drag-handle")&&(i===r.clientX&&l===r.clientY&&a-c<500&&s&&(e.forEach((e=>this.hideRenameTab(e))),this.showRenameTab(n),t.stopImmediatePropagation(),s=!1),s=n.hasAttribute("active"),i=r.clientX,l=r.clientY,c=a),this.emit("tabClick",{tabEl:n})})),o.on("dragStart",(e=>{this.isDragging=!0,this.draggabillyDragging=o,n.classList.add("chrome-tab-is-dragging"),this.el.classList.add("chrome-tabs-is-sorting"),this.emit("dragStart",{})})),o.on("dragEnd",(e=>{this.isDragging=!1;const t=parseFloat(n.style.left);n.style.transform="translate3d(0, 0, 0)",this.emit("dragEnd",{}),requestAnimationFrame((e=>{n.style.left="0",n.style.transform=`translate3d(${t}px, 0, 0)`,requestAnimationFrame((e=>{n.classList.remove("chrome-tab-is-dragging"),this.el.classList.remove("chrome-tabs-is-sorting"),n.classList.add("chrome-tab-was-just-dragged"),requestAnimationFrame((e=>{n.style.transform="",this.layoutTabs(),this.setupDraggabilly()}))}))}))})),o.on("dragMove",((e,r,o)=>{const i=this.tabEls,l=i.indexOf(n),s=((e,t)=>{let n=1/0,r=-1;return t.forEach(((t,a)=>{Math.abs(e-t)<n&&(n=Math.abs(e-t),r=a)})),r})(a+o.x,t),c=Math.max(0,Math.min(i.length,s));l!==c&&this.animateTabMove(n,l,c)}))}))}animateTabMove(e,t,n){n<t?e.parentNode.insertBefore(e,this.tabEls[n]):e.parentNode.insertBefore(e,this.tabEls[n+1]),this.emit("tabReorder",{tabEl:e,originIndex:t,destinationIndex:n}),this.layoutTabs()}setupNewTabButton(){const e=this.tabContentEl.parentNode?.querySelector(".new-tab-button-wrapper"),t=this.limit&&this.tabEls.length>=this.limit;e&&t?(e.parentNode?.removeChild(e),this.layoutTabs()):e||(this.tabContentEl.insertAdjacentHTML("afterend",'\n    <div class="new-tab-button-wrapper">\n      <button class="new-tab-button" data-hook="new-tab-button">✚</button>\n    </div>\n  '),this.layoutTabs())}};function Qi(){return Qi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qi.apply(this,arguments)}const Yi=(0,r.forwardRef)(((e,t)=>{const n=["chrome-tabs"];return e.darkMode&&n.push("chrome-tabs-dark-theme"),e.className&&n.push(e.className),r.createElement("div",{ref:t,className:n.join(" "),style:{"--tab-content-margin":"9px",paddingBottom:"3px"}},r.createElement("div",{className:"chrome-tabs-content"}))}));var Ki=n(23701),Xi=n.n(Ki);function Ji({tabs:e,limit:t,className:n,darkMode:a,onTabActive:o,onTabClose:i,onTabRename:l,onTabReorder:s,onContextMenu:c,onNewTab:d}){const u=(0,r.useRef)([]),m=(0,r.useRef)({tabId:"",fromIndex:-1,toIndex:-1}),p=(0,r.useCallback)(((e,t,n)=>{const[r]=u.current.splice(t,1);u.current.splice(n,0,r);const a=m.current.fromIndex;m.current={tabId:e,fromIndex:a>-1?a:t,toIndex:n}}),[]),g=(0,r.useCallback)((()=>{const{tabId:e,fromIndex:t,toIndex:n}=m.current;t>-1&&s?.(e,t,n),m.current={tabId:"",fromIndex:-1,toIndex:-1}}),[s]),{ChromeTabs:f,addTab:h,activeTab:b,removeTab:y,updateTab:E}=function(e,t){const n=(0,r.useRef)(null),a=(0,r.useRef)(null);(0,r.useEffect)((()=>{const e=new Wi;a.current=e,e.init(n.current,t)}),[]),(0,r.useEffect)((()=>{const t=({detail:t})=>{const n=t.tabEl.getAttribute("data-tab-id");e.onTabActive?.(n)},n=({detail:t})=>{const{tabEl:n,title:r}=t,a=n.getAttribute("data-tab-id");e.onTabRename?.(a,r)},r=a.current?.el;return r?.addEventListener("tabClick",t),r?.addEventListener("tabRename",n),()=>{r?.removeEventListener("tabClick",t),r?.removeEventListener("tabRename",n)}}),[e.onTabActive]),(0,r.useEffect)((()=>{const t=a.current?.el,n=({detail:t})=>{const{tabEl:n,originIndex:r,destinationIndex:a}=t,o=n.getAttribute("data-tab-id");e.onTabReorder?.(o,r,a)};return t?.addEventListener("tabReorder",n),()=>{t?.removeEventListener("tabReorder",n)}}),[e.onTabReorder]),(0,r.useEffect)((()=>{const t=a.current?.el,n=({detail:t})=>{const n=t.tabEl.getAttribute("data-tab-id");e.onTabClose?.(n)};return t?.addEventListener("tabClose",n),()=>{t?.removeEventListener("tabClose",n)}}),[e.onTabClose]),(0,r.useEffect)((()=>{const t=()=>{e.onDragBegin?.()},n=a.current?.el;return n?.addEventListener("dragBegin",t),()=>{n?.removeEventListener("dragBegin",t)}}),[e.onDragBegin]),(0,r.useEffect)((()=>{const t=a.current?.el,n=({detail:t})=>{const n=t.tabEl;if(!n)return;const r=n.getAttribute("data-tab-id");e.onContextMenu?.(r,t.event)};return t?.addEventListener("contextmenu",n),()=>{t?.removeEventListener("contextmenu",n)}}),[e.onContextMenu]),(0,r.useEffect)((()=>{const t=()=>{e.onDragEnd?.()},n=a.current?.el;return n?.addEventListener("dragEnd",t),()=>{n?.removeEventListener("dragEnd",t)}}),[e.onDragEnd]),(0,r.useEffect)((()=>{const t=()=>{e.onNewTab?.()},n=a.current?.el;return n?.addEventListener("newTab",t),()=>{n?.removeEventListener("newTab",t)}}),[e.onNewTab]);const o=(0,r.useCallback)((e=>{a.current?.addTab(e)}),[]),i=(0,r.useCallback)((e=>{const t=n.current?.querySelector(`[data-tab-id="${e}"]`);t&&a.current?.removeTab(t)}),[]),l=(0,r.useCallback)((e=>{const t=n.current?.querySelector(`[data-tab-id="${e}"]`);t!==a.current?.activeTabEl&&a.current?.setCurrentTab(t)}),[]),s=(0,r.useCallback)(((e,t)=>{const r=n.current?.querySelector(`[data-tab-id="${e}"]`);r?a.current?.updateTab(r,{...t}):a.current?.addTab(t)}),[]);return{ChromeTabs:(0,r.useCallback)((function(e){return r.createElement(Yi,Qi({},e,{ref:n}))}),[]),addTab:o,updateTab:s,removeTab:i,activeTab:l}}({onTabClose:i,onTabActive:o,onTabRename:l,onContextMenu:c,onNewTab:d,onDragEnd:g,onTabReorder:p},t);return(0,r.useEffect)((()=>{Xi()(u.current,e)||(u.current.slice(e.length).forEach((e=>{y(e.id)})),e.forEach(((e,t)=>{const n=u.current[t];n?Xi()(e,n)||E(n.id,e):h(e)})),e.forEach((e=>{e.active&&b(e.id)}))),u.current=e}),[e]),r.createElement(f,{className:n,darkMode:a})}var el=n(93301),tl=n(64611),nl=n(66622),rl=n(30711),al=n(49333),ol=n(14413);function il(){return il=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},il.apply(this,arguments)}const ll=(0,s.ZP)(Zn.x).attrs({align:"center",justifyContent:"space-between"}).withConfig({displayName:"tabs__Root"})(["\n  width: 100%;\n  display: flex;\n  background: ",";\n  padding-right: 1rem;\n"],(({theme:e})=>e.color.backgroundLighter)),sl=(0,s.ZP)(Vn.z).withConfig({displayName:"tabs__HistoryButton"})(["\n  &.active {\n    background: ",";\n  }\n"],(({theme:e})=>e.color.comment)),cl=(0,s.ZP)(al.h.Content).withConfig({displayName:"tabs__DropdownMenuContent"})(["\n  margin-top: 0.5rem;\n  z-index: 100;\n  background: ",";\n"],(({theme:e})=>e.color.backgroundDarker)),dl=e=>e.metricsViewState?"assets/icon-chart.svg":"assets/icon-file.svg",ul=()=>{const{activeBuffer:e,buffers:t,setActiveBuffer:n,addBuffer:a,updateBuffer:o,updateBuffersPositions:i,deleteBuffer:l,archiveBuffer:s}=Ma(),[c,d]=(0,r.useState)(!1),u=(0,r.useMemo)(H,[]),[m,p]=(0,r.useState)(!1),f=t.filter((e=>e.archived&&e.archivedAt&&-1===e.position)).sort(((e,t)=>e.archivedAt&&t.archivedAt?t.archivedAt-e.archivedAt:0));return(0,r.useLayoutEffect)((()=>{d(!0)}),[]),c?r.createElement(ll,null,r.createElement(Ji,{limit:40,darkMode:!0,onTabClose:async e=>{const n=t.find((t=>t.id===parseInt(e)));n&&1!==t.filter((e=>!e.archived||e.isTemporary)).length&&(n.isTemporary?await o(parseInt(e),{isTemporary:!1},!0):(""!==n?.value||n.metricsViewState?.metrics&&n.metricsViewState.metrics.length>0?await s(parseInt(e)):await l(parseInt(e)),await(async e=>{const n=t.filter((t=>(!t.archived||t.isTemporary)&&t.id!==parseInt(e))).sort(((e,t)=>e.position-t.position)).map(((e,t)=>({id:e.id,position:t}))).filter((e=>void 0!==e.id));n.length>0&&await i(n)})(e),f.length>=10&&await Promise.all(f.slice(9).map((e=>l(e.id))))))},onTabReorder:async(e,n,r)=>{const a=t.find((t=>t.id===parseInt(e)));if(!a)return;let o=t.filter((t=>t.id!==parseInt(e)&&(!t.archived||t.isTemporary))).sort(((e,t)=>e.isTemporary?1:t.isTemporary?-1:e.position-t.position));o.splice(r,0,a);const l=o.map(((e,t)=>({id:e.id,position:t})));await i(l)},onTabActive:async e=>{const r=t.find((t=>t.id===parseInt(e)));r&&await n(r)},onTabRename:async(e,t)=>{await o(parseInt(e),{label:t})},onNewTab:a,tabs:t.filter((e=>!e.archived||e.isTemporary)).sort(((e,t)=>e.isTemporary?1:t.isTemporary?-1:e.position-t.position)).map((t=>{const n=[];t.metricsViewState&&n.push("metrics-tab"),t.isTemporary&&n.push("temporary-tab");const r=n.length>0?n.join(" "):void 0;return{id:t.id?.toString(),favicon:dl(t),title:t.label,active:e.id===t.id,className:r}}))}),r.createElement(al.h.Root,{modal:!1,onOpenChange:p},r.createElement(al.h.Trigger,{asChild:!0},r.createElement(Ce.A,null,r.createElement(sl,il({skin:"transparent","data-hook":"editor-tabs-history-button",prefixIcon:r.createElement(el.A,{size:"20px"})},m?{className:"active"}:{}),"History"))),r.createElement(al.h.Portal,null,r.createElement(cl,{"data-hook":"editor-tabs-history"},0===f.length&&r.createElement("div",{style:{padding:"0 1rem"}},r.createElement(Pe,{color:"gray2"},"History is empty")),f.map((e=>r.createElement(al.h.Item,{"data-hook":"editor-tabs-history-item",key:e.id,onClick:async()=>{await o(e.id,{archived:!1,archivedAt:void 0,position:t.filter((e=>!e.archived||e.isTemporary)).length}),await n(e)}},r.createElement(Zn.x,{align:"flex-start",justifyContent:"flex-start",gap:"0.5rem",title:e.label},e.metricsViewState?r.createElement(tl.w,{size:"18px"}):r.createElement(nl.$,{size:"18px"}),r.createElement(Zn.x,il({flexDirection:"column",align:"flex-start",gap:"0"},e.archivedAt?{title:(0,g.WU)(new Date(e.archivedAt),"P pppp",{locale:Q(u)})}:{}),r.createElement(Pe,{color:"foreground",ellipsis:!0},e.label.substring(0,30),e.label.length>30?"...":""),e.archivedAt&&r.createElement(Pe,{color:"gray2"},(0,ol.B)(e.archivedAt,(new Date).getTime(),{locale:Q(u)})," ago")))))),f.length>0&&r.createElement(r.Fragment,null,r.createElement(al.h.Divider,null),r.createElement(al.h.Item,{onClick:async()=>{for(const e of f)await l(e.id)},"data-hook":"editor-tabs-history-clear"},r.createElement(rl.r,{size:"18px"}),r.createElement(Pe,{color:"foreground"},"Clear history"))))))):null};var ml=n(45869),pl=n(39565);const gl="yyyy-MM-dd HH:mm:ss";let fl=function(e){return e.WAL_TRANSACTION_THROUGHPUT="TABLE_WAL_TRANSACTION_THROUGHPUT",e.WAL_ROW_THROUGHPUT="TABLE_WAL_ROW_THROUGHPUT",e.WAL_TRANSACTION_LATENCY="TABLE_WAL_TRANSACTION_LATENCY",e.TABLE_WRITE_AMPLIFICATION="TABLE_WRITE_AMPLIFICATION",e.TABLE_AVERAGE_TRANSACTION_SIZE="TABLE_AVERAGE_TRANSACTION_SIZE",e}({});const hl=[{dateFrom:"now-5m",dateTo:"now",label:"Last 5m"},{dateFrom:"now-15m",dateTo:"now",label:"Last 15m"},{dateFrom:"now-1h",dateTo:"now",label:"Last 1h"},{dateFrom:"now-3h",dateTo:"now",label:"Last 3h"},{dateFrom:"now-6h",dateTo:"now",label:"Last 6h"},{dateFrom:"now-12h",dateTo:"now",label:"Last 12h"},{dateFrom:"now-24h",dateTo:"now",label:"Last 24h"},{dateFrom:"now-3d",dateTo:"now",label:"Last 3 days"},{dateFrom:"now-7d",dateTo:"now",label:"Last 7 days"}];let bl=function(e){return e.LIST="List",e.GRID="Grid",e}({}),yl=function(e){return e.AUTO="Auto",e.OFF="Off",e.ONE_SECOND="1s",e.FIVE_SECONDS="5s",e.TEN_SECONDS="10s",e.THIRTY_SECONDS="30s",e.ONE_MINUTE="1m",e}({});const El={[yl.AUTO]:0,[yl.OFF]:0,[yl.ONE_SECOND]:1,[yl.FIVE_SECONDS]:5,[yl.TEN_SECONDS]:10,[yl.THIRTY_SECONDS]:30,[yl.ONE_MINUTE]:60},wl=(e,t=2)=>{const n=parseFloat(e);return Number(n.toFixed(t))},Cl=e=>e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+" M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+" k":e.toString(),vl=e=>e instanceof Date?(0,ml.c)(e):e,xl=[1,2,3,4,5,10,15,20,25,30,45,75,90],_l=[1,2,3,4,5,10,15,20,25,30,45,75,90],Sl=[1,2,3,4,6,8,12,18,24],kl=(e,t,n=600)=>{const r=(new Date(t).getTime()-new Date(e).getTime())/1e3;return[...xl,..._l.map((e=>60*e)),...Sl.map((e=>3600*e))].sort(((e,t)=>Math.abs(e)-Math.abs(t))).find((e=>e>r/n))},Tl=e=>!(!e||0===e[1].length)&&e[1].length>0&&e[1].some((e=>null!==e)),Nl=e=>/^now(-\d+[hdm]$)?$/.test(e),Il=e=>{if(!Nl(e))return t=e,isNaN(Date.parse(t))?"Invalid date":e;var t;const n=new Date;if("now"===e)return(0,ml.c)(n);const[r,a,o,i]=e.match(/now(-)?(\d+)([a-z]+)$/);let l=0;switch(i){case"m":l=parseInt(o);break;case"h":l=60*parseInt(o);break;case"d":l=60*parseInt(o)*24;break;default:return"Invalid date"}return(0,ml.c)((0,pl._)(n,l))},Rl=(e,t)=>{const n=hl.find((n=>n.dateFrom===e&&n.dateTo===t));return n?n.label:`${e.startsWith("now")?e:(0,g.WU)(new Date(e),gl)} - ${t.startsWith("now")?t:(0,g.WU)(new Date(t),gl)}\n  `};var Ol=n(76697),Al=n(24217),Ml=n(41324),Pl=n(84001),Ll=n(22562),Dl=n.n(Ll),Bl=n(51871);const zl=["#FF6B6B","#4ECDC4","#FFD93D","#95D86E","#FF8F40","#BD93F9","#50FA7B","#FF79C6","#8BE9FD","#F1FA8C"],Fl=s.ZP.div.withConfig({displayName:"color-palette__Root"})(["\n  padding: 0.5rem;\n"]),Hl=s.ZP.div.withConfig({displayName:"color-palette__ColorBox"})(["\n  position: relative;\n  width: 1.6rem;\n  height: 1.6rem;\n  cursor: pointer;\n"]),Ul=(0,s.ZP)(Bl.J).withConfig({displayName:"color-palette__CheckIcon"})(["\n  position: absolute;\n  color: black;\n"]),Zl=({selectedColor:e,onSelect:t})=>r.createElement(Fl,null,r.createElement(Zn.x,{gap:"0.5rem"},zl.map((n=>r.createElement(Hl,{key:n,style:{backgroundColor:n},onClick:()=>t(n)},e===n&&r.createElement(Ul,{size:"16px"})))))),Vl={distribution:1,label:"WAL Transaction Latency",chartTitle:"WAL Transaction Latency (90th percentile)",getDescription:()=>r.createElement(r.Fragment,null,"This chart tracks the time required for data to become readable after being written. Higher latency may stem from:",r.createElement("ul",null,r.createElement("li",null,"Large transaction sizes (refer to Avg Transaction Size chart if elevated)"),r.createElement("li",null,"Unordered data requiring additional processing"),r.createElement("li",null,"Write amplification (see dedicated chart if batch size is optimal)"),r.createElement("li",null,"Storage I/O limitations or contention")),"Monitor this metric alongside related charts to identify the root cause of performance variations and optimize accordingly."),icon:'<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M28 37H37.18C37.3471 37.4797 37.6333 37.909 38.0117 38.2479C38.3901 38.5867 38.8483 38.824 39.3434 38.9373C39.8386 39.0507 40.3544 39.0365 40.8425 38.896C41.3307 38.7556 41.7751 38.4935 42.1343 38.1343C42.4935 37.7751 42.7556 37.3307 42.896 36.8425C43.0365 36.3544 43.0507 35.8386 42.9373 35.3434C42.824 34.8483 42.5867 34.3901 42.2479 34.0117C41.909 33.6333 41.4797 33.3471 41 33.18V24H39V33.18C38.5806 33.3293 38.1997 33.5701 37.8849 33.8849C37.5701 34.1997 37.3293 34.5806 37.18 35H28V37ZM40 35C40.1978 35 40.3911 35.0586 40.5556 35.1685C40.72 35.2784 40.8482 35.4346 40.9239 35.6173C40.9996 35.8 41.0194 36.0011 40.9808 36.1951C40.9422 36.3891 40.847 36.5673 40.7071 36.7071C40.5673 36.847 40.3891 36.9422 40.1951 36.9808C40.0011 37.0194 39.8 36.9996 39.6173 36.9239C39.4346 36.8482 39.2784 36.72 39.1685 36.5556C39.0586 36.3911 39 36.1978 39 36C39 35.7348 39.1054 35.4804 39.2929 35.2929C39.4804 35.1054 39.7348 35 40 35Z" fill="url(#paint0_linear_56_695)"/>\n    <path d="M55.06 20L56.4 18.2L57.2 18.8C57.3731 18.9298 57.5836 19 57.8 19H57.94C58.0703 18.9816 58.1956 18.9377 58.3089 18.8708C58.4221 18.8038 58.521 18.7152 58.6 18.61L61 15.4C61.1591 15.1878 61.2275 14.9211 61.1899 14.6586C61.1524 14.396 61.0122 14.1591 60.8 14L54.4 9.2C54.1878 9.04087 53.9211 8.97254 53.6586 9.01005C53.396 9.04756 53.1591 9.18783 53 9.4L50.6 12.6C50.4409 12.8122 50.3725 13.0789 50.41 13.3414C50.4476 13.604 50.5878 13.8409 50.8 14L51.6 14.6L50.17 16.5C48.2326 15.4828 46.1523 14.7647 44 14.37V12H46C46.2652 12 46.5196 11.8946 46.7071 11.7071C46.8946 11.5196 47 11.2652 47 11V7C47 6.73478 46.8946 6.48043 46.7071 6.29289C46.5196 6.10536 46.2652 6 46 6H34C33.7348 6 33.4804 6.10536 33.2929 6.29289C33.1054 6.48043 33 6.73478 33 7V11C33 11.2652 33.1054 11.5196 33.2929 11.7071C33.4804 11.8946 33.7348 12 34 12H36V14.37C33.9104 14.7609 31.889 15.4548 30 16.43L28.6 14.6L29.4 14C29.5052 13.921 29.5938 13.8221 29.6608 13.7089C29.7277 13.5956 29.7716 13.4703 29.79 13.34C29.8271 13.0779 29.7588 12.8118 29.6 12.6L27.2 9.4C27.0409 9.18783 26.804 9.04756 26.5414 9.01005C26.2789 8.97254 26.0122 9.04087 25.8 9.2L19.4 14C19.2949 14.0788 19.2064 14.1775 19.1395 14.2905C19.0726 14.4035 19.0286 14.5286 19.01 14.6586C18.9915 14.7886 18.9987 14.921 19.0313 15.0482C19.0639 15.1754 19.1212 15.2949 19.2 15.4L21.6 18.6C21.679 18.7052 21.7779 18.7938 21.8911 18.8608C22.0044 18.9277 22.1297 18.9716 22.26 18.99H22.4C22.6164 18.99 22.8269 18.9198 23 18.79L23.8 18.19L25.06 19.86C24.0312 20.8146 23.0969 21.8661 22.27 23H10V25H21C20.264 26.2692 19.6576 27.6093 19.19 29H6V31H18.58C18.2638 32.3126 18.0696 33.6516 18 35H2V37H18C18.0598 38.3474 18.2439 39.6864 18.55 41H6V43H19.15C19.6304 44.3922 20.2502 45.7324 21 47H10V49H22.27C24.0647 51.4991 26.3637 53.594 29.0184 55.1494C31.6732 56.7047 34.6246 57.6859 37.6822 58.0296C40.7397 58.3732 43.8354 58.0718 46.7691 57.1446C49.7029 56.2174 52.4096 54.6852 54.7143 52.6468C57.0191 50.6085 58.8706 48.1093 60.1494 45.3109C61.4282 42.5124 62.1057 39.4768 62.1383 36.4002C62.1709 33.3236 61.5578 30.2743 60.3385 27.4494C59.1193 24.6245 57.3211 22.0867 55.06 20ZM54 11.4L58.8 15L57.6 16.6L52.8 13L54 11.4ZM53.2 15.8L54.8 17L53.54 18.68C53.01 18.27 52.47 17.88 51.91 17.52L53.2 15.8ZM35 8H45V10H35V8ZM38 12H42V14.09C41.34 14 40.67 14 40 14C39.33 14 38.66 14 38 14.09V12ZM22.6 16.6L21.4 15L26.2 11.4L27.4 13L22.6 16.6ZM25.4 17L27 15.8L28.22 17.43C27.66 17.79 27.11 18.17 26.59 18.58L25.4 17ZM23.31 25H27.06C26.0356 26.2098 25.1842 27.556 24.53 29H21.29C21.8114 27.5952 22.4889 26.2535 23.31 25ZM32.55 23C34.8138 21.6887 37.3838 20.9988 40 21C43.9782 21 47.7936 22.5804 50.6066 25.3934C53.4196 28.2064 55 32.0218 55 36C55 39.9782 53.4196 43.7936 50.6066 46.6066C47.7936 49.4196 43.9782 51 40 51C37.3838 51.0012 34.8138 50.3113 32.55 49H34V47H29.84C28.5864 45.8529 27.538 44.5001 26.74 43H32V41H25.88C25.4201 39.7113 25.1408 38.3652 25.05 37H26V35H25.05C25.1408 33.6348 25.4201 32.2887 25.88 31H32V29H26.74C27.538 27.4999 28.5864 26.1471 29.84 25H34V23H32.55ZM20.66 31H23.75C23.3577 32.3006 23.1227 33.6435 23.05 35H20.05C20.1149 33.6492 20.3193 32.3087 20.66 31ZM20.05 37H23.05C23.1227 38.3565 23.3577 39.6994 23.75 41H20.66C20.3193 39.6913 20.1149 38.3508 20.05 37ZM21.29 43H24.53C25.1842 44.444 26.0356 45.7902 27.06 47H23.31C22.4889 45.7465 21.8114 44.4048 21.29 43ZM40 56C37.1162 55.9959 34.2675 55.3682 31.6491 54.1599C29.0306 52.9517 26.7044 51.1915 24.83 49H29.07C31.5469 51.0872 34.5685 52.4233 37.7792 52.8511C40.9899 53.2789 44.2559 52.7805 47.1929 51.4147C50.1299 50.0489 52.6156 47.8724 54.3574 45.1415C56.0991 42.4107 57.0245 39.239 57.0245 36C57.0245 32.761 56.0991 29.5893 54.3574 26.8585C52.6156 24.1276 50.1299 21.9511 47.1929 20.5853C44.2559 19.2195 40.9899 18.7211 37.7792 19.1489C34.5685 19.5767 31.5469 20.9128 29.07 23H24.83C27.0115 20.4496 29.7996 18.4892 32.9377 17.2993C36.0758 16.1094 39.4628 15.7283 42.7868 16.1911C46.1108 16.6539 49.2649 17.9458 51.9586 19.9477C54.6522 21.9496 56.7988 24.5971 58.2006 27.6465C59.6023 30.6958 60.2142 34.0488 59.9798 37.3967C59.7455 40.7446 58.6724 43.9797 56.8594 46.804C55.0465 49.6282 52.552 51.9509 49.6057 53.5579C46.6594 55.165 43.3561 56.0048 40 56Z" fill="url(#paint1_linear_56_695)"/>\n    <defs>\n        <linearGradient id="paint0_linear_56_695" x1="35.5065" y1="24" x2="35.5065" y2="39.013" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#8BE9FD"/>\n            <stop offset="1" stop-color="#3EA0B4"/>\n        </linearGradient>\n        <linearGradient id="paint1_linear_56_695" x1="32.0698" y1="6" x2="32.0698" y2="58.1672" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#8BE9FD"/>\n            <stop offset="1" stop-color="#3EA0B4"/>\n        </linearGradient>\n    </defs>\n</svg>\n',isTableMetric:!0,querySupportsRollingAppend:!0,getQuery:({tableId:e,sampleBySeconds:t,from:n,to:r})=>`\n    select created, approx_percentile(latency, 0.9, 3) latency\n      from ${y.WAL}\n      where \n          event = 105\n          and rowCount > 0\n          ${e?`and tableId = ${e}`:""}\n      sample by ${t}s\n      FROM timestamp_floor('${t}s', '${n}')\n      TO timestamp_floor('${t}s', '${r}')\n      fill(0)\n    `,alignData:e=>[e.map((e=>new Date(e.created).getTime())),e.map((e=>wl(e.latency)))],mapYValue:e=>e>=1e3?`${(e/1e3).toFixed(2)} s`:`${e} ms`},ql={distribution:1,label:"Table Write Amplification",chartTitle:"Write Amplification",getDescription:()=>r.createElement(r.Fragment,null,"This chart tracks the data write overhead during merge operations. Write amplification occurs when:",r.createElement("ul",null,r.createElement("li",null,"Copy-on-write operations affect large data blocks"),r.createElement("li",null,"Datasets are re-ingested for deduplication"),r.createElement("li",null,"Data requires extensive rewriting during merges")),"Scale ranges from optimal (1x) to problematic (1000x+). High amplification typically indicates duplicate data ingestion or suboptimal data ordering patterns."),icon:'<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M61 14H3C2.73478 14 2.48043 14.1054 2.29289 14.2929C2.10536 14.4804 2 14.7348 2 15V49C2 49.2652 2.10536 49.5196 2.29289 49.7071C2.48043 49.8946 2.73478 50 3 50H61C61.2652 50 61.5196 49.8946 61.7071 49.7071C61.8946 49.5196 62 49.2652 62 49V15C62 14.7348 61.8946 14.4804 61.7071 14.2929C61.5196 14.1054 61.2652 14 61 14ZM4 48V42H8V40H4V39H8V37H4V36H8V34H4V33H8V31H4V30H8V28H4V27H8V25H4V24H8V22H4V16H60V18H53C52.7348 18 52.4804 18.1054 52.2929 18.2929C52.1054 18.4804 52 18.7348 52 19V45C52 45.2652 52.1054 45.5196 52.2929 45.7071C52.4804 45.8946 52.7348 46 53 46H60V48H4ZM60 23V24H56V26H60V27H56V29H60V30H56V32H60V33H56V35H60V38H56V40H60V41H56V43H60V44H54V20H60V21H56V23H60Z" fill="url(#paint0_linear_56_720)"/>\n    <path d="M8 18H6V20H8V18Z" fill="url(#paint1_linear_56_720)"/>\n    <path d="M8 44H6V46H8V44Z" fill="url(#paint2_linear_56_720)"/>\n    <path d="M50 18H48V20H50V18Z" fill="url(#paint3_linear_56_720)"/>\n    <path d="M50 44H48V46H50V44Z" fill="url(#paint4_linear_56_720)"/>\n    <path d="M45 18H11C10.7348 18 10.4804 18.1054 10.2929 18.2929C10.1054 18.4804 10 18.7348 10 19V28C10 28.2652 10.1054 28.5196 10.2929 28.7071C10.4804 28.8946 10.7348 29 11 29H13C13.7956 29 14.5587 29.3161 15.1213 29.8787C15.6839 30.4413 16 31.2044 16 32C16 32.7956 15.6839 33.5587 15.1213 34.1213C14.5587 34.6839 13.7956 35 13 35H11C10.7348 35 10.4804 35.1054 10.2929 35.2929C10.1054 35.4804 10 35.7348 10 36V45C10 45.2652 10.1054 45.5196 10.2929 45.7071C10.4804 45.8946 10.7348 46 11 46H45C45.2652 46 45.5196 45.8946 45.7071 45.7071C45.8946 45.5196 46 45.2652 46 45V35H44V44H12V37H13C14.3261 37 15.5979 36.4732 16.5355 35.5355C17.4732 34.5979 18 33.3261 18 32C18 30.6739 17.4732 29.4021 16.5355 28.4645C15.5979 27.5268 14.3261 27 13 27H12V20H44V29H46V19C46 18.7348 45.8946 18.4804 45.7071 18.2929C45.5196 18.1054 45.2652 18 45 18Z" fill="url(#paint5_linear_56_720)"/>\n    <path d="M46 31H44V33H46V31Z" fill="url(#paint6_linear_56_720)"/>\n    <defs>\n        <linearGradient id="paint0_linear_56_720" x1="32" y1="14" x2="32" y2="50" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#8BE9FD"/>\n            <stop offset="1" stop-color="#3EA0B4"/>\n        </linearGradient>\n        <linearGradient id="paint1_linear_56_720" x1="7" y1="18" x2="7" y2="20" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#8BE9FD"/>\n            <stop offset="1" stop-color="#3EA0B4"/>\n        </linearGradient>\n        <linearGradient id="paint2_linear_56_720" x1="7" y1="44" x2="7" y2="46" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#8BE9FD"/>\n            <stop offset="1" stop-color="#3EA0B4"/>\n        </linearGradient>\n        <linearGradient id="paint3_linear_56_720" x1="49" y1="18" x2="49" y2="20" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#8BE9FD"/>\n            <stop offset="1" stop-color="#3EA0B4"/>\n        </linearGradient>\n        <linearGradient id="paint4_linear_56_720" x1="49" y1="44" x2="49" y2="46" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#8BE9FD"/>\n            <stop offset="1" stop-color="#3EA0B4"/>\n        </linearGradient>\n        <linearGradient id="paint5_linear_56_720" x1="28" y1="18" x2="28" y2="46" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#8BE9FD"/>\n            <stop offset="1" stop-color="#3EA0B4"/>\n        </linearGradient>\n        <linearGradient id="paint6_linear_56_720" x1="45" y1="31" x2="45" y2="33" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#8BE9FD"/>\n            <stop offset="1" stop-color="#3EA0B4"/>\n        </linearGradient>\n    </defs>\n</svg>\n',isTableMetric:!0,querySupportsRollingAppend:!0,getQuery:({tableId:e,sampleBySeconds:t,from:n,to:r})=>`\n      select\n        created,\n        COALESCE(phy_row_count / row_count,0) writeAmplification\n      from\n        (\n            select\n              created,\n              sum(rowcount) row_count,\n              sum(physicalRowCount) phy_row_count,\n            from ${y.WAL}\n            where \n              ${e?`tableId = ${e} `:""}\n              and event = 105\n              and rowCount > 0 \n            sample by ${t}s FROM timestamp_floor('${t}s', '${n}') TO timestamp_floor('${t}s', '${r}') fill(0,0)\n        );\n    `,alignData:e=>[e.map((e=>new Date(e.created).getTime())),e.map((e=>e.writeAmplification?wl(e.writeAmplification):1))],mapYValue:e=>e},$l={distribution:1,label:"WAL Row Throughput",chartTitle:"Row Processing Throughput (rows/s)",getDescription:()=>r.createElement(r.Fragment,null,"This chart displays rows processed per second during transaction merges. While similar to transaction throughput, this metric helps identify:",r.createElement("ul",null,r.createElement("li",null,"Data density variations within transactions"),r.createElement("li",null,"Processing overhead for row-heavy transactions"),r.createElement("li",null,"Resource utilization from row-level operations"),r.createElement("li",null,"Impact of row complexity on merge performance")),"Use alongside transaction throughput to understand the relationship between transaction size and processing efficiency."," "),icon:'<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M61 43H52C52 42.45 51.55 42 51 42H39.17C38.46 39.39 37.38 38 36 38H6C3.25 38 2 43.7 2 49C2 54.3 3.25 60 6 60H36C37.37 60 38.46 58.61 39.17 56H54C54.55 56 55 55.55 55 55V52H57C57.55 52 58 51.55 58 51V49H61C61.55 49 62 48.55 62 48V44C62 43.45 61.55 43 61 43ZM35.98 40C36.11 40.04 36.6 40.51 37.08 42H34.9C35.31 40.72 35.75 40.07 35.97 40H35.98ZM6.01 58C5.65 57.9 4.89 56.56 4.42 54H10V52H4.14C4.05 51.1 4 50.1 4 49C4 47.9 4.05 46.9 4.14 46H18V44H4.42C4.89 41.44 5.65 40.1 6 40H33.57C32.7 41.75 32.22 44.39 32.06 46.94C32.02 47.6 32 48.29 32 49C32 49.71 32.02 50.4 32.06 51.06C32.22 53.61 32.69 56.25 33.57 58H6.01ZM36.01 58C35.77 57.93 35.32 57.28 34.91 56H37.08C36.6 57.5 36.12 57.97 36.01 58ZM52.99 54H34.41C34.3 53.41 34.21 52.74 34.14 52H53V54H52.99ZM55.99 50H34.02C34.01 49.67 33.99 49.35 33.99 49C33.99 48.65 34.01 48.33 34.02 48H35.99V46H34.13C34.2 45.26 34.3 44.59 34.4 44H49.98V46H37.98V48H55.98V50H55.99ZM59.99 47H57.99C57.99 46.45 57.54 46 56.99 46H51.99V45H59.99V47Z" fill="url(#paint0_linear_56_708)"/>\n    <path d="M29 48H14V50H29V48Z" fill="url(#paint1_linear_56_708)"/>\n    <path d="M12 48H10V50H12V48Z" fill="url(#paint2_linear_56_708)"/>\n    <path d="M22 44H20V46H22V44Z" fill="url(#paint3_linear_56_708)"/>\n    <path d="M14 52H12V54H14V52Z" fill="url(#paint4_linear_56_708)"/>\n    <path d="M18 36C26.48 36 33.43 29.36 33.95 21H36V19H33.95C33.43 10.64 26.49 4 18 4C9.51 4 2 11.18 2 20C2 28.82 9.18 36 18 36ZM18 6C25.72 6 32 12.28 32 20C32 27.72 25.72 34 18 34C10.28 34 4 27.72 4 20C4 12.28 10.28 6 18 6Z" fill="url(#paint5_linear_56_708)"/>\n    <path d="M52 20C52 19.45 51.55 19 51 19H38V21H50V36H52V20Z" fill="url(#paint6_linear_56_708)"/>\n    <path d="M52 38H50V40H52V38Z" fill="url(#paint7_linear_56_708)"/>\n    <path d="M12 28C12.14 28 12.29 27.97 12.42 27.91C12.77 27.75 13 27.39 13 27V26H20C20.55 26 21 25.55 21 25V22H23V23C23 23.39 23.22 23.74 23.58 23.91C23.71 23.97 23.86 24 24 24C24.23 24 24.46 23.92 24.64 23.77L30.64 18.77C30.87 18.58 31 18.3 31 18C31 17.7 30.87 17.42 30.64 17.23L24.64 12.23C24.34 11.98 23.93 11.93 23.58 12.09C23.23 12.25 23 12.61 23 13V14H16C15.45 14 15 14.45 15 15V18H13V17C13 16.61 12.78 16.26 12.42 16.09C12.07 15.93 11.66 15.98 11.36 16.23L5.36 21.23C5.13 21.42 5 21.7 5 22C5 22.3 5.13 22.58 5.36 22.77L11.36 27.77C11.54 27.92 11.77 28 12 28ZM17 16H24C24.51 16 24.93 15.62 24.99 15.13L28.44 18L24.99 20.87C24.93 20.38 24.51 20 24 20H21V19C21 18.45 20.55 18 20 18H17V16ZM11.01 24.87L7.56 22L11.01 19.13C11.07 19.62 11.49 20 12 20H19V24H12C11.49 24 11.07 24.38 11.01 24.87Z" fill="url(#paint8_linear_56_708)"/>\n    <defs>\n        <linearGradient id="paint0_linear_56_708" x1="32" y1="38" x2="32" y2="60" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#8BE9FD"/>\n            <stop offset="1" stop-color="#3EA0B4"/>\n        </linearGradient>\n        <linearGradient id="paint1_linear_56_708" x1="21.5" y1="48" x2="21.5" y2="50" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#8BE9FD"/>\n            <stop offset="1" stop-color="#3EA0B4"/>\n        </linearGradient>\n        <linearGradient id="paint2_linear_56_708" x1="11" y1="48" x2="11" y2="50" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#8BE9FD"/>\n            <stop offset="1" stop-color="#3EA0B4"/>\n        </linearGradient>\n        <linearGradient id="paint3_linear_56_708" x1="21" y1="44" x2="21" y2="46" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#8BE9FD"/>\n            <stop offset="1" stop-color="#3EA0B4"/>\n        </linearGradient>\n        <linearGradient id="paint4_linear_56_708" x1="13" y1="52" x2="13" y2="54" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#8BE9FD"/>\n            <stop offset="1" stop-color="#3EA0B4"/>\n        </linearGradient>\n        <linearGradient id="paint5_linear_56_708" x1="19" y1="4" x2="19" y2="36" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#8BE9FD"/>\n            <stop offset="1" stop-color="#3EA0B4"/>\n        </linearGradient>\n        <linearGradient id="paint6_linear_56_708" x1="45" y1="19" x2="45" y2="36" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#8BE9FD"/>\n            <stop offset="1" stop-color="#3EA0B4"/>\n        </linearGradient>\n        <linearGradient id="paint7_linear_56_708" x1="51" y1="38" x2="51" y2="40" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#8BE9FD"/>\n            <stop offset="1" stop-color="#3EA0B4"/>\n        </linearGradient>\n        <linearGradient id="paint8_linear_56_708" x1="18" y1="11.998" x2="18" y2="28" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#8BE9FD"/>\n            <stop offset="1" stop-color="#3EA0B4"/>\n        </linearGradient>\n    </defs>\n</svg>\n',isTableMetric:!0,querySupportsRollingAppend:!0,getQuery:({tableId:e,sampleBySeconds:t,from:n,to:r})=>`\n      select created time,\n          sum(rowCount) numOfRowsApplied\n      from ${y.WAL}\n      where ${e?`tableId = ${e} and `:""}\n        event = 105\n        sample by 1s\n      FROM timestamp_floor('${t}s', '${n}') TO timestamp_floor('${t}s', '${r}') fill(0)\n    `,alignData:e=>[e.map((e=>new Date(e.time).getTime())),e.map((e=>e.numOfRowsApplied?wl(e.numOfRowsApplied):0))],mapYValue:e=>Cl(e)},jl={distribution:1,label:"WAL Transaction Throughput",chartTitle:"Transaction Throughput (txn/s)",getDescription:()=>r.createElement(r.Fragment,null,"This chart monitors the rate at which transactions are applied to tables. Performance is influenced by:",r.createElement("ul",null,r.createElement("li",null,"Batch merging efficiency (multiple transactions processed together)"),r.createElement("li",null,"Data ingestion rate from source"),r.createElement("li",null,"Storage performance and contention"),r.createElement("li",null,"Concurrent writes across multiple tables sharing resources")),"Compare against data source metrics to distinguish between ingestion bottlenecks and system performance limitations."),icon:'<svg width="60" height="60" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M1.99997 30.0002C1.99804 23.5333 4.23467 17.2651 8.32997 12.2602L6.78997 11.0002C2.40316 16.3605 0.00634766 23.0737 0.00634766 30.0002C0.00634766 36.9268 2.40316 43.6399 6.78997 49.0002L8.32997 47.7402C4.23467 42.7353 1.99804 36.4671 1.99997 30.0002Z" fill="url(#paint0_linear_208_15)"/>\n    <path d="M30 58.0002C24.9262 57.9962 19.9489 56.6136 15.6 54.0002L14.6 55.7202C19.2639 58.5085 24.5961 59.9809 30.03 59.9809C35.4638 59.9809 40.7961 58.5085 45.46 55.7202L44.4 54.0002C40.051 56.6136 35.0737 57.9962 30 58.0002Z" fill="url(#paint1_linear_208_15)"/>\n    <path d="M51.67 12.2602C55.7677 17.2642 58.0068 23.5325 58.0068 30.0002C58.0068 36.468 55.7677 42.7362 51.67 47.7402L53.21 49.0002C57.5968 43.6399 59.9936 36.9268 59.9936 30.0002C59.9936 23.0737 57.5968 16.3605 53.21 11.0002L51.67 12.2602Z" fill="url(#paint2_linear_208_15)"/>\n    <path d="M15.6 6.00023C19.9502 3.39152 24.9275 2.01356 30 2.01356C35.0725 2.01356 40.0497 3.39152 44.4 6.00023L45.4 4.28023C40.7361 1.49194 35.4038 0.0195313 29.97 0.0195312C24.5361 0.0195313 19.2039 1.49194 14.54 4.28023L15.6 6.00023Z" fill="url(#paint3_linear_208_15)"/>\n    <path d="M7.99997 8.00023C7.99997 8.59357 8.17592 9.17359 8.50557 9.66694C8.83521 10.1603 9.30375 10.5448 9.85192 10.7719C10.4001 10.9989 11.0033 11.0583 11.5852 10.9426C12.1672 10.8268 12.7017 10.5411 13.1213 10.1216C13.5409 9.70199 13.8266 9.16744 13.9423 8.5855C14.0581 8.00356 13.9987 7.40036 13.7716 6.85218C13.5446 6.304 13.16 5.83547 12.6667 5.50582C12.1733 5.17618 11.5933 5.00023 11 5.00023C10.2043 5.00023 9.44126 5.3163 8.87865 5.87891C8.31604 6.44152 7.99997 7.20458 7.99997 8.00023ZM12 8.00023C12 8.19801 11.9413 8.39135 11.8314 8.5558C11.7216 8.72025 11.5654 8.84842 11.3827 8.92411C11.1999 8.9998 10.9989 9.0196 10.8049 8.98102C10.6109 8.94243 10.4327 8.84719 10.2929 8.70734C10.153 8.56748 10.0578 8.3893 10.0192 8.19532C9.9806 8.00134 10.0004 7.80027 10.0761 7.61755C10.1518 7.43482 10.28 7.27864 10.4444 7.16876C10.6089 7.05888 10.8022 7.00023 11 7.00023C11.2652 7.00023 11.5195 7.10559 11.7071 7.29312C11.8946 7.48066 12 7.73501 12 8.00023Z" fill="url(#paint4_linear_208_15)"/>\n    <path d="M52 8.00023C52 7.40689 51.824 6.82687 51.4944 6.33352C51.1647 5.84017 50.6962 5.45566 50.148 5.22859C49.5998 5.00153 48.9966 4.94212 48.4147 5.05788C47.8328 5.17363 47.2982 5.45935 46.8787 5.87891C46.4591 6.29847 46.1734 6.83302 46.0576 7.41496C45.9419 7.9969 46.0013 8.6001 46.2283 9.14828C46.4554 9.69646 46.8399 10.165 47.3333 10.4946C47.8266 10.8243 48.4066 11.0002 49 11.0002C49.7956 11.0002 50.5587 10.6842 51.1213 10.1216C51.6839 9.55894 52 8.79588 52 8.00023ZM48 8.00023C48 7.80245 48.0586 7.60911 48.1685 7.44466C48.2784 7.28021 48.4346 7.15204 48.6173 7.07635C48.8 7.00066 49.0011 6.98086 49.1951 7.01945C49.389 7.05803 49.5672 7.15327 49.7071 7.29312C49.8469 7.43298 49.9422 7.61116 49.9808 7.80514C50.0193 7.99912 49.9995 8.20019 49.9239 8.38291C49.8482 8.56564 49.72 8.72182 49.5555 8.8317C49.3911 8.94158 49.1978 9.00023 49 9.00023C48.7348 9.00023 48.4804 8.89487 48.2929 8.70734C48.1053 8.5198 48 8.26545 48 8.00023Z" fill="url(#paint5_linear_208_15)"/>\n    <path d="M11 49.0002C10.4066 49.0002 9.82661 49.1762 9.33326 49.5058C8.83992 49.8355 8.4554 50.304 8.22833 50.8522C8.00127 51.4004 7.94186 52.0036 8.05762 52.5855C8.17337 53.1674 8.4591 53.702 8.87865 54.1215C9.29821 54.5411 9.83276 54.8268 10.4147 54.9426C10.9966 55.0583 11.5998 54.9989 12.148 54.7719C12.6962 54.5448 13.1647 54.1603 13.4944 53.6669C13.824 53.1736 14 52.5936 14 52.0002C14 51.2046 13.6839 50.4415 13.1213 49.8789C12.5587 49.3163 11.7956 49.0002 11 49.0002ZM11 53.0002C10.8022 53.0002 10.6089 52.9416 10.4444 52.8317C10.28 52.7218 10.1518 52.5656 10.0761 52.3829C10.0004 52.2002 9.9806 51.9991 10.0192 51.8051C10.0578 51.6112 10.153 51.433 10.2929 51.2931C10.4327 51.1533 10.6109 51.058 10.8049 51.0194C10.9989 50.9809 11.1999 51.0007 11.3827 51.0764C11.5654 51.152 11.7216 51.2802 11.8314 51.4447C11.9413 51.6091 12 51.8024 12 52.0002C12 52.2654 11.8946 52.5198 11.7071 52.7073C11.5195 52.8949 11.2652 53.0002 11 53.0002Z" fill="url(#paint6_linear_208_15)"/>\n    <path d="M49 49.0002C48.4066 49.0002 47.8266 49.1762 47.3333 49.5058C46.8399 49.8355 46.4554 50.304 46.2283 50.8522C46.0013 51.4004 45.9419 52.0036 46.0576 52.5855C46.1734 53.1674 46.4591 53.702 46.8787 54.1215C47.2982 54.5411 47.8328 54.8268 48.4147 54.9426C48.9966 55.0583 49.5998 54.9989 50.148 54.7719C50.6962 54.5448 51.1647 54.1603 51.4944 53.6669C51.824 53.1736 52 52.5936 52 52.0002C52 51.2046 51.6839 50.4415 51.1213 49.8789C50.5587 49.3163 49.7956 49.0002 49 49.0002ZM49 53.0002C48.8022 53.0002 48.6089 52.9416 48.4444 52.8317C48.28 52.7218 48.1518 52.5656 48.0761 52.3829C48.0004 52.2002 47.9806 51.9991 48.0192 51.8051C48.0578 51.6112 48.153 51.433 48.2929 51.2931C48.4327 51.1533 48.6109 51.058 48.8049 51.0194C48.9989 50.9809 49.1999 51.0007 49.3827 51.0764C49.5654 51.152 49.7216 51.2802 49.8314 51.4447C49.9413 51.6091 50 51.8024 50 52.0002C50 52.2654 49.8946 52.5198 49.7071 52.7073C49.5195 52.8949 49.2652 53.0002 49 53.0002Z" fill="url(#paint7_linear_208_15)"/>\n    <path d="M49 22.0002V14.0002C49 10.0502 37.06 9.00023 30 9.00023C22.94 9.00023 11 10.0502 11 14.0002V22.0002C11.0266 22.4098 11.1537 22.8064 11.3699 23.1553C11.5862 23.5041 11.885 23.7943 12.24 24.0002C11.8873 24.2089 11.5903 24.4997 11.3744 24.848C11.1585 25.1962 11.03 25.5916 11 26.0002V34.0002C11.0266 34.4098 11.1537 34.8064 11.3699 35.1553C11.5862 35.5041 11.885 35.7943 12.24 36.0002C11.8873 36.2089 11.5903 36.4997 11.3744 36.848C11.1585 37.1962 11.03 37.5916 11 38.0002V46.0002C11 50.0002 22.94 51.0002 30 51.0002C37.06 51.0002 49 50.0002 49 46.0002V38.0002C48.9699 37.5916 48.8415 37.1962 48.6256 36.848C48.4096 36.4997 48.1127 36.2089 47.76 36.0002C48.1149 35.7943 48.4137 35.5041 48.63 35.1553C48.8463 34.8064 48.9733 34.4098 49 34.0002V26.0002C48.9699 25.5916 48.8415 25.1962 48.6256 24.848C48.4096 24.4997 48.1127 24.2089 47.76 24.0002C48.1149 23.7943 48.4137 23.5041 48.63 23.1553C48.8463 22.8064 48.9733 22.4098 49 22.0002ZM13 16.4602C16.7 18.4102 24.72 19.0002 30 19.0002C35.28 19.0002 43.3 18.4102 47 16.4602V22.0002C46.69 23.0502 40.6 25.0002 30 25.0002C19.4 25.0002 13.31 23.0002 13 22.0002V16.4602ZM30 11.0002C40.55 11.0002 46.64 12.9402 47 14.0002C46.64 15.0602 40.55 17.0002 30 17.0002C19.45 17.0002 13.31 15.0002 13 14.0002C13.31 13.0002 19.41 11.0002 30 11.0002ZM13 28.4602C16.7 30.4102 24.72 31.0002 30 31.0002C35.28 31.0002 43.3 30.4102 47 28.4602V34.0002C46.69 35.0002 40.6 37.0002 30 37.0002C19.4 37.0002 13.31 35.0002 13 34.0002V28.4602ZM30 49.0002C19.4 49.0002 13.31 47.0002 13 46.0002V40.4602C16.7 42.4102 24.72 43.0002 30 43.0002C35.28 43.0002 43.3 42.4102 47 40.4602V46.0002C46.69 47.0002 40.6 49.0002 30 49.0002ZM47 38.0002C46.7 39.0602 40.6 41.0002 30 41.0002C19.4 41.0002 13.31 39.0002 13 38.0002C13 38.0002 13.2 37.5802 14.44 37.0602C18.51 38.5402 25.33 39.0002 30 39.0002C34.67 39.0002 41.49 38.5402 45.56 37.0802C46.79 37.6002 47 38.0002 47 38.0002ZM47 26.0002C46.7 27.0602 40.6 29.0002 30 29.0002C19.4 29.0002 13.31 27.0002 13 26.0002C13 26.0002 13.2 25.5802 14.44 25.0602C18.51 26.5402 25.33 27.0002 30 27.0002C34.67 27.0002 41.49 26.5402 45.56 25.0802C46.79 25.6002 47 26.0002 47 26.0002Z" fill="url(#paint8_linear_208_15)"/>\n    <path d="M31 21.0002H29V23.0002H31V21.0002Z" fill="url(#paint9_linear_208_15)"/>\n    <path d="M31 33.0002H29V35.0002H31V33.0002Z" fill="url(#paint10_linear_208_15)"/>\n    <path d="M31 45.0002H29V47.0002H31V45.0002Z" fill="url(#paint11_linear_208_15)"/>\n    <defs>\n        <linearGradient id="paint0_linear_208_15" x1="30" y1="0.0195312" x2="30" y2="59.9809" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#8BE9FD"/>\n            <stop offset="1" stop-color="#3EA0B4"/>\n        </linearGradient>\n        <linearGradient id="paint1_linear_208_15" x1="30" y1="0.0195312" x2="30" y2="59.9809" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#8BE9FD"/>\n            <stop offset="1" stop-color="#3EA0B4"/>\n        </linearGradient>\n        <linearGradient id="paint2_linear_208_15" x1="30" y1="0.0195312" x2="30" y2="59.9809" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#8BE9FD"/>\n            <stop offset="1" stop-color="#3EA0B4"/>\n        </linearGradient>\n        <linearGradient id="paint3_linear_208_15" x1="30" y1="0.0195312" x2="30" y2="59.9809" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#8BE9FD"/>\n            <stop offset="1" stop-color="#3EA0B4"/>\n        </linearGradient>\n        <linearGradient id="paint4_linear_208_15" x1="30" y1="0.0195312" x2="30" y2="59.9809" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#8BE9FD"/>\n            <stop offset="1" stop-color="#3EA0B4"/>\n        </linearGradient>\n        <linearGradient id="paint5_linear_208_15" x1="30" y1="0.0195312" x2="30" y2="59.9809" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#8BE9FD"/>\n            <stop offset="1" stop-color="#3EA0B4"/>\n        </linearGradient>\n        <linearGradient id="paint6_linear_208_15" x1="30" y1="0.0195312" x2="30" y2="59.9809" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#8BE9FD"/>\n            <stop offset="1" stop-color="#3EA0B4"/>\n        </linearGradient>\n        <linearGradient id="paint7_linear_208_15" x1="30" y1="0.0195312" x2="30" y2="59.9809" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#8BE9FD"/>\n            <stop offset="1" stop-color="#3EA0B4"/>\n        </linearGradient>\n        <linearGradient id="paint8_linear_208_15" x1="30" y1="0.0195312" x2="30" y2="59.9809" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#8BE9FD"/>\n            <stop offset="1" stop-color="#3EA0B4"/>\n        </linearGradient>\n        <linearGradient id="paint9_linear_208_15" x1="30" y1="0.0195312" x2="30" y2="59.9809" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#8BE9FD"/>\n            <stop offset="1" stop-color="#3EA0B4"/>\n        </linearGradient>\n        <linearGradient id="paint10_linear_208_15" x1="30" y1="0.0195312" x2="30" y2="59.9809" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#8BE9FD"/>\n            <stop offset="1" stop-color="#3EA0B4"/>\n        </linearGradient>\n        <linearGradient id="paint11_linear_208_15" x1="30" y1="0.0195312" x2="30" y2="59.9809" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#8BE9FD"/>\n            <stop offset="1" stop-color="#3EA0B4"/>\n        </linearGradient>\n    </defs>\n</svg>\n',isTableMetric:!0,querySupportsRollingAppend:!0,getQuery:({tableId:e,sampleBySeconds:t,from:n,to:r})=>1===t?`select\n            created created\n            , count() commit_rate\n          from ${y.WAL}\n          where ${e?`tableId = ${e} and `:""}\n          event = 103\n          sample by 1s\n          FROM timestamp_floor('${t}s', '${n}')\n             TO timestamp_floor('${t}s', '${r}')\n          fill(0)`:`select created, max(commit_rate) commit_rate from (\n        select\n          created created\n          , count() commit_rate\n        from ${y.WAL}\n        where ${e?`tableId = ${e} and `:""}\n        event = 103\n        sample by 1s FROM timestamp_floor('1s', '${n}') TO timestamp_floor('1s', '${r}') fill(0)\n        ) sample by ${t}s`,alignData:e=>[e.map((e=>Date.parse(e.created))),e.map((e=>wl(e.commit_rate)))],mapYValue:e=>Cl(e)},Gl={distribution:1,label:"Average Transaction Size",chartTitle:"Average Transaction Size (rows/txn)",getDescription:()=>r.createElement(r.Fragment,null,"This chart tracks the mean size of transactions processed through the database API. While the database is optimized for both small and large transactions, larger batch sizes generally lead to better database performance. Monitor this metric to understand your API's transaction patterns and identify opportunities for batch size optimization. Key aspects to observe:",r.createElement("ul",null,r.createElement("li",null,"Transaction size trends and variations"),r.createElement("li",null,"Any unusually small transactions that could be batched"),r.createElement("li",null,"Consistency of batch sizes across time periods"))),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 24">\n  <defs>\n    <linearGradient id="dbGradient" x1="0%" y1="0%" x2="100%" y2="100%">\n      <stop offset="0%" style="stop-color:#A5F3F9;stop-opacity:1" />\n      <stop offset="12.5%" style="stop-color:#9AEEF4;stop-opacity:1" />\n      <stop offset="25%" style="stop-color:#8FE7EF;stop-opacity:1" />\n      <stop offset="37.5%" style="stop-color:#84E4EC;stop-opacity:1" />\n      <stop offset="50%" style="stop-color:#77E1E9;stop-opacity:1" />\n      <stop offset="62.5%" style="stop-color:#6FDCE6;stop-opacity:1" />\n      <stop offset="75%" style="stop-color:#65D8E0;stop-opacity:1" />\n      <stop offset="87.5%" style="stop-color:#61D4DC;stop-opacity:1" />\n      <stop offset="100%" style="stop-color:#5CCFD7;stop-opacity:1" />\n    </linearGradient>\n  </defs>\n\n  \x3c!-- Main database outline --\x3e\n  <path d="M4 5c0 1.38 2.69 2.5 6 2.5s6-1.12 6-2.5-2.69-2.5-6-2.5-6 1.12-6 2.5v12c0 1.38 2.69 2.5 6 2.5s6-1.12 6-2.5v-12" fill="none" stroke="url(#dbGradient)" stroke-width="1.5"/>\n  \n  \x3c!-- Concentric lines for database layers --\x3e\n  <path d="M4 9c0 1.38 2.69 2.5 6 2.5s6-1.12 6-2.5" fill="none" stroke="url(#dbGradient)" stroke-width="1.5"/>\n  <path d="M4 13c0 1.38 2.69 2.5 6 2.5s6-1.12 6-2.5" fill="none" stroke="url(#dbGradient)" stroke-width="1.5"/>\n  \n  \x3c!-- Arrow --\x3e\n  <path d="M22 8l2-2l2 2M22 16l2 2l2-2M24 6v12" fill="none" stroke="url(#dbGradient)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>',isTableMetric:!0,querySupportsRollingAppend:!0,getQuery:({tableId:e,sampleBySeconds:t,from:n,to:r})=>`\n      select\n           created,\n           avg(rowCount) avg_rows,\n      from sys.telemetry_wal\n      where ${e?`tableId = ${e} `:""}\n           and event = 105\n      sample by ${t}s FROM timestamp_floor('${t}s', '${n}') TO timestamp_floor('${t}s', '${r}') fill(0)\n    `,alignData:e=>[e.map((e=>new Date(e.created).getTime())),e.map((e=>e.avg_rows?wl(e.avg_rows):1))],mapYValue:e=>e},Wl={[fl.WAL_TRANSACTION_THROUGHPUT]:jl,[fl.WAL_TRANSACTION_LATENCY]:Vl,[fl.WAL_ROW_THROUGHPUT]:$l,[fl.TABLE_WRITE_AMPLIFICATION]:ql,[fl.TABLE_AVERAGE_TRANSACTION_SIZE]:Gl},Ql=(0,s.ZP)(ho.V.Description).withConfig({displayName:"add-metric-dialog__StyledDescription"})(["\n  display: grid;\n  gap: 2rem;\n"]),Yl=s.ZP.div.withConfig({displayName:"add-metric-dialog__Metrics"})(["\n  display: grid;\n  gap: 2rem;\n  grid-template-columns: repeat(2, 1fr);\n"]),Kl=(0,s.ZP)(Zn.x).attrs({flexDirection:"column",gap:"0"}).withConfig({displayName:"add-metric-dialog__Metric"})(["\n  border-radius: 0.4rem;\n  cursor: pointer;\n  border: 1px solid transparent;\n  padding-bottom: 2rem;\n  background: ",";\n\n  &:hover {\n    border-color: ",";\n  }\n"],(({theme:e})=>e.color.backgroundLighter),(({theme:e})=>e.color.comment)),Xl=(0,s.ZP)(Zn.x).attrs({align:"center",justifyContent:"center"}).withConfig({displayName:"add-metric-dialog__Image"})(["\n  width: 100%;\n  height: 10rem;\n"]),Jl=({open:e,onOpenChange:t})=>{const{activeBuffer:n,buffers:a,updateBuffer:o}=Ma(),i=a.find((e=>e.id===n?.id)),l=i?.metricsViewState?.metrics??[],s=l.length>0?l[l.length-1]:void 0,c=s?((e,t)=>{const n=zl.filter((e=>e!==t)),r=n.filter((t=>!e.includes(t)));return r.length>0?r[Math.floor(Math.random()*r.length)]:n[Math.floor(Math.random()*n.length)]})(l.map((e=>e.color)),s.color):"#FF6B6B";return r.createElement(ho.V.Root,{open:e},r.createElement(ho.V.Trigger,{asChild:!0},r.createElement(Ce.A,null,r.createElement(Vn.z,{skin:"secondary",prefixIcon:r.createElement(Pl.J,{size:"18px"}),onClick:()=>t(!e)},"Add widget"))),r.createElement(ho.V.Portal,null,r.createElement(Ce.A,null,r.createElement(ve.a,{primitive:ho.V.Overlay})),r.createElement(ho.V.Content,{onEscapeKeyDown:()=>t(!1),onInteractOutside:()=>t(!1)},r.createElement(ho.V.Title,null,r.createElement(Zn.x,null,r.createElement(Pl.J,{size:22}),"Add widget")),r.createElement(Ql,null,r.createElement(Yl,null,Object.entries(Wl).map((([e,n])=>r.createElement(Kl,{key:e,onClick:()=>(async e=>{if(i?.id){const n=Dl()(i,{metricsViewState:{metrics:[...i.metricsViewState?.metrics??[],{metricType:e,position:i.metricsViewState?.metrics?.length??0,color:c}]}});await o(i.id,n),t(!1)}})(e)},r.createElement(Xl,null,r.createElement("svg",{width:"64",height:"64",dangerouslySetInnerHTML:{__html:n.icon}})),r.createElement(Pe,{color:"foreground",weight:600},n.label)))))))))};var es=n(40015),ts=n(35637),ns=n(29943),rs=n.n(ns);const as=(e,t,n)=>({hooks:{setCursor:r=>{if(!e.current||!t.current)return;const{idx:a}=r.cursor,o=null!=a?r.data[0][a]:null,i=null!=a?r.data[1][a]:null;if([i,o].every((e=>null!==e))){try{e.current.textContent=b(o,gl)}catch(t){e.current.textContent=o?.toString()??""}t.current.textContent=n(i)}else e.current.textContent=null,t.current.textContent=null}}}),os=s.ZP.div.withConfig({displayName:"graph__Actions"})(["\n  margin-right: 0;\n"]),is=(0,s.ZP)(Zn.x).attrs({align:"center",flexDirection:"column",gap:0}).withConfig({displayName:"graph__Root"})(["\n  position: relative;\n  background-color: ",";\n  height: 25rem;\n"],(({theme:e})=>e.color.backgroundLighter)),ls=s.ZP.div.withConfig({displayName:"graph__BeforeLabel"})(["\n  margin-left: 0;\n"]),ss=(0,s.ZP)(Zn.x).attrs({align:"center",justifyContent:"space-between"}).withConfig({displayName:"graph__Header"})(["\n  position: relative;\n  width: 100%;\n"]),cs=s.ZP.span.withConfig({displayName:"graph__HeaderText"})(["\n  font-size: 1.4rem;\n  font-weight: 600;\n  padding: 0 0 0 1rem;\n"]),ds=(0,s.ZP)(Zn.x).attrs({flexDirection:"column",align:"center"}).withConfig({displayName:"graph__GraphWrapper"})(["\n  position: relative;\n  padding: 1rem 0;\n"]),us=(0,s.ZP)(Zn.x).attrs({flexDirection:"column",align:"center",justifyContent:"center"}).withConfig({displayName:"graph__GraphOverlay"})(["\n  width: 100%;\n  height: 15rem;\n  position: absolute;\n  z-index: 1;\n"]),ms=s.ZP.div.withConfig({displayName:"graph__Label"})(["\n  position: absolute;\n  bottom: 1rem;\n  display: flex;\n  gap: 0.5rem;\n  font-family: ",";\n"],(({theme:e})=>e.font)),ps=s.ZP.span.withConfig({displayName:"graph__LabelValue"})(["\n  color: ",";\n"],(({theme:e})=>e.color.cyan)),gs=(0,s.ZP)(ts.j).withConfig({displayName:"graph__ErrorIcon"})(["\n  color: ",";\n"],(({theme:e})=>e.color.red)),fs=({dateFrom:e,dateTo:t,tableId:n,tableName:a,beforeLabel:o,data:i,canZoomToData:l,colors:c,loading:d,actions:u,onZoomToData:m,widgetConfig:p,hasError:g})=>{const f=(0,r.useContext)(s.Ni),h=(0,r.useRef)(null),y=(0,r.useRef)(null),E=(0,r.useRef)(),{isTableMetric:w,mapYValue:C,chartTitle:v}=p,x=new Date(Il(e)).getTime(),_=new Date(Il(t)).getTime(),[S,k]=(0,r.useState)(d),[T,N]=(0,r.useState)(void 0),I=(0,r.useMemo)((()=>new ResizeObserver((e=>{e[0]&&E.current&&E.current.setSize({width:e[0].contentRect.width,height:200})}))),[]),R=Il(e),O=Il(t);(0,r.useEffect)((()=>{N((({data:e,startTime:t,endTime:n,colors:r,mapXValue:a,mapYValue:o=(e=>(+e).toFixed(4)),timeRef:i,valueRef:l,widgetConfig:s,theme:c})=>{const d={stroke:c.color.gray2,labelFont:`600 12px ${c.font}`,font:`14px ${c.font}`,ticks:{show:!1,stroke:c.color.gray1,width:.8,dash:[],size:10},grid:{stroke:c.color.selectionDarker}},u=[{...d,values:(e,t)=>{let n=[];return t.map(((e,r)=>{const o=a(e,r,t);return null===o||n.includes(o)?null:(n.push(o),o)}))}},{...d,values:(e,t)=>t.map((e=>o(e)))}],m={x:{},y:{label:"",points:{show:1===e[0].length},stroke:r[0],fill:(p=r[0],p.startsWith("#")?`${p}33`:p.startsWith("rgb")?p.replace("rgb","rgba").replace(")",", 0.2)"):p),width:.6,value:(e,t)=>3!==s.distribution?o(t):t}};var p;const g={x:{time:!0,range:[t,n]},y:{distr:s.distribution,range:(e,t,n)=>[(e.data[0].length>1&&3!==s.distribution&&t!==n?t:3!==s.distribution?0:1)||0,n||1]}};return{ms:1,padding:[10,20,0,20],cursor:{sync:{key:"metrics",setSeries:!0}},axes:Object.values(u),series:Object.values(m),scales:g,legend:{show:!1,markers:{show:!1}},plugins:[as(i,l,o)]}})({data:i,startTime:x,endTime:_,colors:c,timeRef:h,valueRef:y,mapXValue:e=>((e,t,n)=>{let r;const a=(n-t)/1e3;return r=a<60?"HH:mm:ss":a<3600||a<=86400||a<=86400?"HH:mm":"dd/MM",b(e,r)})(e,x,_),mapYValue:C,widgetConfig:p,theme:f}))}),[i]);const A=(0,r.useRef)(null);(0,r.useEffect)((()=>(A.current&&I.observe(A.current),()=>{I.disconnect(),E.current&&(E.current.destroy(),E.current=void 0)})),[]),(0,r.useEffect)((()=>{if(d){const e=setTimeout((()=>{k(!0)}),1e3);return()=>clearTimeout(e)}k(!1)}),[d]);const M=i[1].length>0?C(Math.floor(i[1][i[1].length-1])):void 0;return r.createElement(is,{ref:A},r.createElement(ss,null,r.createElement(Zn.x,{gap:"0.5rem",align:"center"},r.createElement(ls,null,o),r.createElement(cs,null,v),r.createElement(Xe,{icon:r.createElement(Ot.d,{size:"16px"}),tooltip:p.getDescription({lastValue:M,sampleBySeconds:kl(R,O)}),placement:"bottom"}),S&&r.createElement(es.a,{size:"18px",spin:!0}),g&&r.createElement(Xe,{icon:r.createElement(gs,{size:"18px"}),tooltip:"Error fetching latest data, try refreshing manually",placement:"bottom"})),r.createElement(os,null,u)),r.createElement(ds,null,!Tl(i)&&r.createElement(us,null,w&&!a?r.createElement(Pe,{color:"gray2"},n?"Table does not exist. Please select another one":"Select a table to see metrics"):r.createElement(Pe,{color:"gray2"},"No data available for this period"),l&&r.createElement(Vn.z,{skin:"secondary",onClick:m},"Zoom to data")),r.createElement("div",{ref:A},T&&r.createElement(rs(),{options:{...T,height:200,width:A.current?.clientWidth??0},data:i,onCreate:e=>{E.current=e}})),r.createElement(ms,null,r.createElement("span",{ref:h}),r.createElement(ps,{ref:y}))))};var hs=n(60407),bs=n(85501),ys=n(37355),Es=n(66145),ws=n.n(Es);function Cs(){return Cs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cs.apply(this,arguments)}const vs=s.ZP.div.withConfig({displayName:"table-selector__Root"})(["\n  display: flex;\n  position: relative;\n  margin-left: 1rem;\n"]),xs=(0,s.ZP)(ys.i).withConfig({displayName:"table-selector__TableIcon"})(["\n  color: ",";\n"],(({theme:e})=>e.color.gray2)),_s=(0,s.ZP)(Jn.I).withConfig({displayName:"table-selector__StyledInput"})(["\n  border: 1px solid transparent;\n  background: transparent;\n  font-weight: 600;\n  font-size: 1.6rem;\n  color: ",";\n  text-transform: uppercase;\n  width: 100%;\n  ","\n\n  &:hover,\n  &:active,\n  &:focus {\n    background: transparent;\n    border-color: ",";\n  }\n"],(({theme:e})=>e.color.yellow),(({$highlight:e})=>e&&(0,s.iv)(["\n    background: transparent;\n    border-color: ",";\n  "],(({theme:e})=>e.color.comment))),(({theme:e})=>e.color.comment)),Ss=(0,s.ZP)(_s).withConfig({displayName:"table-selector__ShadowInput"})(["\n  visibility: hidden;\n  width: max-content;\n  z-index: 1;\n  position: fixed;\n"]),ks=s.ZP.div.withConfig({displayName:"table-selector__Wrapper"})(["\n  position: absolute;\n  width: 30rem;\n  z-index: 100;\n  top: 100%;\n  overflow-y: auto;\n  max-height: calc(10 * 3rem);\n"]),Ts=s.ZP.ul.withConfig({displayName:"table-selector__Options"})(["\n  list-style: none;\n  background: ",";\n  box-shadow: 0 5px 5px 0 ",";\n  margin: 0;\n  padding: 0.5rem;\n  border-radius: 0.4rem;\n"],(({theme:e})=>e.color.backgroundDarker),(({theme:e})=>e.color.black40)),Ns=s.ZP.li.withConfig({displayName:"table-selector__Item"})(['\n  display: flex;\n  align-items: center;\n  height: 3rem;\n  padding: 0 1rem;\n  font-family: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",\n    "Courier New", monospace;\n  ',"\n\n  ","\n"],(({active:e,theme:t})=>`\n    background: ${e?t.color.selection:"transparent"};\n  `),(({disabled:e,theme:t})=>`\n    color: ${e?t.color.gray1:t.color.foreground};\n    cursor: ${e?"not-allowed":"pointer"};\n  `)),Is=({tableId:e,defaultValue:t,options:n,onSelect:a,placeholder:o,loading:i})=>{const[l,s]=(0,r.useState)(!1),c=(0,r.useRef)(null),d=(0,r.useRef)(null),[u,m]=(0,r.useState)(t??""),[p,g]=(0,r.useState)(-1),f=qe("ArrowDown"),h=qe("ArrowUp"),b=qe("Enter"),y=(0,r.useRef)(null),E=(0,r.useRef)(void 0),w=n.filter((e=>!u||e.label.toLowerCase().includes(u.toLowerCase()))).sort(((e,t)=>e.label.toLowerCase().localeCompare(t.label.toLowerCase())));return(0,r.useEffect)((()=>{if(c.current&&d.current&&c.current&&d.current&&!i){c.current.style.width=`${d.current.offsetWidth}px`;const e=t??"";E.current!==e&&(m(t??""),E.current=t??"");const n=e=>{c.current?.contains(e.target)||(e.target instanceof HTMLElement||e.target instanceof SVGElement)&&"table-selector-item"!==e.target.getAttribute("data-hook")&&(t&&m(t),s(!1))};return document.addEventListener("click",n),()=>document.removeEventListener("click",n)}}),[t,c,i]),(0,r.useEffect)((()=>{f?g(p<w.length-1?p+1:0):h&&g(p>0?p-1:w.length-1)}),[f,h]),(0,r.useEffect)((()=>{if(b&&w.length>0&&-1!==p){if(w[p].disabled)return;a(w[p].value),s(!1),m(w[p].label)}}),[b]),(0,r.useEffect)((()=>{1===w.length&&u?.toLowerCase()===w[0].label.toLowerCase()&&g(0)}),[u,w]),r.createElement(vs,null,r.createElement(Zn.x,{align:"center",gap:"0.5rem"},r.createElement(xs,{size:"18px"}),r.createElement(_s,{value:u,$highlight:""===t,placeholder:""!==t?t:o,ref:c,onFocus:()=>{m(t),c.current?.select(),s(!0)},onKeyUp:e=>{"Backspace"===e.key?""===u&&(m(""),s(!0),g(-1)):"Escape"===e.key&&(m(t),s(!1))},onChange:e=>{m(e.target.value??"")}})),r.createElement(Ss,{ref:d,as:"span"},""!==t?t:o),l&&r.createElement(ks,{ref:y},r.createElement(Ts,null,w.sort(((e,t)=>e.disabled===t.disabled?0:e.disabled?1:-1)).map(((e,t)=>r.createElement(Ns,Cs({"data-hook":"table-selector-item",tabIndex:t,active:p===w.indexOf(e),key:e.value,onMouseEnter:()=>g(t),onMouseLeave:()=>g(-1),disabled:e.disabled},!e.disabled&&{onClick:()=>{c.current.value=e.label,a(e.value),m(e.label),s(!1)}}),r.createElement(ws(),{highlightClassName:"highlight",searchWords:[u??""],textToHighlight:e.label})))))))},Rs=(0,s.ZP)(Zn.x).attrs({align:"center",justifyContent:"center"}).withConfig({displayName:"metric__MetricInfoRoot"})(["\n  background-color: ",";\n  height: 25rem;\n"],(({theme:e})=>e.color.backgroundLighter)),Os=(0,s.ZP)(Vn.z).withConfig({displayName:"metric__ActionButton"})(["\n  padding: 0;\n  width: 3rem;\n"]),As=({dateFrom:e,dateTo:t,metric:n,onRemove:a,onTableChange:i,onColorChange:l})=>{const{quest:s}=(0,r.useContext)(Jr),[c,d]=(0,r.useState)(void 0!==n.tableId),[u,m]=(0,r.useState)(),[p,g]=(0,r.useState)(!1),f=r.useRef(n.tableId),h=r.useRef(e),b=r.useRef(t),y=r.useRef([[],[]]),E=r.useRef(),[w,C]=(0,r.useState)(!1);h.current=e,b.current=t;const v=(0,o.v9)(Tn.query.getTables),x=v.find((e=>e.id===n.tableId))?.table_name;E.current=x;const _=Wl[n.metricType];if(!y.current&&!c&&n.tableId)return n.tableId=void 0,r.createElement(Rs,null,r.createElement(ts.j,{size:"18px"}),"Cannot load metric:"," ",_?_.label:n.metricType);const S=(0,r.useCallback)((async()=>{d(!0),C(!1);try{const t=Il(h.current),n=Il(b.current),r=vl(t),a=vl(n),o=kl(t,n),i=await Promise.all([s.query((e=_.getQuery({tableId:f.current,sampleBySeconds:o,from:r,to:a}),e?e.replace(/\/\*[\s\S]*?\*\//g,"").replace(/--.*/g,"").replace(/\s+(?=(?:[^'"]|'[^']*'|"[^"]*")*$)/g," ").replace(/\s*,\s*/g,",").replace(/\s*\(\s*/g,"(").replace(/\s*\)\s*/g,")").replace(/\s*([+\-*\/%])\s*/g,"$1").replace(/\s*(=|<>|!=|>=|<=|>|<)\s*/g,"$1").trim():""))]);if(i[0]&&i[0].type===T.DQL){const e=i[0].data;if(e.length>0||!t||!n||!o)y.current=_.alignData(e);else{const e=Date.parse(t),r=Date.parse(n),a=Math.floor((r-e)/1e3/o),i=Array.from({length:a},((t,n)=>1e3*(e/1e3+n*o))),l=new Array(a).fill(0);y.current=[i,l]}}if(i[1]&&i[1].type===T.DQL){const e=i[1].data[0];m(e?new Date(e.created).getTime():void 0)}}catch(e){console.error(e),C(!0)}finally{d(!1)}var e}),[x,_,s]),k=()=>{E.current?S():(y.current=[[],[]],d(!1))};(0,r.useEffect)((()=>{x&&(E.current=x,f.current=n.tableId,y.current=[[],[]],S())}),[x,_]),(0,r.useEffect)((()=>(O.subscribe(A.METRICS_REFRESH_DATA,k),()=>{O.unsubscribe(A.METRICS_REFRESH_DATA,k)})),[x,_]);const N=(0,r.useMemo)((()=>v.map((e=>({label:e.table_name,value:e.id.toString(),disabled:!e.walEnabled})))),[v]);return r.createElement(fs,{dateFrom:e,dateTo:t,data:n.tableId&&Tl(y.current)?y.current:[[],[]],canZoomToData:!1,onZoomToData:()=>{},colors:[n.color],loading:c,tableId:n.tableId,tableName:x,widgetConfig:_,beforeLabel:r.createElement(Is,{tableId:n.tableId,loading:c,options:N,placeholder:"Select table",onSelect:e=>i(n,parseInt(e)),defaultValue:E.current||""}),actions:r.createElement(Zn.x,{gap:"0.5rem",align:"center"},r.createElement(Xe,{icon:r.createElement(Ce.A,null,r.createElement(hs.J,{open:p,onOpenChange:g,trigger:r.createElement(Os,{skin:"transparent"},r.createElement(bs.Y,{size:"18px"})),align:"center"},r.createElement(Zl,{onSelect:e=>l(n,e),selectedColor:n.color}))),tooltip:"Choose series color",placement:"top"}),r.createElement(Xe,{icon:r.createElement(Os,{skin:"transparent",onClick:()=>a(n)},r.createElement(rl.r,{size:"18px"})),tooltip:"Remove metric",placement:"top"})),hasError:w})};var Ms=n(55743),Ps=n(16012),Ls=n(93065),Ds=n(79540),Bs=n(64788),zs=n(94014);const Fs=({className:e,min:t,max:n,value:a,onChange:o,selectRange:i})=>r.createElement(zs.ZP,{className:e,defaultValue:a,minDate:t,maxDate:n,minDetail:"month",maxDetail:"month",returnValue:"start",onChange:e=>o(e),selectRange:i});var Hs=n(48232);function Us(){return Us=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Us.apply(this,arguments)}const Zs=(0,s.ZP)(Zn.x).attrs({gap:"1rem",flexDirection:"column",align:"flex-start"}).withConfig({displayName:"date-time-picker__Root"})(["\n  background: ",";\n  width: 50rem;\n  padding: 1rem 1rem 0 1rem;\n"],(({theme:e})=>e.color.backgroundDarker)),Vs=(0,s.ZP)(Zn.x).attrs({gap:0,align:"flex-start"}).withConfig({displayName:"date-time-picker__Cols"})(["\n  width: 100%;\n"]),qs=(0,s.ZP)(Vn.z).withConfig({displayName:"date-time-picker__Trigger"})(["\n  padding-right: 0;\n"]),$s=(0,s.ZP)(Zn.x).attrs({flexDirection:"column",gap:"1rem",align:"flex-start"}).withConfig({displayName:"date-time-picker__DatePickers"})(["\n  width: 70%;\n  align-self: flex-start;\n  padding-right: 1rem;\n  padding-left: 1rem;\n"]),js=s.ZP.ul.withConfig({displayName:"date-time-picker__MetricDurations"})(["\n  width: 40%;\n  list-style: none;\n  margin: 0;\n  padding: 0 0 0 1rem;\n  border-left: 1px solid ",";\n"],(({theme:e})=>e.color.selection)),Gs=s.ZP.li.withConfig({displayName:"date-time-picker__MetricDurationItem"})(["\n  cursor: pointer;\n  height: 3rem;\n  padding: 0 1rem;\n  line-height: 3rem;\n\n  &:hover {\n    background: ",";\n  }\n\n  ","\n"],(({theme:e})=>e.color.selection),(({selected:e,theme:t})=>e&&`& { background: ${t.color.selection}; }`)),Ws=(0,s.ZP)(Zn.x).attrs({gap:0,align:"center"}).withConfig({displayName:"date-time-picker__Footer"})(["\n  width: 100%;\n  padding: 1rem 0;\n  border-top: 1px solid ",";\n"],(({theme:e})=>e.color.selection)),Qs=({min:e,max:t,name:n,label:a,dateFrom:o,dateTo:i,onChange:l})=>{const{setValue:s}=(0,jn.Gc)(),c=Il(o),d=Il(i);return r.createElement(gr.Item,{name:n,label:a},r.createElement(Zn.x,{gap:"0.5rem",align:"center"},r.createElement(gr.Input,{name:n,onChange:e=>{s(n,e.target.value);try{const t=Il(e.target.value);if("Invalid date"===t)return;"dateFrom"===n?l([t,i]):"dateTo"===n&&l([o,t])}catch(e){console.error(e)}},placeholder:"now"}),r.createElement(hs.J,{trigger:r.createElement(Vn.z,{skin:"secondary"}," ",r.createElement(Ms.f,{size:"18px"})," "),align:"center"},r.createElement(Fs,{min:e,max:t,onChange:e=>{const t=e;["dateFrom","dateTo"].forEach(((n,r)=>{e&&t[r]&&s(n,b(new Date(t[r]).getTime()))}))},value:["Invalid date"!==c?new Date(Il(o)):new Date,"Invalid date"==d?new Date(Il(i)):new Date],selectRange:!0}))))},Ys=({dateFrom:e,dateTo:t,onDateFromToChange:n})=>{const[a,o]=(0,r.useState)(!1),[i,l]=(0,r.useState)(e),[s,c]=(0,r.useState)(t),d=(0,Hs.W)(new Date,12),u=new Date,m={"string.empty":"Please enter a date or duration","string.invalidDate":"Date format or duration is invalid","string.toIsBeforeFrom":"To date must be after From date","string.dateInFuture":"Please set a date in the past or use `now`","string.fromIsAfterTo":"From date must be before To date","string.sameValues":"From and To dates cannot be the same","any.custom":"One of the values is invalid","string.maxDateRange":"Date range cannot exceed 7 days"},p=hr().object({dateFrom:hr().any().required().custom(((e,t)=>{const n=Il(e),r=new Date(n).getTime(),a=(new Date).getTime();try{const o=new Date(Il(t.state.ancestors[0].dateTo)).getTime();return"Invalid date"===n?t.error("string.invalidDate"):r>=o?t.error("string.fromIsAfterTo"):r>a?t.error("string.dateInFuture"):r===a?t.error("string.sameValues"):o-r>6048e5?t.error("string.maxDateRange"):e}catch(e){return t.error("any.custom")}})).messages(m),dateTo:hr().any().required().custom(((e,t)=>{const n=Il(e),r=new Date(n).getTime(),a=(new Date).getTime(),o=new Date(Il(t.state.ancestors[0].dateFrom)).getTime();return"Invalid date"===n?t.error("string.invalidDate"):r<=o?t.error("string.toIsBeforeFrom"):r>a?t.error("string.dateInFuture"):r===a?t.error("string.sameValues"):r-o>6048e5?t.error("string.maxDateRange"):e})).messages(m)}),g={min:d,max:u,dateFrom:i,dateTo:s,onChange:([e,t])=>{l(e),c(t)}};return(0,r.useEffect)((()=>{l(e),c(t)}),[e,t]),r.createElement(hs.J,{open:a,onOpenChange:o,trigger:r.createElement(qs,{skin:"secondary",prefixIcon:r.createElement(Ps.q,{size:"18px"})},Rl(e,t),a?r.createElement(Ds.D,{size:"28px"}):r.createElement(Bs.D,{size:"28px"}))},r.createElement(Zs,null,r.createElement(Vs,null,r.createElement($s,null,r.createElement(Pe,{weight:600,color:"foreground",size:"lg"},"Absolute time range"),r.createElement(gr,{name:"dateRanges",onSubmit:async e=>{e.dateFrom&&e.dateTo&&(n(Nl(e.dateFrom)?e.dateFrom:(0,ml.c)(e.dateFrom),Nl(e.dateTo)?e.dateTo:(0,ml.c)(e.dateTo)),o(!1))},defaultValues:{dateFrom:e,dateTo:t},validationSchema:p},r.createElement(Zn.x,{flexDirection:"column",gap:"1rem",align:"flex-start"},r.createElement(Qs,Us({name:"dateFrom",label:"From"},g)),r.createElement(Qs,Us({name:"dateTo",label:"To"},g)),r.createElement(gr.Submit,null,"Apply")))),r.createElement(js,null,Object.values(hl).map((({label:a,dateFrom:i,dateTo:l})=>r.createElement(Gs,{key:a,selected:e===i&&t===l,onClick:()=>{n(i,l),o(!1)}},a))))),r.createElement(Ws,null,r.createElement(Zn.x,{gap:"0.5rem",align:"center"},r.createElement(Ls.q,{size:"14px"}),r.createElement(Pe,{color:"foreground"},h()," (",(()=>{const e=(new Date).getTimezoneOffset(),t=Math.floor(Math.abs(e)/60),n=Math.abs(e)%60;return`GMT${e>0?"-":"+"}${String(t).padStart(2,"0")}:${String(n).padStart(2,"0")}`})(),")")))))};function Ks(){return Ks=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ks.apply(this,arguments)}const Xs=s.ZP.div.withConfig({displayName:"Metrics__Root"})(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  background: #2c2e3d;\n  padding-bottom: calc(4.5rem);\n"]),Js=(0,s.ZP)(Zn.x).attrs({align:"center",justifyContent:"space-between"}).withConfig({displayName:"Metrics__Toolbar"})(["\n  width: 100%;\n  height: 4.5rem;\n  padding: 0 2.5rem;\n  border-bottom: 1px solid\n    ",";\n  box-shadow: 0 2px 10px 0 rgba(23, 23, 23, 0.35);\n  white-space: nowrap;\n  flex-shrink: 0;\n"],(({theme:e})=>e.color.backgroundDarker)),ec=(0,s.ZP)(Pe).withConfig({displayName:"Metrics__Header"})(["\n  font-size: 1.8rem;\n  font-weight: 600;\n  color: ",";\n  margin-bottom: 1rem;\n"],(({theme:e})=>e.color.foreground)),tc=(0,s.ZP)(Zn.x).attrs({align:"flex-start",gap:"2.5rem"}).withConfig({displayName:"Metrics__Charts"})(["\n  align-content: ",";\n  padding: 2.5rem;\n  overflow-y: auto;\n  height: 100%;\n  width: 100%;\n  flex-wrap: wrap;\n\n  > div {\n    width: ",";\n    flex-shrink: 0;\n  }\n"],(({noMetrics:e})=>e?"center":"flex-start"),(({viewMode:e})=>e===bl.GRID?"calc(50% - 1.25rem)":"100%")),nc=(0,s.ZP)(Zn.x).attrs({align:"center",justifyContent:"center"}).withConfig({displayName:"Metrics__GlobalInfo"})(["\n  margin: auto;\n\n  code {\n    background: #505368;\n    color: ",";\n  }\n"],(({theme:e})=>e.color.foreground)),rc=()=>r.createElement(nc,null,r.createElement(Zn.x,{gap:"1.5rem",flexDirection:"column"},r.createElement(ec,null,"Metrics unavailable"),r.createElement(Pe,{color:"foreground"},"Enable Telemetry to access WAL table metrics."),r.createElement(Pe,{color:"foreground"},"Set ",r.createElement("code",null,"telemetry.enabled=true")," in your server.conf file and restart the server."),r.createElement(Pe,{color:"foreground"},"Alternatively, set ",r.createElement("code",null,"QDB_TELEMETRY_ENABLED=true")," ENV var for the same effect."),r.createElement(ot,{color:"cyan",hoverColor:"cyan",href:"https://questdb.io/docs/configuration/#telemetry",rel:"noreferrer",target:"_blank"},r.createElement(Zn.x,{align:"center",gap:"0.25rem"},r.createElement(Wa.d,{size:"16px"}),"Documentation")))),ac=()=>{const{activeBuffer:e,updateBuffer:t,buffers:n,isNavigatingFromSearchRef:a}=Ma(),[i,l]=(0,r.useState)(!1),s=(0,o.v9)(Tn.telemetry.getConfig),c=s&&s.enabled,d=(0,r.useRef)(!1),u=(0,r.useRef)(),m=(0,r.useRef)((0,ml.c)(new Date(Date.now()-9e5))),p=(0,r.useRef)((0,ml.c)(new Date)),g=(0,r.useMemo)((()=>n.find((t=>t.id===e?.id))),[n,e?.id]),{dateFrom:f=m.current,dateTo:h=p.current,refreshRate:b,viewMode:y=bl.GRID}=g?.metricsViewState??{},E=g?.metricsViewState?.metrics??[],w=(0,r.useRef)(f),C=(0,r.useRef)(h),v=b?b===yl.AUTO?El[((e,t)=>{const n=(new Date(Il(t)).getTime()-new Date(Il(e)).getTime())/1e3;return n<=300||n<=900?yl.FIVE_SECONDS:n<=3600?yl.TEN_SECONDS:n<=10800||n<=21600||n<=43200||n<=86400?yl.THIRTY_SECONDS:yl.ONE_MINUTE})(f,h)]:El[b]:0,x=(0,r.useCallback)((e=>{g?.id&&t(g?.id,{metricsViewState:{...g?.metricsViewState,metrics:e}})}),[g?.id,g?.metricsViewState,t]),_=(0,r.useCallback)((()=>{O.publish(A.METRICS_REFRESH_DATA,{dateFrom:w.current,dateTo:C.current})}),[]),S=(0,r.useCallback)((e=>{g?.id&&g?.metricsViewState?.metrics&&x(g?.metricsViewState?.metrics.filter((t=>t.position!==e.position)).map(((e,t)=>({...e,position:t}))))}),[g?.id,g?.metricsViewState?.metrics,x]),k=(0,r.useCallback)(((e,t)=>{g?.id&&g?.metricsViewState?.metrics&&x(g?.metricsViewState?.metrics.map((n=>n.position===e.position?{...n,tableId:t}:n)))}),[g?.id,g?.metricsViewState?.metrics,x]),T=(0,r.useCallback)(((e,t)=>{g?.id&&g?.metricsViewState?.metrics&&(x(g?.metricsViewState?.metrics.map((n=>n.position===e.position?{...n,color:t}:n))),_())}),[g?.id,g?.metricsViewState?.metrics,x,_]),N=(0,r.useCallback)(((e,n)=>{w.current=e,C.current=n,g?.id&&(t(g.id,{metricsViewState:{...g?.metricsViewState,dateFrom:e,dateTo:n}}),_())}),[g?.id,g?.metricsViewState,t,_]),[I,R]=((e=1e3)=>{const[t,n]=(0,r.useState)(!0),a=(0,r.useRef)(null),o=(0,r.useRef)(null),i=(0,r.useRef)(null),l=(0,r.useRef)(Date.now()),s=(0,r.useCallback)((()=>{const r=Date.now(),a=r-l.current;l.current=r;const o=a>2*e;o!==!t&&n(!o),i.current=requestAnimationFrame(s)}),[e,t]);return(0,r.useEffect)((()=>{o.current=new IntersectionObserver((e=>{e.forEach((e=>{n(e.isIntersecting)}))}),{threshold:.1});const e=()=>{n(!document.hidden)};return a.current&&o.current.observe(a.current),document.addEventListener("visibilitychange",e),i.current=requestAnimationFrame(s),()=>{o.current&&o.current.disconnect(),document.removeEventListener("visibilitychange",e),i.current&&cancelAnimationFrame(i.current)}}),[s]),[a,t]})(1e3),M=(0,r.useRef)(R);(0,r.useEffect)((()=>{M.current=R}),[R]),(0,r.useEffect)((()=>{w.current=f,C.current=h}),[f,h]);const P=(0,r.useCallback)((()=>{u.current&&(clearInterval(u.current),u.current=void 0),b&&b!==yl.OFF&&v>0?u.current=setInterval((()=>{M.current&&c&&_()}),1e3*v):clearInterval(u.current)}),[b,v,_]);return(0,r.useEffect)((()=>{if(g?.id&&!1===d.current){if(g?.metricsViewState?.metrics){const e=[...g.metricsViewState.metrics].filter((e=>Wl[e.metricType])).map((e=>({...e,removed:!1})));t(g.id,{metricsViewState:{...g?.metricsViewState,metrics:e}})}d.current=!0}}),[g,t]),(0,r.useEffect)((()=>{g?.id&&_()}),[g?.id,_]),(0,r.useEffect)((()=>{P()}),[b]),(0,r.useEffect)((()=>(a.current=!1,()=>{u.current&&clearInterval(u.current)})),[]),r.createElement(Xs,Ks({"data-hook":"metrics-root"},c?{ref:I}:{},{className:"metrics-root"}),c?r.createElement(r.Fragment,null,r.createElement(Js,null,r.createElement(Jl,{open:i,onOpenChange:l}),r.createElement(Zn.x,{align:"center",gap:"1rem"},r.createElement(Zn.x,{gap:"0.5rem",style:{flexShrink:0}},r.createElement(Xe,{icon:r.createElement(Vn.z,{skin:"secondary",onClick:_},r.createElement(Ol.h,{size:"20px"})),tooltip:"Refresh all widgets",placement:"bottom"}),r.createElement(Xe,{icon:r.createElement(sr.P,{name:"refresh_rate",value:b,options:Object.values(yl).map((e=>({label:`Refresh: ${e}`,value:e}))),onChange:e=>{g?.id&&t(g.id,{metricsViewState:{...g?.metricsViewState,refreshRate:e.target.value}})}}),tooltip:"Widget refresh rate",placement:"bottom"})),r.createElement(Xe,{icon:r.createElement(Ce.A,null,r.createElement(Ys,{dateFrom:f,dateTo:h,onDateFromToChange:N})),tooltip:"Time duration",placement:"bottom"}),r.createElement(Xe,{icon:r.createElement(Vn.z,{skin:"secondary",onClick:()=>{g?.id&&t(g.id,{metricsViewState:{...g?.metricsViewState,viewMode:y===bl.GRID?bl.LIST:bl.GRID}})}},y===bl.LIST?r.createElement(Al.B,{size:"18px"}):r.createElement(Ml.v,{size:"18px"})),tooltip:r.createElement(r.Fragment,null,"Toggle view mode",r.createElement("br",null),"to ",y===bl.GRID?"column":"grid"),placement:"bottom",textAlign:"center"}))),r.createElement(tc,{noMetrics:0===E.length,viewMode:y},0===E.length&&r.createElement(nc,null,r.createElement(Zn.x,{gap:"1.5rem",flexDirection:"column"},r.createElement(ec,null,"Add your first widget to see metrics"),r.createElement(Vn.z,{skin:"secondary",onClick:()=>l(!0),prefixIcon:r.createElement(Pl.J,{size:"18px"})},"Add widget"))),E&&[...E].sort(((e,t)=>e.position-t.position)).filter((e=>Wl[e.metricType]&&!e.removed)).map((e=>r.createElement(As,{dateFrom:f,dateTo:h,key:`${e.position}-${e.metricType}`,metric:e,onRemove:S,onTableChange:k,onColorChange:T}))))):r.createElement(rc,null))};var oc=n(99637),ic=n(76410),lc=n(52655);const sc=s.ZP.div.withConfig({displayName:"styles__Wrapper"})(["\n  display: flex;\n  align-items: center;\n  border-right: none;\n  height: ",";\n  border-bottom: ",";\n  padding: 0 1rem;\n  flex-shrink: 0;\n  width: 100%;\n  overflow-x: auto;\n  scrollbar-width: none;\n  -ms-overflow-style: none; \n  &::-webkit-scrollbar {\n    display: none;\n  }\n\n  ",";\n"],(({isMinimized:e})=>e?"auto":"4.5rem"),(({isMinimized:e,theme:t})=>e?"none":`1px solid ${t.color.backgroundDarker}`),ee),cc=s.ZP.div.withConfig({displayName:"styles__Content"})(["\n  display: flex;\n  margin-left: 0.5rem;\n  white-space: nowrap;\n"]),dc=s.ZP.div.withConfig({displayName:"styles__SideContent"})(["\n  padding-left: 1rem;\n  text-overflow: ellipsis;\n"]);var uc=n(96035);const mc=(0,s.ZP)(Pe).withConfig({displayName:"Timestamp__TimestampText"})(["\n  display: flex;\n  margin-right: 0.5rem;\n  white-space: nowrap;\n"]),pc=({createdAt:e})=>{const t=(0,r.useMemo)(H,[]);return r.createElement(mc,{color:"gray2"},"[",(0,g.WU)(e,"pppp",{locale:Q(t)}),"]")},gc=(0,s.ZP)(At.W).withConfig({displayName:"SuccessNotification__CheckmarkOutlineIcon"})(["\n  color: ",";\n  flex-shrink: 0;\n"],D("green")),fc=(0,s.ZP)(uc.i).withConfig({displayName:"SuccessNotification__ZapIcon"})(["\n  color: ",";\n  flex-shrink: 0;\n"],D("yellow")),hc=e=>{const{createdAt:t,content:n,sideContent:a,jitCompiled:o,isMinimized:i}=e;return r.createElement(sc,{isMinimized:i,"data-hook":"success-notification"},r.createElement(pc,{createdAt:t}),o?r.createElement(Xe,{icon:r.createElement(fc,{size:"16px"}),placement:"top",tooltip:"JIT Compiled"}):r.createElement(gc,{size:"18px"}),r.createElement(cc,null,n),r.createElement(dc,null,a))};var bc=n(2128);const yc=(0,s.ZP)(bc.e).withConfig({displayName:"ErrorNotification__CloseOutlineIcon"})(["\n  color: ",";\n  flex-shrink: 0;\n"],D("red")),Ec=e=>{const{createdAt:t,content:n,sideContent:a,isMinimized:o}=e;return r.createElement(sc,{isMinimized:o,"data-hook":"error-notification"},r.createElement(pc,{createdAt:t}),r.createElement(yc,{size:"18px"}),r.createElement(cc,null,n),r.createElement(dc,null,a))},wc=e=>{const{createdAt:t,content:n,sideContent:a,isMinimized:o}=e;return r.createElement(sc,{isMinimized:o,"data-hook":"info-notification"},r.createElement(pc,{createdAt:t}),r.createElement(cc,null,n),r.createElement(dc,null,a))};var Cc=n(55122);const vc=(0,s.ZP)(Cc.E).withConfig({displayName:"NoticeNotification__InfoOutlineIcon"})(["\n  color: ",";\n  flex-shrink: 0;\n"],D("yellow")),xc=e=>{const{createdAt:t,content:n,sideContent:a,isMinimized:o}=e;return r.createElement(sc,{isMinimized:o,"data-hook":"notice-notification"},r.createElement(pc,{createdAt:t}),r.createElement(vc,{size:"18px"}),r.createElement(cc,null,n),r.createElement(dc,null,a))},_c=e=>{const{createdAt:t,content:n,sideContent:a,isMinimized:o}=e;return r.createElement(sc,{isMinimized:o,"data-hook":"loading-notification"},r.createElement(pc,{createdAt:t}),r.createElement(es.a,null),r.createElement(cc,null,n),r.createElement(dc,null,a))},Sc=e=>{const{type:t}=e;return t===Zt.SUCCESS?r.createElement(hc,e):t===Zt.ERROR?r.createElement(Ec,e):t==Zt.NOTICE?r.createElement(xc,e):t===Zt.LOADING?r.createElement(_c,e):r.createElement(wc,e)};function kc(){return kc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kc.apply(this,arguments)}const Tc=(0,s.ZP)(lt).withConfig({displayName:"Notifications__Wrapper"})(["\n  flex: ",";\n  overflow: auto;\n  max-height: 35rem;\n  background: ",";\n"],(e=>e.minimized?"initial":"1"),(({theme:e})=>e.color.backgroundLighter)),Nc=(0,s.ZP)(Ie).withConfig({displayName:"Notifications__Menu"})(['\n  justify-content: space-between;\n  overflow: hidden;\n  border: 0;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n\n  ::before {\n    content: "";\n    position: absolute;\n    top: 0;\n    cursor: text;\n    left: 0;\n    width: 100%;\n    height: 2px;\n    background: ',";\n  }\n"],(({theme:e})=>e.color.backgroundDarker)),Ic=(0,s.ZP)(it).withConfig({displayName:"Notifications__Content"})(["\n  overflow: ",";\n  overflow-x: hidden;\n  height: ",";\n"],(e=>e.minimized?"hidden":"auto"),(e=>e.minimized?"4rem":"100%")),Rc=(0,s.ZP)(Pe).withConfig({displayName:"Notifications__Header"})(["\n  display: flex;\n  align-items: center;\n"]),Oc=s.ZP.div.withConfig({displayName:"Notifications__LatestNotification"})(["\n  padding: 0 1rem;\n  flex: 1;\n  height: 100%;\n  display: flex;\n  cursor: text;\n  align-items: stretch;\n  width: calc(100% - 10rem);\n"]),Ac=(0,s.ZP)(oc.T).withConfig({displayName:"Notifications__TerminalBoxIcon"})(["\n  margin-right: 1rem;\n"]),Mc=s.ZP.div.withConfig({displayName:"Notifications__ClearAllNotifications"})(["\n  display: flex;\n  width: 100%;\n  height: 4.5rem;\n  justify-content: center;\n  padding: 0.5rem 1rem;\n  margin-top: auto;\n  align-items: center;\n  flex-shrink: 0;\n"]),Pc=({onClearNotifications:e})=>{const{activeBuffer:t}=Ma(),n=(0,o.v9)(Tn.query.getNotifications),a=(0,o.v9)(Tn.query.getQueryNotificationsForBuffer(t.id))||{},i=(0,o.v9)(Tn.query.getActiveNotification),{sm:l}=Ye(),[s,c]=(0,r.useState)(!0),d=(0,r.useRef)(null),u=((0,o.I0)(),n.filter((e=>a[e.query]))),m=()=>{d.current?.scrollTo({top:d.current?.scrollHeight})},p=(0,r.useCallback)((()=>{c(!s)}),[s]);return(0,r.useLayoutEffect)((()=>{u.length>0&&m()}),[u]),(0,r.useLayoutEffect)((()=>{m()}),[s]),(0,r.useEffect)((()=>{l&&c(!0)}),[l]),r.createElement(Tc,{minimized:s,"data-hook":"notifications-wrapper"},r.createElement(Nc,null,r.createElement(Rc,{color:"foreground"},r.createElement(Ac,{size:"18px"}),"Log"),r.createElement(Oc,{"data-hook":"notifications-collapsed"},s&&i&&r.createElement(Sc,kc({isMinimized:!0},i))),(u.length>0||!s)&&r.createElement(Vn.z,{skin:s?"secondary":"transparent",onClick:p,"data-hook":s?"expand-notifications":"collapse-notifications"},s?r.createElement(ic.f,{size:"18px"}):r.createElement(lc.I,{size:"18px"}))),!s&&r.createElement(Ic,{minimized:s,ref:d,"data-hook":"notifications-expanded"},u.filter((e=>e.type!==Zt.LOADING)).map((e=>r.createElement(Sc,kc({isMinimized:!1,key:e.createdAt?e.createdAt.getTime():0},e)))),!s&&r.createElement(Mc,null,r.createElement(Vn.z,{skin:"secondary",disabled:0===u.length,onClick:()=>e(t.id)},"Clear query log"))))};function Lc(){return Lc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lc.apply(this,arguments)}const Dc=(0,s.ZP)(lt).withConfig({displayName:"Editor__EditorPaneWrapper"})(["\n  height: 100%;\n  overflow: hidden;\n"]),Bc=({innerRef:e,...t})=>{const n=(0,o.I0)(),{activeBuffer:a,addBuffer:i}=Ma(),l=(0,r.useRef)({});return(0,r.useEffect)((()=>{new URLSearchParams(window.location.search).get("query")&&a.metricsViewState&&i({label:"Query"})}),[]),r.createElement(Dc,Lc({ref:e},t),r.createElement(ul,null),a.editorViewState&&r.createElement(Zi,{executionRefs:l}),a.metricsViewState&&r.createElement(ac,{key:a.id}),a.editorViewState&&r.createElement(Pc,{onClearNotifications:e=>{n(Wt(e)),delete l.current[e]}}))},zc=(e,t)=>r.createElement(Bc,Lc({},e,{innerRef:t})),Fc=(0,r.forwardRef)(zc);var Hc=n(23945),Uc=n.n(Hc),Zc=n(23401),Vc=n(44609),qc=n(14544),$c=n(22373),jc=n(9449),Gc=n(4222);const Wc=e=>{const t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[<>"']/g,(e=>t[e]))};function Qc(e,t,n){const r={gridID:"qdb-grid",minColumnWidth:60,rowHeight:30,divCacheSize:64,viewportHeight:400,yMaxThreshold:1e7,maxRowsToAnalyze:100,minVpHeight:120,minDivHeight:160,scrollerGirth:10,dragHandleWidth:20,dataPageSize:1e3,layoutStoreTimeout:1e3,cellWidthMultiplier:9.6},a="qg-c-active",o=0,i=3,l=4,s=(n||r.gridID)+".columnLayout",c=e,d=t;let u,m,g,f,h,b,y,E,w,C,v,x,_,S,k,T,N,I,R,O,A,M=0,P=[],L=[],D=[],B=[],z=0,F=-1,H=-1,U=[],Z=-1,V=!1;const q=r.divCacheSize,$=q-1,j=r.dataPageSize,G=Math.floor(j/3),W=2*G;let Q,Y,K,X,J=[],ee=0,te=10,ne=0,re=0,ae=0,oe=r.viewportHeight;const ie=r.rowHeight;let le,se,ce,de,ue,me,pe,ge,fe,he,be=[],ye=-1,Ee=-1;const we={colLo:0,colHi:0,nextVisColumnLo:0,render:!1},Ce=r.scrollerGirth;let ve,xe,_e,Se,ke,Te,Ne,Ie,Re,Oe,Ae,Me=0,Pe=!0,Le=!1,De={},Be=!1;function ze(e){return D[B[e]]}function Fe(){const e=Ee;if(-1===e)return;let t=0;M>0&&(t=M,M<=e&&(M=0,E.innerHTML="",un()));const n=Qe(e);for(let t=e;t>0;t--)O[t]=O[t-1]+n;O[0]=0;const r=e+1;for(let t=e;t>=0;t--){const e=g.childNodes[t].querySelector(".qg-col-resize-hysteresis");e&&(e.columnIndex=(e.columnIndex+1)%r)}-1!==F&&F<r&&(F=(F+1)%r),g.childNodes[0].before(g.childNodes[e]);const a=B[e];for(let t=e;t>0;t--)B[t]=B[t-1];B[0]=a,t>0&&(t<=e?pn(t+1):(E.childNodes[0].before(E.childNodes[e]),Tt(P,0,Math.min(M,z),ee))),ne=0,Tt(be,0,te,0),u.scrollLeft>0?u.scrollLeft=0:Ht(),It(e),function(e){const t=it();t.columnPositions=B,t.timestampIndex=F;for(let n=0;n<e;n++)t.deviants[ze(n).name]=Qe(n);ot()}(r)}function He(e,t,n,r){if(e.rowIndex!==t){const a=U[Math.floor(t/j)];if(a){const o=a[t%j];if(o){e.style.display="flex";for(let t=n;t<r;t++)_t(ze(t),e.childNodes[t%te],o[B[t]]);e.rowIndex=t}else e.style.display="none",e.rowIndex=-1}else{for(let t=n;t<r;t++)e.childNodes[t%te].innerHTML="";e.rowIndex=-1}e.style.top=t*ie-pe+"px",e.className="qg-r"+(ye===t?" qg-r-active":"")}}function Ue(e){u.scrollTop=e,b.scrollTop=e}function Ze(){const e=Math.max(ee,M),t=Math.min(e+te,z);Tt(be,e,t,ee),Ht()}function Ve(e){return null===U[e]||void 0===U[e]||0===U[e].length}function qe(e,t){e.style.minWidth=t+"px",e.style.maxWidth=t+"px"}function $e(e,t){X&&clearTimeout(X),X=setTimeout((function(){!function(e,t){let n,r,a;if(function(){for(let e=0,t=U.length;e<t;e++)(e<Q||e>Y)&&U[e]&&delete U[e]}(),e!==t&&Ve(e)&&Ve(t))n=e*j,r=n+j*(t-e+1),a=function(n){U[e]=n.dataset.splice(0,j),U[t]=n.dataset,Ze()};else if(!Ve(e)||Ve(t)&&e!==t){if(Ve(e)&&e!==t||!Ve(t))return void Ze();n=t*j,r=n+j,a=function(e){U[t]=e.dataset,Ze()}}else n=e*j,r=n+j,a=function(t){U[e]=t.dataset,Ze()};d&&d(K,n+1,r,a)}(e,t)}),75)}function je(){return{t:Math.max(0,Math.floor(ce/ie)),b:Math.min(se/ie,Math.ceil((ce+oe)/ie))}}function Ge(e){const t=je();let n=t.t,r=t.b;0!==e&&function(e,t,n){if(t!=t||n!=n)return;let r,a,o,i;if(r=Math.floor(t/j),o=Math.floor(n/j),e>0){if(i=n%j,r>=Q&&o<Y)return;if(o===Y)return void(i>W&&(Y=o+1,Q=o,$e(o,o+1)));r<o?($e(r,o),Q=r,Y=o):i>W?($e(o,o+1),Q=o,Y=o+1):(Y=r,Q=r,$e(r,r))}else{if(a=t%j,r>Q&&o<=Y)return;if(r===Q)return void(a<G&&Q>0&&(Q=Math.max(0,r-1),Y=r,$e(r-1,r)));r<o?($e(r,o),Q=r,Y=o):a<G&&r>0?($e(r-1,r),Q=Math.max(0,r-1),Y=r):(Q=r,Y=r,$e(r,r))}}(e,n,r),0===n?r=q:r>le-2&&(n=Math.max(0,r-q));for(let e=n;e<r;e++){const t=be[e&$];if(t){const n=Math.min(z,Math.max(ee,M));He(t,e,n,Math.min(n+te,z)),He(P[e&$],e,0,Math.min(M,z))}}}function We(e){return O[e]}function Qe(e){return O[e+1]-O[e]}function Ye(e){const t=ze(e);if(t)switch(t.type){case"STRING":case"SYMBOL":case"VARCHAR":case"ARRAY":return!0;default:return!1}}function Ke(e){void 0===Se&&gn("header.click",{columnName:e.currentTarget.getAttribute("data-column-name")})}function Xe(){Ne&&(clearTimeout(Ne),Ne=void 0)}function Je(e,t){return xe+e-(t<M?0:u.scrollLeft)+"px"}function et(e){if(0===e.target.childNodes.length){e.preventDefault();const t=document.createElement("div");t.baguette=!0,yt(t,"qg-col-resize-hysteresis-enter"),e.target.append(t)}}function tt(e){e.preventDefault(),e.target.childNodes.length>0&&e.target.childNodes[0].remove()}function nt(e){e.preventDefault(),Xe();const t=e.target.baguette?e.target.parentElement:e.target;e.target.childNodes.length>0&&e.target.childNodes[0].remove(),Se=t.columnIndex,ke=We(Se),Te=Qe(Se);const n=t.parentElement;xe=n.offsetLeft+n.getBoundingClientRect().width,_e=e.clientX,document.onmousemove=rt,document.onmouseup=lt,R.style.top=0,R.style.left=Je(0,Se),R.style.height=c.getBoundingClientRect().height-(At()?Ce:0)+"px",R.style.visibility="visible",Me=Te}function rt(e){e.preventDefault();const t=e.clientX-_e,n=Te+t;n>r.minColumnWidth&&(R.style.left=Je(t,Se),Me=n)}function at(){window.localStorage.setItem(s,JSON.stringify(De))}function ot(){Oe&&clearTimeout(Oe),Oe=setTimeout(at,r.layoutStoreTimeout)}function it(){let e=De[Re];return void 0===e&&(e={key:Ie,deviants:{}},De[Re]=e),e}function lt(e){var t,n;e.preventDefault(),document.onmousemove=null,document.onmouseup=null,function(e,t){!function(e,t){let n=O[e]+t;for(let t=e+1;t<=z;t++){const e=Qe(t);O[t]=n,n+=e}Z=O[z]}(e,t),e<M&&(qe(E.childNodes[e],t),Tt(P,0,Math.min(M,z),ee),Vt(),sn()),qe(g.childNodes[e],t),Zt(),Tt(be,ee,ee+te,ee),Ht()}(Se,Me),R.style.visibility="hidden",R.style.left=0,Ne=setTimeout((()=>{Se=void 0}),500),t=ze(Se).name,n=Me,it().deviants[t]=n,ot()}function st(e){return Math.max(r.minColumnWidth,Math.ceil(e*r.cellWidthMultiplier))}function ct(e){k||(e.preventDefault(),x.style.left=h+"px",x.style.display="block",x.style.height=oe-(At()?Ce:0)+"px",_.style.height=x.style.height,N=e.offsetY-S.getBoundingClientRect().height/2,k=e.pageY,S.style.top=N+"px")}function dt(e){const t=e.relatedTarget;t===S||t===x||t===v||T||(e.preventDefault(),x.style.display="none",k=void 0)}function ut(e){const t=e.pageX-T,n=h+t;x.style.left=n+"px",C=M;let r=n;for(let e=0;e<z;e++){const t=Qe(e);if(r-=t,r<0){C=-r/t<.5?e+1:e;break}}C>M&&u.scrollLeft>0&&(C=M),_.style.left=We(C)+"px",_.style.display="block",gt(e)}function mt(){document.onmousemove=void 0,document.onmouseup=void 0,x.style.display="none",_.style.display="none",k=void 0,T=void 0,c.style.cursor=null,S.style.cursor=null,I.style.cursor=null,pn(C)}function pt(e){e.preventDefault(),T=e.pageX,document.onmousemove=ut,document.onmouseup=mt,c.style.cursor="grabbing",S.style.cursor="grabbing",I.style.cursor="grabbing"}function gt(e){if(k){e.preventDefault();const t=e.pageY-k;S.style.top=Math.min(oe-S.getBoundingClientRect().height-(At()?Ce:0),Math.max(0,N+t))+"px"}}function ft(e,t,n,r){for(let r=t,a=t+n;r<a;r++){const t=ze(r),n=document.createElement("div");yt(n,"qg-header"),qe(n,Qe(r)),n.setAttribute("data-column-name",t.name),Ye(r)&&yt(n,"qg-header-l");const a=document.createElement("span");if(yt(a,"qg-header-type"),"ARRAY"!==t.type)a.innerHTML=t.type.toLowerCase();else if(t.dim>2)a.innerHTML=t.type.toUpperCase()+"("+t.elemType.toUpperCase()+","+t.dim+")";else{let e=t.elemType.toLowerCase()+"[]";t.dim>1&&(e+="[]"),a.innerHTML=e}const o=document.createElement("span");yt(o,"qg-header-name"),o.innerHTML=t.name;const i=document.createElement("div");yt(i,"qg-col-resize-hysteresis"),i.columnIndex=r,i.onmousedown=nt,i.onmouseenter=et,i.onmouseleave=tt;const l=document.createElement("span");yt(l,"qg-header-border"),n.append(i,l),n.append(o,a),n.onclick=Ke,e.append(n)}if(r){const t=document.createElement("div");return t.className="qg-header qg-stub",t.style.width=Ce+"px",e.append(t),t}return null}function ht(){O=[],Z=0;for(let e=0;e<z;e++){const t=ze(e),n=st(t.name.length+t.type.length);O.push(Z),Z+=n}O.push(Z)}function bt(e,t){e.classList.remove(t)}function yt(e,t){e&&e.classList.add(t)}function Et(e){bt(e,a)}function wt(){fe&&fe.parentElement&&fe.parentElement.rowIndex===ye&&fe.columnIndex===Ee?yt(fe,a):fe&&bt(fe,a)}function Ct(e){!e||fe===e&&e.classList.contains(a)||(fe&&Et(fe),fe=e,Ee=e.columnIndex,wt())}function vt(e){return Wc(JSON.stringify(e,((e,t)=>Number.isInteger(t)?t.toString()+".0":t)).replace(/"/g,""))}function xt(e,t,n=null){const a="ARRAY"===e.type,o=["FLOAT","DOUBLE"],i=a?o.includes(e.elemType):o.includes(e.type);if(!a)return i&&Number.isInteger(t)?Wc(t.toString()+".0"):Wc(t.toString());const l=vt(t),s=n??.4*u.getBoundingClientRect().width,c=Math.ceil(s/r.cellWidthMultiplier),d=e.dim,m=c-(2*d+5),p=l.slice(d,-d);if(p.length>m){const t=p.slice(0,m);return"ARRAY"+"[".repeat(e.dim)+t+"..."+"]".repeat(e.dim)}return"ARRAY"+"[".repeat(e.dim)+p+"]".repeat(e.dim)}function _t(e,t,n){if(null!==n){const r=it().deviants[e.name]??null;t.innerHTML=xt(e,n,r),t.classList.remove("qg-null"),"ARRAY"===e.type&&t.classList.add("qg-arr")}else t.innerHTML="null",t.classList.add("qg-null")}function St(e,t,n){const r=e.childNodes[n%te];tn(r,n),_t(ze(n),r,t[B[n]])}function kt(e){return Math.max(M,e)}function Tt(e,t,n,r){if(e.length>0&&z>0&&t<n){we.colLo=t,we.colHi=n,we.nextVisColumnLo=r,we.render=!1;const a=je();let o=a.t,i=a.b;o-=o&$,i=i-(i&$)+q;for(let r=o;r<i;r++){const a=e[r&$];a.style.width=Z+"px";const o=Math.floor(r/j),i=r%j;let l,s;if(o<U.length&&(l=U[o])&&i<l.length&&(s=l[i]))for(let e=t;e<n;e++)St(a,s,e);else we.render=!0}ee=Math.max(0,Math.min(r,z-te)),rn()}}function Nt(e){const t=u.scrollLeft;u.scrollLeft=e,g.scrollLeft=e,t===u.scrollLeft&&wt()}function It(e){if(-1!==e){Ee=e;const t=Ee<M?w.childNodes[Ee]:ge.childNodes[Ee%te];t.columnIndex=Ee,Ct(t)}}function Rt(e){e===i&&ee>0&&z>te?Tt(be,M,te,0):e===l&&ee+te<z&&Tt(be,kt(z-te),z,z-te);const t=We(Ee),n=Qe(Ee);if(e!==o&&(Ee>=M||e===i)){const e=Math.max(0,t-h);if(e<u.scrollLeft)Nt(e);else if(e>u.scrollLeft){const e=t+n;e>u.scrollLeft+u.clientWidth&&Nt(e-u.clientWidth)}}It(Ee)}function Ot(e){if(ye>0){ye=Math.max(0,ye-e),Lt(),Ft(),Pt(),Rt(o);const t=ye*ie-pe-5;t<u.scrollTop&&Ue(Math.max(0,t))}}function At(){return u.scrollWidth>ae}function Mt(e){const t=e[ye&$];return t&&t.rowIndex===ye?t.className="qg-r qg-r-active":t&&(t.className="qg-r"),t}function Pt(){ge=Mt(be),w=Mt(P)}function Lt(){ge&&(ge.className="qg-r"),w&&(w.className="qg-r")}function Dt(e){if(ye>-1&&ye<le-1){ye=Math.min(le-1,ye+e),Lt(),Ft(),Pt(),Rt(o);const t=Math.min(ye*ie+ie-pe,u.scrollHeight)-oe,n=At()?Ce:0;t>u.scrollTop&&Ue(t+n)}}function Bt(){const e=ne+re,t=ne,n=u.scrollLeft,r=u.getBoundingClientRect().width;if(O)if(n+r>e){let t=-1,r=ne;for(let e=ee,a=te+ee;e<a;e++)if(r+=Qe(e),r>n){t=e;break}if(t>ee)Tt(be,kt(te+ee),Math.min(te+t,z),t);else if(-1===t){let t=e,r=te+ee;for(;t<n;)t+=Qe(++r);Tt(be,kt(r),Math.min(te+r,z),r)}}else if(t>n){let e=ee,t=ne;for(;t>n&&e>0;)t-=Qe(--e);const r=Math.min(te,ee-e);Tt(be,kt(e),Math.min(r+e,z),e)}}function zt(){Pe||(yt(c,"qg-hover"),Pe=!0)}function Ft(){Pe&&(bt(c,"qg-hover"),Pe=!1)}function Ht(e){const t=u.scrollLeft,n=u.scrollTop;if(g.scrollLeft!==t&&(g.scrollLeft=t),M>0&&(t>0?yt(f,"qg-panel-scrolled-left"):bt(f,"qg-panel-scrolled-left")),n>0?(yt(g,"qg-panel-scrolled-top"),yt(E,"qg-panel-scrolled-top")):(bt(g,"qg-panel-scrolled-top"),bt(E,"qg-panel-scrolled-top")),Bt(),n!==ue||!e){const e=ce;n>=de-oe?(ce=Math.max(0,se-oe),ue=n,pe=Math.max(0,ce-ue),Dt(le-ye)):(0===n&&ue>0?(ce=0,pe=0,Ot(ye)):ce+=n-ue,ue=n),Ge(ce-e)}qt(),wt()}function Ut(){const e=u.getBoundingClientRect().width;if(V=0===e,!V)if(Z<e)te=z,ee=0,rn();else{let t=0,n=0,r=0,a=0;for(;n<z;){const o=Qe(n);r+o>e?(a<n-t+1&&(a=n-t+1),r-=Qe(t),t++):(r+=o,n++)}a=Math.max(a,n-t+1),te=Math.min(a,z);const o=ee+te-z;o>0&&ee>=o&&(ee-=o,rn())}}function Zt(){ve&&(At()&&Math.abs(u.scrollHeight-u.getBoundingClientRect().height)>.8?bt(ve,"qg-stub-transparent"):yt(ve,"qg-stub-transparent"));const e=te;Ut(),e<te?function(e){for(let t=0,n=be.length;t<n;t++){const n=be[t];for(let t=0;t<e;t++){const e=document.createElement("div");e.className="qg-c",n.append(e)}for(let e=0;e<te;e++)tn(n.childNodes[e],ee+e)}Tt(be,kt(ee),ee+te,ee)}(te-e):e>te&&function(e){for(let t=0,n=be.length;t<n;t++){const n=be[t];for(let t=te;t<e;t++)n.childNodes[te].remove()}Tt(be,kt(ee),ee+te,ee)}(e)}function Vt(){let e=0;const t=Math.min(M,z);for(let n=0;n<t;n++)e+=Qe(n);h=e}function qt(){const e=u.clientHeight+g.clientHeight;f.style.height=e+"px",b.style.height=u.clientHeight+"px",b.scrollTop=u.scrollTop}function $t(){u.scrollTop=b.scrollTop}function jt(){if(0===U.length||0===U[Q].length)return Bt(),void Ge(0);if(Le&&(Le=!1,function(){an();for(let e=0;e<M;e++)qe(E.childNodes[e],Qe(e));for(let e=0,t=z-M;e<t;e++)qe(g.childNodes[e],Qe(e+M))}()),V&&(ln(),cn()),qt(),"none"!==c.style.display){oe=Math.max(u.getBoundingClientRect().height,r.minVpHeight),he=Math.floor(oe/ie);const e=u.getBoundingClientRect().width;ae!==e&&(ae=e,Zt()),Ht()}}function Gt(){Lt(),this.focus(),ye=this.parentElement.rowIndex,Pt(),Ct(this)}function Wt(e){e.preventDefault();const t=e.target;if(t&&!T){const e=t.parentElement.rowIndex&$;yt(be[e],"qg-r-hover"),yt(P[e],"qg-r-hover")}}function Qt(e){e.preventDefault();const t=e.target;if(t&&!T){const e=t.parentElement.rowIndex&$;bt(be[e],"qg-r-hover"),bt(P[e],"qg-r-hover")}}function Yt(){fe&&Et(fe)}function Kt(e){delete J["which"in e?e.which:e.keyCode]}function Xt(){De[Re]=void 0,ot(),mn(0),E.innerHTML="",un(),on(),F=H,g.innerHTML="",ht(),an(!0),h=0,ve=ft(g,0,z,!0),Zt(),Vt(),sn(),Tt(be,kt(ee),ee+te,ee),Tt(P,0,M,ee),u.scrollLeft=0}function Jt(){return J[17]||J[91]||J[224]}function en(e){const t="which"in e?e.which:e.keyCode;let n=!0;switch(t){case 33:Ot(he);break;case 38:J[91]?Ot(ye):Ot(1);break;case 40:J[91]?Dt(le-ye):Dt(1);break;case 34:Dt(he);break;case 39:Ee>-1&&Ee<z-1&&(Ft(),Ee++,Rt(2));break;case 37:Ee>0&&(Ft(),Ee--,Rt(1));break;case 35:J[17]?Dt(le-ye):Ee>-1&&Ee!==z-1&&(Ft(),Ee=z-1,Rt(l));break;case 36:J[17]?Ot(ye):(Ee>0||u.scrollLeft>0)&&(Ft(),Ee=0,Rt(i));break;case 113:Yt(),gn("yield.focus");break;case 67:case 45:Jt()&&function(){if(fe){Ae&&clearTimeout(Ae),yt(fe,"qg-c-active-pulse");let e=fe.innerHTML;if(fe.classList.contains("qg-arr")){const t=fe.parentElement.rowIndex,n=fe.columnIndex,r=Math.floor(t/j),a=t%j;if(U[r]&&U[r][a]){const t=U[r][a][B[n]];e=null===t?"null":"ARRAY"+vt(t)}}p(e).then(void 0),Ae=setTimeout((()=>{bt(fe,"qg-c-active-pulse")}),1e3)}}();break;case 66:Jt()&&Xt();break;case 191:Fe();break;default:J[t]=!0,n=!1}n&&e.preventDefault()}function tn(e,t){const n=We(t);e.style.left=n+"px",e.style.width=We(t+1)-n+"px",e.style.height=r.rowHeight+"px",e.style.textAlign=Ye(t)?"left":"right",e.onclick=Gt,e.onmouseenter=Wt,e.onmouseleave=Qt,e.classList.contains("qg-timestamp")&&bt(e,"qg-timestamp"),e.columnIndex===z-1&&bt(e,"qg-last-col"),e.columnIndex=t,t===F&&yt(e,"qg-timestamp"),e.columnIndex===z-1&&yt(e,"qg-last-col")}function nn(e,t,n,r){for(let a=0;a<q;a++){const o=document.createElement("div");o.className="qg-r",o.tabIndex=a+a;for(let e=0;e<n;e++){const t=document.createElement("div");t.className="qg-c",tn(t,e),o.append(t),0===a&&0===e&&Ct(t)}o.style.top="-100",o.style.height=ie.toString()+"px",o.style.width=r+"px",t.push(o),e.append(o)}}function rn(){if(V)return;let e=0;for(let t=0;t<ee;t++)e+=Qe(t);let t=0;for(let e=ee,n=ee+te;e<n;e++)t+=Qe(e);ne=e,re=t}function an(e=!1){if(e)return O=[...L],void(Z=O[z]);const t=.8*u.getBoundingClientRect().width;if(Le=t<.1,!Le&&U&&U.length>0){const e=De[Re],n=void 0!==e?e.deviants:void 0,r=U[0],a=r.length;mn(void 0!==e?e.freezeLeft:0);let o=0;for(let e=0;e<z;e++){let i;if(n&&(i=n[ze(e).name]),void 0===i){i=Qe(e);for(let n=0;n<a;n++){O[e]=o;const a=r[n][e];let l;l=null===a?"null":"ARRAY"===ze(e).type?xt(ze(e),a):a.toString(),i=Math.min(t,Math.max(i,st(l.length)))}}else O[e]=o;o+=i}O[z]=o,Z=o}}function on(){B=[];for(let e=0;e<z;e++)B.push(e)}function ln(){Ut(),rn()}function sn(){f.style.width=h+"px"}function cn(){if(V)return;const e=De[Re];e&&e.columnPositions&&(B=e.columnPositions,F=e.timestampIndex),L=function(){const e=.8*u.getBoundingClientRect().width,t=Array(z+1).fill(0);let n=0;if(U&&U.length>0){const r=U[0];for(let a=0;a<z;a++){let o=Qe(a);for(let t=0;t<(r?.length??0);t++){const n=r[t][a];let i;i=null===n?"null":Array.isArray(n)?xt(ze(a),n):n.toString(),o=Math.min(e,Math.max(o,st(i.length)))}t[a]=n,n+=o}return t[z]=n,t}}(),an(),Vt(),ve=ft(g,0,z,!0),M>0?(ft(E,0,Math.min(M,z),!1),dn()):un(),sn(),nn(m,be,te,Z),nn(y,P,Math.min(M,z),h),function(){le=A,se=le*ie,de=se<r.yMaxThreshold?se:r.yMaxThreshold,me=se/de;const e=(0===de?1:de)+"px";m.style.height=e,y.style.height=e}(),Ue(0),jt(),Be?(ye=0,ge=be[ye],w=P[ye],It(0),ge.focus()):Be=!0,Pt()}function dn(){f.style.display="block",I.style.display="none",b.scrollTop=u.scrollTop}function un(){f.style.display="none",I.style.display="block";for(let e=0,t=P.length;e<t;e++)P[e].innerHTML=""}function mn(e){M=void 0!==e?e:0,gn("freeze.state",{freezeLeft:M})}function pn(e){if(void 0!==e&&e!==M){if(e<M){for(let t=0,n=P.length;t<n;t++){const n=P[t];for(let t=e;t<M;t++)n.childNodes[e].remove()}for(let t=e;t<M;t++)E.childNodes[e].remove();0===e&&un()}else{for(let t=0,n=P.length;t<n;t++){const n=P[t];for(let t=M;t<e;t++){const e=document.createElement("div");e.className="qg-c",tn(e,t),n.append(e)}}ft(E,M,e-M,!1),dn()}mn(e),it().freezeLeft=M,ot(),Tt(P,0,Math.min(M,z),ee),Vt(),sn(),Tt(be,kt(ee),ee+te,ee)}}function gn(e,t){c.dispatchEvent(new CustomEvent(e,{detail:t}))}return function(){g=document.createElement("div"),yt(g,"qg-header-row"),u=document.createElement("div"),u.onscroll=Ht,yt(u,"qg-viewport"),m=document.createElement("div"),m.className="qg-canvas",m.onkeydown=en,m.onkeyup=Kt,document.addEventListener("click",(e=>{c.contains(e.target)||(Yt(),Lt(),ye=-1,Ee=-1)})),R=document.createElement("div"),R.className="qg-col-resize-ghost",u.append(m,R),f=document.createElement("div"),yt(f,"qg-panel-left"),E=document.createElement("div"),yt(E,"qg-header-left-row"),b=document.createElement("div"),b.onscroll=$t,yt(b,"qg-viewport-left"),y=document.createElement("div"),y.className="qg-canvas",y.onkeydown=en,y.onkeyup=Kt,b.append(y),v=document.createElement("div"),yt(v,"qg-panel-left-hysteresis"),v.onmouseenter=ct,v.onmouseleave=dt,v.onmousemove=gt,v.onmousedown=pt,x=document.createElement("div"),yt(x,"qg-panel-left-ghost"),x.onmousemove=gt,x.onmouseleave=dt,S=document.createElement("div"),yt(S,"qg-panel-left-ghost-handle"),S.onmouseleave=dt,S.onmousedown=pt,x.append(S),f.append(E,b,v),_=document.createElement("div"),yt(_,"qg-panel-left-snap-ghost"),I=document.createElement("div"),yt(I,"qg-panel-left-initial-hysteresis"),I.onmouseenter=ct,I.onmouseleave=dt,I.onmousemove=gt,I.onmousedown=pt,c.append(g,u,f,x,_,I),c.onmousemove=zt,c.style.position="relative";const e=window.localStorage.getItem(s);e&&(De=JSON.parse(e)),new ResizeObserver((function(){c.getBoundingClientRect().height>0&&c.getBoundingClientRect().width>0&&jt()})).observe(c)}(),jt(),{clearCustomLayout:function(){Xt()},shuffleFocusedColumnToFront:function(){Fe()},toggleFreezeLeft:function(){pn(M>0?0:1),It(Ee)},getResultAsMarkdown:function(){return"QUERY PLAN\nstring"===g.innerText?function(){let e=["```"];return be.forEach((t=>{if("flex"===t.style.display){const n=t.querySelector(".qg-c");n&&e.push(n.textContent)}})),e.push("```"),e.join("\n")}():function(){let e=g.innerText.split(/\n/).filter(((e,t)=>t%2==0)),t=Array(e.length).fill(0);for(const[n,r]of e.entries())t[n]=Math.max(t[n],r.length);for(const e of be){let n=e.innerText.split(/\n/);for(const[e,r]of n.entries())t[e]=Math.max(t[e],r.length)}let n=["|"];for(const[r,a]of e.entries())n.push(a.padEnd(t[r])),n.push("|");let r=n.join(" "),a=["|"];for(const[n,r]of e.entries())a.push("-".repeat(t[n])),a.push("|");let o=a.join(" "),i=[];for(const e of be){let n=e.innerText.split(/\n/);if(1===n.length&&""===n[0])continue;let r=["|"];for(const[e,a]of n.entries())r.push(a.padEnd(t[e])),r.push("|");i.push(r.join(" "))}return[r,o,i.join("\n")].join("\n")}()},show:function(){c.style.display="flex",jt()},hide:function(){c.style.display="none"},focus:function(){fe&&ge&&(Ct(fe),ge.focus())},setData:function(e){!function(e){Be=!1,setTimeout((()=>{(function(e){ue=0,ce=0,pe=0,le=0,g.innerHTML="",E.innerHTML="",m.innerHTML="",y.innerHTML="",be=[],P=[],U=[],L=[],K=null,Q=0,Y=0,J=[],z=0,A=0,ge=null,w=null,fe=null,Ee=-1,ee=0,te=10,ae=0,F=-1,H=-1,ye=-1,Le=!1,Se=void 0,Xe(),Ie=void 0,Re=void 0,h=0,V=!1,mn(0),zt(),K=e.query,U.push(e.dataset),D=e.columns,z=D.length,on(),H=e.timestamp,F=H,A=e.count,ht(),ln()})(e),function(e){const t=[];for(let e=0;e<z;e++){const n=ze(e);t.push({name:n.name,type:n.type})}Ie=JSON.stringify(t),Re=(e=>{let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return new Uint32Array([t])[0].toString(36)})(Ie),e()}(cn)}),0)}(e)},getSQL:function(){return K},render:function(){jt()},addEventListener:function(e,t){!function(e,t,n){{const n=e=>{t.call(c,e)};c.addEventListener(e,n)}}(e,t)}}}n(60985),n(91499),n(21287),n(50591);var Yc=n(99400),Kc=n(91074),Xc=n(37579),Jc=n(28670),ed=n.n(Jc);const td="#eee",nd=function(){return{axisLine:{lineStyle:{color:td}},axisTick:{lineStyle:{color:td}},axisLabel:{textStyle:{color:td}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:td}}}},rd=["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],ad={color:rd,backgroundColor:"#282a36",tooltip:{axisPointer:{lineStyle:{color:td},crossStyle:{color:td}}},legend:{textStyle:{color:td}},textStyle:{color:td},title:{textStyle:{color:td}},toolbox:{iconStyle:{normal:{borderColor:td}}},dataZoom:{textStyle:{color:td}},timeline:{lineStyle:{color:td},itemStyle:{normal:{color:rd[1]}},label:{normal:{textStyle:{color:td}}},controlStyle:{normal:{color:td,borderColor:td}}},timeAxis:nd(),logAxis:nd(),valueAxis:nd(),categoryAxis:nd(),line:{symbol:"circle"},graph:{color:rd},gauge:{title:{textStyle:{color:td}}},candlestick:{itemStyle:{normal:{color:"#FD1050",color0:"#0CF49B",borderColor:"#FD1050",borderColor0:"#0CF49B"}}},textStyle:{fontFamily:'"Open Sans", -apple-system, BlinkMacSystemFont, Helvetica, Roboto, sans-serif'}};var od=n(94349);Yc.D$([Kc.N,Xc.N]);const id=s.ZP.div.withConfig({displayName:"Result__Root"})(["\n  display: flex;\n  flex: 1;\n  width: 100%;\n"]),ld=(0,s.ZP)(lt).withConfig({displayName:"Result__Wrapper"})(["\n  overflow: hidden;\n"]),sd=(0,s.ZP)(it).withConfig({displayName:"Result__Content"})(["\n  flex: 1 1 0;\n  color: ",";\n\n  *::selection {\n    background: ",";\n    color: ",";\n  }\n"],D("foreground"),D("red"),D("foreground")),cd=s.ZP.div.withConfig({displayName:"Result__Actions"})(["\n  display: grid;\n  grid-auto-flow: column;\n  grid-auto-columns: max-content;\n  gap: 0;\n  align-items: center;\n  justify-content: flex-end;\n  padding: 0 1rem;\n  width: 100%;\n  height: 4.5rem;\n  border-bottom: 2px solid ",";\n  background: ",";\n"],(({theme:e})=>e.color.backgroundDarker),(({theme:e})=>e.color.backgroundLighter)),dd=(0,s.ZP)($c.L).withConfig({displayName:"Result__TableFreezeColumnIcon"})(["\n  transform: scaleX(-1);\n"]),ud=(0,s.ZP)(Pe).withConfig({displayName:"Result__RowCount"})(["\n  margin-right: 1rem;\n"]),md=({viewMode:e})=>{const{quest:t}=(0,r.useContext)(Jr),[n,a]=(0,r.useState)(),i=(0,o.v9)(Tn.query.getResult),l=(0,o.v9)(Tn.console.getActiveSidebar),s=(0,r.useRef)(),[c,d]=(0,r.useState)(0),u=(0,o.I0)();(0,r.useEffect)((()=>{const e=Qc(document.getElementById("grid"),(async function(e,n,a,o){try{const r=await t.queryRaw(e,{limit:`${n},${a}`,nm:!0});r.type===T.DQL&&o(r)}catch(t){u(Gt({query:`${e}@100000-100000`,content:r.createElement(Pe,{color:"red"},t.error),sideContent:r.createElement(pi,{query:e}),type:Zt.ERROR,updateActiveNotification:!0})),u(Xt())}}));s.current=e,function(e,t,n){let r=e;const a=Uc()("#_qvis_frm_draw");let o,i,l,s,c,d,u;const m=new Set,p={title:{},tooltip:{},legend:{data:["Series"]},xAxis:{data:[]},yAxis:{},series:[{name:"Y-axis",type:"bar",data:[]}]};let g,f,h=!1;const b=new(ed())({select:"#_qvis_frm_chart_type"}),y=new(ed())({select:"#_qvis_frm_axis_x"}),E=new(ed())({select:"#_qvis_frm_axis_y"});function w(){i.resize()}function C(){a.html('<i class="icon icon-play"></i><span>Draw</span>'),a.removeClass("js-chart-cancel").addClass("js-chart-draw")}function v(e){try{let t;const n=e.columns,r=e.dataset;if(n&&r){const e=new Map;for(t=0;t<n.length;t++)e.set(n[t].name,t);let a;if(null!=c){let n=e.get(c);const o=[];for(t=0;t<r.length;t++)o[t]=r[t][n];a={type:"category",name:c,data:o}}else a={};let o=[];if(d.length>0)for(t=0;t<d.length;t++){const n=e.get(d[t]);if(n){let e=[];for(let t=0;t<r.length;t++)e[t]=r[t][n];o[t]="area"===u?{type:"line",name:d[t],data:e,areaStyle:{},smooth:!0,symbol:"none"}:{name:d[t],type:u,data:e,large:!0}}}const l={tooltip:{trigger:"axis",axisPointer:{label:{show:!1}}},legend:{},xAxis:a,yAxis:{type:"value"},series:o};i.setOption(l,!0)}}finally{w(),C()}}async function x(){a.html('<i class="icon icon-stop"></i><span>Cancel</span>'),a.removeClass("js-chart-draw").addClass("js-chart-cancel"),h=!0,u=b.selected();const e=y.selected(),t=E.selected();if((0,od.arrayEquals)(e,c)&&(0,od.arrayEquals)(t,d)&&l===f)v(g);else{m.clear(),c=y.selected(),c&&m.add(c),d=E.selected(),function(e,t){for(let n=0;n<e.length;n++)t.add(e[n])}(E.selected(),m);let e="";m.forEach((function(t){""!==e&&(e+=","),e+=JSON.stringify(t)})),s=(new Date).getTime();const t=await n.queryRaw(l,{count:!1,timings:!1,cols:e,src:"vis"});t.type===T.DQL?(r=t,h=!1,O.publish(A.MSG_QUERY_OK,{delta:(new Date).getTime()-s,count:r.count}),g=r,f=l,v(r)):function(e){h=!1,C(),O.publish(A.MSG_QUERY_ERROR,{query:f,r:e.responseJSON,status:e.status,statusText:e.statusText,delta:(new Date).getTime()-s})}(t),O.publish(A.MSG_QUERY_RUNNING)}var r}function _(){i.setOption(p,!0)}o=r.find(".quick-vis-canvas")[0],Uc()(window).resize(w),O.subscribe(A.MSG_ACTIVE_SIDEBAR,w),i=Yc.S1(o,ad),O.subscribe(A.MSG_QUERY_DATASET,(function(e){let t=[];const n=e.columns;for(let e=0;e<n.length;e++)t[e]={text:n[e].name,value:n[e].name};y.setData(t),E.setData(t),E.set(t.slice(1).map((e=>e.text))),l=e.query,_()})),a.click((function(){return h?n.abort():x(),x(),!1})),_(),w()}(Uc()("#quick-vis"),window.bus,t),e.addEventListener("header.click",(function(e){O.publish(A.MSG_EDITOR_INSERT_COLUMN,e.detail.columnName)})),e.addEventListener("yield.focus",(function(){O.publish(A.MSG_EDITOR_FOCUS)})),e.addEventListener("freeze.state",(function(e){d(e.detail.freezeLeft)}))}),[]),(0,r.useEffect)((()=>{i?.type===T.DQL&&(a(i.count),s?.current?.setData(i))}),[i]),(0,r.useEffect)((()=>{const t=document.getElementById("grid"),n=document.getElementById("quick-vis");t&&n&&("grid"===e?(n.style.display="none",s?.current?.show()):(s?.current?.hide(),n.style.display="flex"))}),[e]),(0,r.useEffect)((()=>{s?.current?.render()}),[l]);const[m,g]=(0,r.useState)(!1),f=[{tooltipText:"Copy result to Markdown",trigger:r.createElement(yt,{onClick:()=>{p(s?.current?.getResultAsMarkdown()).then((()=>{g(!0),setTimeout((()=>g(!1)),1e3)}))}},m?r.createElement(Gc.J,{size:"18px"}):r.createElement(jc.U,{size:"18px"}))},{tooltipText:"Freeze left column",trigger:r.createElement(yt,{onClick:()=>{s?.current?.toggleFreezeLeft(),s?.current?.focus()},selected:c>0},r.createElement(dd,{size:"18px"}))},{tooltipText:"Move selected column to the front",trigger:r.createElement(Vn.z,{skin:"transparent",onClick:s?.current?.shuffleFocusedColumnToFront},r.createElement(qc.W,{size:"18px"}))},{tooltipText:"Reset grid layout",trigger:r.createElement(Vn.z,{skin:"transparent",onClick:s?.current?.clearCustomLayout},r.createElement(Vc.A,{size:"18px"}))},{tooltipText:"Refresh",trigger:r.createElement(Vn.z,{skin:"transparent",onClick:()=>{const e=s?.current?.getSQL();e&&O.publish(A.MSG_QUERY_EXEC,{q:e})}},r.createElement(Or.h,{size:"18px"}))}];return(0,r.useEffect)((()=>{i?.type===T.DQL&&a(i.count)}),[i]),r.createElement(id,null,r.createElement(ld,null,r.createElement(cd,null,n&&r.createElement(ud,{color:"foreground"},`${n.toLocaleString()} row${n>1?"s":""}`),"grid"===e&&f.map(((e,t)=>r.createElement(dt,{key:t,delay:350,placement:"bottom",trigger:e.trigger},r.createElement(xt,null,e.tooltipText)))),r.createElement(dt,{delay:350,placement:"bottom",trigger:r.createElement(Vn.z,{skin:"transparent",onClick:()=>{const e=s?.current?.getSQL();e&&t.exportQueryToCsv(e)}},r.createElement(Zc.Q,{size:"18px"}))},r.createElement(xt,null,"Download result as a CSV file"))),r.createElement(sd,null,r.createElement("div",{id:"grid"}),r.createElement("div",{id:"quick-vis"},r.createElement("div",{className:"quick-vis-controls"},r.createElement("form",{className:"v-fit",role:"form"},r.createElement("div",{className:"form-group"},r.createElement("label",null,"Chart type"),r.createElement("select",{id:"_qvis_frm_chart_type"},r.createElement("option",null,"bar"),r.createElement("option",null,"line"),r.createElement("option",null,"area"))),r.createElement("div",{className:"form-group"},r.createElement("label",null,"Labels"),r.createElement("select",{id:"_qvis_frm_axis_x","data-hook":"chart-panel-labels-select"})),r.createElement("div",{className:"form-group"},r.createElement("label",null,"Series"),r.createElement("select",{id:"_qvis_frm_axis_y","data-hook":"chart-panel-series-select",multiple:!0})),r.createElement("button",{className:"button-primary js-chart-draw",id:"_qvis_frm_draw","data-hook":"chart-panel-draw-button"},r.createElement("i",{className:"icon icon-play"}),r.createElement("span",null,"Draw")))),r.createElement("div",{className:"quick-vis-canvas"})))))};var pd=n(83332);const gd=(0,r.createContext)({query:"",setQuery:()=>{},selectOpen:!1,setSelectOpen:()=>{},selectedTables:[],setSelectedTables:()=>{},handleSelectToggle:()=>{},selectedTablesMap:new Map,focusedIndex:null,setFocusedIndex:()=>{}}),fd=()=>{const e=(0,r.useContext)(gd);if(!e)throw new Error("useSchema must be used within SchemaProvider");return e},hd=({children:e})=>{const[t,n]=(0,r.useState)(""),[a,o]=(0,r.useState)(!1),[i,l]=(0,r.useState)([]),[s,c]=(0,r.useState)(null),d=(0,r.useMemo)((()=>new Map(i.map((e=>[`${e.name}-${e.type}`,e])))),[i]);return r.createElement(gd.Provider,{value:{query:t,setQuery:n,selectOpen:a,setSelectOpen:e=>{o(e),e||l([])},selectedTables:i,setSelectedTables:l,handleSelectToggle:({name:e,type:t})=>{const n=`${e}-${t}`;d.has(n)?l(i.filter((e=>`${e.name}-${e.type}`!==n))):l([...i,{name:e,type:t}])},selectedTablesMap:d,focusedIndex:s,setFocusedIndex:c}},e)},bd=(0,s.ZP)(Zn.x).attrs({justifyContent:"space-between",gap:"1rem",alignItems:"center"}).withConfig({displayName:"toolbar__Root"})(["\n  width: 100%;\n  padding-right: 2rem;\n"]),yd=s.ZP.div.withConfig({displayName:"toolbar__Filter"})(["\n  position: relative;\n  display: flex;\n  width: 100%;\n"]),Ed=(0,s.ZP)(xe.x).withConfig({displayName:"toolbar__CloseIcon"})(["\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  right: 0.5rem;\n"]),wd=(0,s.ZP)(Jn.I).withConfig({displayName:"toolbar__StyledInput"})(["\n  padding-left: 0.75rem;\n  padding-right: 3.5rem;\n  width: 100%;\n\n  &::placeholder {\n    color: ",";\n  }\n\n  &::selection {\n    background: rgba(255, 255, 255, 0.3);\n    color: inherit;\n  }\n"],(({theme:e})=>e.color.gray2)),Cd=(0,s.ZP)(Vn.z).withConfig({displayName:"toolbar__StyledButton"})(["\n  &:disabled {\n    border: none;\n  }\n"]),vd=(0,s.ZP)(Zn.x).attrs({gap:"0.5rem"}).withConfig({displayName:"toolbar__Error"})(["\n  &,\n  button {\n    color: ",";\n    cursor: ",";\n  }\n"],(({theme:e,suspendedTablesCount:t})=>e.color[t>0?"red":"gray1"]),(({suspendedTablesCount:e})=>e>0?"pointer":"default")),xd=({suspendedTablesCount:e,filterSuspendedOnly:t,setFilterSuspendedOnly:n})=>{const{setQuery:a}=fd(),{leftPanelState:o,updateLeftPanelState:i}=Za(),l=r.useRef(null);return r.createElement(bd,null,r.createElement(yd,null,l.current?.value&&r.createElement(Ed,{size:"20px",onClick:()=>{a(""),l.current?.value&&(l.current.value="")},"data-hook":"schema-search-clear-button"}),r.createElement(wd,{ref:l,name:"table_filter",placeholder:"Filter...",onChange:e=>a(e.target.value),onKeyDown:e=>{"Escape"===e.key&&(l.current?.value&&l.current.value.length>0?(a(""),l.current.value=""):i({type:null,width:o.width}))}})),e>0&&r.createElement(vd,{suspendedTablesCount:e},r.createElement(dt,{placement:"bottom",trigger:r.createElement(Cd,{skin:"transparent",onClick:()=>n(!t),prefixIcon:r.createElement(ts.j,{size:"18px"}),"data-hook":"schema-filter-suspended-button"},r.createElement("span",null,e))},r.createElement(xt,null,"Show suspended tables"))))};var _d=n(2590),Sd=n(75013),kd=n(82885);const Td=s.ZP.div.withConfig({displayName:"LoadingError__Wrapper"})(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  width: 100%;\n  height: 100%;\n"]),Nd=(0,s.ZP)(kd.N).withConfig({displayName:"LoadingError__CloudOffIcon"})(["\n  height: 3rem;\n"]),Id=(0,s.ZP)(Pe).withConfig({displayName:"LoadingError__ErrorTextLine"})(["\n  margin-top: 1rem;\n"]),Rd=({error:e})=>r.createElement(Td,null,r.createElement(Nd,null),r.createElement(Id,{color:"white"},"Cannot load tables"),e&&r.createElement(Id,{color:"gray2",size:"sm"},e.error));var Od=n(4583),Ad=n(87737),Md=n(12619),Pd=n(31704),Ld=n(75134),Dd=n(19663),Bd=n(75910),zd=n(26213),Fd=n(4021),Hd=n(45167),Ud=n(96977),Zd=n(4637);const Vd=s.ZP.div.withConfig({displayName:"table-icon__Root"})(["\n  display: flex;\n  align-items: center;\n  width: ",";\n  height: ",";\n  position: relative;\n  flex-shrink: 0;\n  svg {\n    color: ",";\n  }\n"],"1.4rem","1.4rem",D("cyan")),qd=s.ZP.span.withConfig({displayName:"table-icon__Asterisk"})(["\n  position: absolute;\n  top: -0.6rem;\n  right: -0.3rem;\n  font-size: 1rem;\n  line-height: 1.8rem;\n  color: ",";\n"],D("orange")),$d=({height:e="14px",width:t="14px"})=>r.createElement("svg",{viewBox:"0 0 24 24",height:e,width:t,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M3 3h18a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zM4 8h16V5H4v3zM4 10h16v9H4v-9z",fillRule:"evenodd",clipRule:"evenodd"})),jd=({height:e="14px",width:t="14px"})=>r.createElement("svg",{viewBox:"0 0 28 28",height:e,width:t,xmlns:"http://www.w3.org/2000/svg"},r.createElement("g",{stroke:"currentColor",strokeWidth:"2",fill:"none",transform:"translate(-2, -2)"},r.createElement("line",{x1:"3",y1:"4",x2:"22",y2:"4"}),r.createElement("line",{x1:"4",y1:"4",x2:"4",y2:"22"}),r.createElement("line",{x1:"21",y1:"4",x2:"21",y2:"11"}),r.createElement("line",{x1:"4",y1:"21",x2:"11",y2:"21"})),r.createElement("g",{transform:"translate(6,6)",fill:"currentColor"},r.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),r.createElement("path",{d:"M4 8h16V5H4v3zm10 11v-9h-4v9h4zm2 0h4v-9h-4v9zm-8 0v-9H4v9h4zM3 3h18a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"}))),Gd=({walEnabled:e,partitionBy:t,designatedTimestamp:n,isMaterializedView:a})=>{const o=t&&"NONE"!==t,i=o?`Partitioned by "${t.toLowerCase()}"`:"Unpartitioned",l=n?`ordered on "${n}" column`:"unordered",s=`${e?"WAL-based table":"Legacy table format"}. ${i}, ${l}.`,c=e?"WAL-based tables are the current and most up-to-date table format. This format supports advanced data recovery, replication and high-throughput ingestion. This is the recommended format if your table contains time-series data that has a designated timestamp.":"Legacy table format, without WAL (write-ahead-log). This table format should only be used when table does not have timestamp column and generally not a time series. These tables are not replicated and could be slower to ingress data into.";return a?r.createElement(dt,{trigger:r.createElement(Vd,{"data-hook":"table-icon"},r.createElement(jd,{height:"14px",width:"14px"})),delay:1e3,placement:"bottom"},r.createElement(xt,null,i,", ",l,".")):r.createElement(dt,{trigger:r.createElement(Vd,{"data-hook":"table-icon"},!e&&r.createElement(qd,null,"*"),o?r.createElement(ys.i,{size:"14px"}):r.createElement($d,{height:"14px"})),delay:1e3,placement:"bottom"},r.createElement(xt,null,s,r.createElement("br",null),r.createElement("br",null),c))};function Wd(){return Wd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wd.apply(this,arguments)}const Qd=(0,s.ZP)(Zn.x).attrs({align:"center",justifyContent:"center"}).withConfig({displayName:"checkbox__Root"})(["\n  width: 16px;\n  height: 16px;\n  flex-shrink: 0;\n  opacity: ",";\n  transition: opacity 275ms ease-in-out;\n  pointer-events: ",";\n"],(({$visible:e})=>e?1:0),(({$visible:e})=>e?"auto":"none")),Yd=s.ZP.div.withConfig({displayName:"checkbox__Unchecked"})(["\n  width: 14px;\n  height: 14px;\n  border-radius: 50%;\n  border: 1px solid ",";\n  cursor: pointer;\n"],D("gray2")),Kd=({visible:e,checked:t,onClick:n})=>r.createElement(Qd,Wd({},n?{onClick:n}:{},{$visible:e}),t?r.createElement(li.e,{size:"16px"}):r.createElement(Yd,null)),Xd="yyyy-MM-ddTHH:mm:ss.SSSUUUz",Jd=5e5,eu=e=>e.startsWith("GEOHASH"),tu=/^[a-z][a-z0-9]*(\[\])+$/i,nu=e=>["TIMESTAMP","TIMESTAMP_NS"].includes(e),ru=e=>"TIMESTAMP_NS"===e?"yyyy-MM-ddTHH:mm:ss.SSSUUUNNNz":Xd,au=e=>{const t=/\(([^)]+)\)/g.exec(e);return t&&t.length>1?t[1]:""},ou=e=>eu(e)?"GEOHASH":(e=>tu.test(e))(e)?"ARRAY":e.toUpperCase(),iu=e=>"GEOHASH"===e.type?{...e,type:`GEOHASH(${e.precision})`}:e,lu=()=>("00000000000000000"+(0x10000000000000000*Math.random()).toString(16)).slice(-16),su=()=>{const e=lu(),t=lu();return e.slice(0,8)+"-"+e.slice(8,12)+"-4"+e.slice(13)+"-a"+t.slice(1,4)+"-"+t.slice(4)},cu="questdb:expanded:",du=`${cu}tables`,uu=`${cu}matviews`,mu=(e,t)=>{try{if(localStorage.setItem(e,t?"true":"false"),!t){const t=Object.keys(localStorage).filter((t=>t.startsWith(e)&&t!==e));return t.forEach((e=>localStorage.removeItem(e))),[e,...t]}return[e]}catch(t){return console.warn("Failed to save to localStorage:",t),[e]}},pu=e=>(e=>{try{const t=localStorage.getItem(e);return null===t?du===e&&(mu(e,!0),!0):"true"===t}catch(e){return!1}})(e),gu=(0,s.ZP)(Pe).withConfig({displayName:"Row__Type"})(["\n  align-items: center;\n  display: inline-block;\n"]),fu=(0,s.ZP)(Pe).withConfig({displayName:"Row__Title"})(["\n  .highlight {\n    background-color: #7c804f;\n    color: ",";\n  }\n"],(({theme:e})=>e.color.foreground)),hu=s.ZP.div.withConfig({displayName:"Row__Wrapper"})(["\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  padding: 0.5rem 0;\n  user-select: none;\n  border: 1px solid transparent;\n  border-radius: 0.4rem;\n  min-width: fit-content;\n  width: 100%;\n  flex-grow: 1;\n\n  cursor: ",";\n\n  ","\n\n  ","\n"],(({$selectOpen:e})=>e?"pointer":"default"),(({$level:e})=>e&&`\n    padding-left: ${1.5*e+1}rem;\n  `),(({$focused:e,theme:t})=>e&&`\n    outline: none;\n    background: ${t.color.tableSelection};\n    border: 1px solid ${t.color.cyan};\n  `)),bu=(0,s.ZP)(fu).withConfig({displayName:"Row__StyledTitle"})(["\n  display: flex;\n  align-items: center;\n  gap: 0.8rem;\n  z-index: 1;\n  flex-shrink: 0;\n  margin-right: 1rem;\n\n  .highlight {\n    background-color: #45475a;\n    color: ",";\n  }\n\n  svg {\n    color: ",";\n  }\n"],(({theme:e})=>e.color.foreground),D("cyan")),yu=s.ZP.span.withConfig({displayName:"Row__TableActions"})(["\n  z-index: 1;\n  position: relative;\n  display: inline-flex;\n  align-items: center;\n"]),Eu=s.ZP.div.withConfig({displayName:"Row__FlexRow"})(["\n  display: flex;\n  align-items: center;\n  padding-right: 1rem;\n  transform: translateX(",");\n  transition: transform 275ms ease-in-out;\n"],(({$selectOpen:e,$isTableKind:t})=>e&&t?"1rem":"0")),wu=s.ZP.span.withConfig({displayName:"Row__Spacer"})(["\n  flex: 1;\n"]),Cu=(0,s.ZP)(Od.l).withConfig({displayName:"Row__SortDownIcon"})(["\n  color: ",";\n  margin-right: 0.8rem;\n  flex-shrink: 0;\n"],D("green")),vu=(0,s.ZP)(Pd._).withConfig({displayName:"Row__ChevronRightIcon"})(["\n  color: ",";\n  margin-right: 1.5rem;\n  cursor: pointer;\n  flex-shrink: 0;\n  width: 1.5rem;\n  transform: rotateZ(",");\n  position: absolute;\n  left: -2rem;\n"],D("gray2"),(({$expanded:e})=>e?"90deg":"0deg")),xu=(0,s.ZP)(Ld.B).withConfig({displayName:"Row__DotIcon"})(["\n  color: ",";\n  margin-right: 1rem;\n"],D("gray2")),_u=(0,s.ZP)(Dd.o).withConfig({displayName:"Row__Loader"})(["\n  margin-left: 1rem;\n  color: ",";\n  ",";\n"],D("orange"),m),Su=s.ZP.div.withConfig({displayName:"Row__ErrorIconWrapper"})(["\n  display: inline-flex;\n  align-items: center;\n  align-self: center;\n\n  svg {\n    color: #f47474;\n  }\n"]),ku=s.ZP.div.withConfig({displayName:"Row__ErrorItem"})(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n"]),Tu=s.ZP.div.withConfig({displayName:"Row__TypeIcon"})(["\n  margin-right: 0.8rem;\n  display: flex;\n  align-items: center;\n  color: ",";\n\n  svg {\n    color: ",";\n  }\n"],D("cyan"),(({$type:e})=>D("SYMBOL"===e?"yellow":"cyan"))),Nu={number:{types:["BOOLEAN","BYTE","SHORT","INT","LONG","LONG256","DOUBLE","FLOAT","BINARY","UUID"],icon:Bd.G},date:{types:["DATE"],icon:zd.H},text:{types:["CHAR","VARCHAR","STRING"],icon:Fd.D},symbol:{types:["SYMBOL"],icon:Hd.V},time:{types:["TIMESTAMP","INTERVAL","TIMESTAMP_NS"],icon:Od.l},network:{types:["IPV4"],icon:Ud.T},geo:{types:["GEOHASH"],icon:Zd.x},array:{types:["ARRAY"],icon:Ad.g}},Iu=({icon:e,size:t="14px",type:n})=>r.createElement(Tu,{$type:n},r.createElement(e,{size:t})),Ru=({isDesignatedTimestamp:e,type:t})=>t?e?r.createElement(Xe,{icon:r.createElement(Cu,{"data-hook":"designated-timestamp-icon",size:"14px"}),placement:"top",tooltip:"Designated timestamp"}):(e=>{const t=Object.values(Nu).find((({types:t})=>t.some((t=>t===ou(e)))));return r.createElement(Iu,{icon:t?.icon??xu,type:e})})(t):null,Ou=({className:e,designatedTimestamp:t,expanded:n,kind:a,name:o,partitionBy:i,walEnabled:l,onExpandCollapse:s,navigateInTree:c,"data-hook":d,isLoading:u,type:m,errors:p,value:g,id:f,index:h})=>{const{query:b,selectOpen:y,selectedTables:E,handleSelectToggle:w,focusedIndex:C,setFocusedIndex:v}=fd(),[x,_]=(0,r.useState)(!1),S=(0,r.useRef)(null),k=(0,r.useRef)(null),T=["folder","table","matview"].includes(a)||"column"===a&&"SYMBOL"===m,N=["table","matview"].includes(a),I=[uu,du].includes(f??""),R=["column","table","matview"].includes(a)&&b&&o.toLowerCase().includes(b.toLowerCase()),O=!!E.find((e=>e.name===o&&e.type===a)),A=()=>{T&&s()};return(0,r.useEffect)((()=>(u?S.current=setTimeout((()=>{_(!0)}),500):_(!1),()=>{S.current&&(clearTimeout(S.current),S.current=null)})),[u]),(0,r.useLayoutEffect)((()=>{C===h&&k.current?.focus()}),[C]),!y||N||I?r.createElement(hu,{$level:f?f.split(":").length-2:0,$selectOpen:y,$focused:C===h,ref:k,"data-hook":d??"schema-row","data-kind":a,"data-search-match":R,"data-expanded":n,"data-index":h,"data-id":f,className:e,tabIndex:100,onBlur:()=>{C===h&&v(null)},onContextMenu:e=>{N||e.preventDefault()},onDoubleClick:A,onClick:()=>{N&&y&&w&&w({name:o,type:a}),y&&!I||C===h||v(h)},onKeyDown:e=>{e.preventDefault(),T&&("Enter"===e.key||"ArrowRight"===e.key&&!n||"ArrowLeft"===e.key&&n)&&A();const t=!(T&&n||"ArrowLeft"!==e.key),r=(!T||n)&&"ArrowRight"===e.key||"ArrowDown"===e.key||"Tab"===e.key;t&&c({to:"parent",id:f}),r&&c({to:"next",id:f}),("ArrowUp"===e.key||e.shiftKey&&"Tab"===e.key)&&c({to:"previous",id:f}),"Home"===e.key&&c({to:"start"}),"End"===e.key&&c({to:"end"}),"PageUp"===e.key&&c({to:"pageUp"}),"PageDown"===e.key&&c({to:"pageDown"})}},r.createElement(Zn.x,{align:"center",justifyContent:"flex-start",gap:"2rem",style:{width:"100%",position:"relative",minWidth:"fit-content"}},N&&r.createElement("div",{style:{position:"absolute",left:"-2rem"}},r.createElement(Kd,{visible:y,checked:O})),r.createElement(Eu,{$selectOpen:y,$isTableKind:N},T&&(!y||!N)&&r.createElement(vu,{size:"15px",$expanded:n,onClick:A}),"column"===a&&r.createElement(Ru,{isDesignatedTimestamp:o===t,type:m}),r.createElement(bu,{color:"foreground",ellipsis:!0,"data-hook":`schema-${a}-title`},N&&r.createElement(Gd,{designatedTimestamp:t,partitionBy:i,walEnabled:l,isMaterializedView:"matview"===a}),"detail"===a&&r.createElement(Md.Z,{size:"14px"}),["column","table","matview"].includes(a)?r.createElement(ws(),{highlightClassName:"highlight",searchWords:[b??""],textToHighlight:o}):o),m&&r.createElement(gu,{color:"gray2",transform:"lowercase",ellipsis:!0},"(",m,")"),"detail"===a&&!u&&r.createElement(Pe,{color:"gray2"},g),x&&r.createElement(_u,{size:"18px"}),r.createElement(wu,null),p&&p.length>0&&r.createElement(yu,null,r.createElement(dt,{placement:"top",trigger:r.createElement(Su,{"data-hook":"schema-row-error-icon"},r.createElement(ts.j,{size:"18px"}))},r.createElement(xt,null,p.length>1?p.map((e=>r.createElement(ku,{key:e},r.createElement(Su,null,r.createElement(ts.j,{size:"18px"})),r.createElement(Pe,{color:"foreground"},e)))):r.createElement(Pe,{color:"foreground"},p[0]))))))):null},Au=(e,t)=>[{id:`${t}:indexed`,kind:"detail",name:"Indexed",parent:t,value:e.indexed?"Yes":"No",children:[]},{id:`${t}:symbolCapacity`,kind:"detail",name:"Symbol capacity",parent:t,value:e.symbolCapacity.toString(),children:[]},{id:`${t}:symbolCached`,kind:"detail",name:"Cached",parent:t,value:e.symbolCached?"Yes":"No",children:[]}],Mu=e=>[{id:`${e}:indexed`,kind:"detail",name:"Indexed",isLoading:!0,parent:e,value:"Loading...",children:[]},{id:`${e}:symbolCapacity`,kind:"detail",name:"Symbol capacity",isLoading:!0,parent:e,value:"Loading...",children:[]},{id:`${e}:symbolCached`,kind:"detail",name:"Cached",isLoading:!0,parent:e,value:"Loading...",children:[]}],Pu=(e,t,n)=>n.map((n=>{const r=`${t}:${n.column_name}`,a=pu(r);return{id:r,kind:"column",table:e,name:n.column_name,parent:t,isExpanded:a,designatedTimestamp:e.designatedTimestamp,type:n.data_type,children:a&&"SYMBOL"===n.data_type?Mu(r):[]}})),Lu=(e,t)=>[{id:`${t}:partitionBy`,kind:"detail",name:"Partitioning",parent:t,value:e.partitionBy&&"NONE"!==e.partitionBy?`By ${e.partitionBy.toLowerCase()}`:"None",children:[]},{id:`${t}:walEnabled`,kind:"detail",name:"WAL",parent:t,value:e.walEnabled?"Enabled":"Disabled",children:[]}],Du=(e,t,n=!1,r,a,o)=>{const i=`${t}:${e.table_name}`,l=n?r?.find((t=>t.view_name===e.table_name)):void 0,s=a?.find((t=>t.name===e.table_name)),c=`${i}:columns`,d=`${i}:baseTables`,u=`${i}:storageDetails`,m={id:i,kind:n?"matview":"table",name:e.table_name,table:e,matViewData:l,parent:t,isExpanded:pu(i),partitionBy:e.partitionBy,walEnabled:e.walEnabled,designatedTimestamp:e.designatedTimestamp,walTableData:s,children:[{id:c,kind:"folder",name:"Columns",table:e,parent:i,isExpanded:pu(c),children:Pu(e,c,o)},{id:u,kind:"folder",name:"Storage details",parent:i,isExpanded:pu(u),children:Lu(e,u)}]};return n&&l&&m.children.push({id:d,kind:"folder",name:"Base tables",parent:i,isExpanded:pu(d),children:[{id:`${d}:${l.base_table_name}`,kind:"detail",name:l.base_table_name,parent:d,children:[]}]}),m},Bu=(e,t)=>{const[n,r,a,...o]=t.split(":"),i=`${n}:${r}:${a}`;let l=e[i];if(!l)return;let s=i,c=e;for(const e of o){s=`${s}:${e}`;const t=l?.children?.find((e=>e.id===s));if(!t)return;c=l,l=t}return{node:l,parent:c}},zu=(e,t,n)=>{const r=Bu(e,t);if(!r)return e;const{node:a,parent:o}=r,i={...e};if(a){const e=n(a);o.id?o.children=o.children.map((n=>n.id===t?e:n)):i[t]=e}return i},Fu=(e,t)=>e.findIndex((e=>e.id===t)),Hu=e=>{const t=[e];return e.isExpanded&&e.children.forEach((e=>{t.push(...Hu(e))})),t};var Uu=n(26261);function Zu(){return Zu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zu.apply(this,arguments)}const Vu=(0,s.ZP)(Uu.VY).withConfig({displayName:"ContextMenu__StyledContent"})(["\n  background-color: #343846; /* vscode-menu-background */\n  border-radius: 0.5rem;\n  padding: 0.4rem;\n  box-shadow: 0 0.2rem 0.8rem rgba(0, 0, 0, 0.36); /* vscode-widget-shadow */\n  z-index: 9999;\n  min-width: 160px;\n"]),qu=(0,s.ZP)(Uu.ck).withConfig({displayName:"ContextMenu__StyledItem"})(['\n  font-size: 1.3rem;\n  height: 3rem;\n  font-family: "system-ui", sans-serif;\n  cursor: pointer;\n  color: rgb(248, 248, 242); /* vscode-menu-foreground */\n  display: flex;\n  align-items: center;\n  padding: 1rem 1.2rem;\n  border-radius: 0.4rem;\n  border: 1px solid transparent;\n\n  &[data-highlighted] {\n    background: #043c5c;\n    border: 1px solid #8be9fd;\n  }\n\n  &[data-disabled] {\n    opacity: 0.5;\n    pointer-events: none;\n  }\n']),$u=s.ZP.span.withConfig({displayName:"ContextMenu__IconWrapper"})(["\n  margin-right: 1.2rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]),ju=Uu.fC,Gu=Uu.xz,Wu=r.forwardRef(((e,t)=>r.createElement(Uu.Uv,null,r.createElement(Vu,Zu({},e,{ref:t}))))),Qu=r.forwardRef((({children:e,icon:t,...n},a)=>r.createElement(qu,Zu({},n,{ref:a}),t&&r.createElement($u,null,t),e)));var Yu=n(47223);const Ku={[N.TOO_MANY_OPEN_FILES]:{title:"System limit for open files",message:"Too many open files, please, increase the maximum number of open file handlers OS limit",link:"https://questdb.io/docs/deployment/capacity-planning/#maximum-open-files"},[N.DISK_FULL]:{title:"OS configuration",message:"No space left on device, please, extend the volume or free existing disk space up",link:"https://questdb.io/docs/deployment/capacity-planning/#os-configuration"},[N.OUT_OF_MMAP_AREAS]:{title:"Max virtual memory areas limit",message:"Out of virtual memory mapping areas, please, increase the maximum number of memory-mapped areas OS limit",link:"https://questdb.io/docs/deployment/capacity-planning/#max-virtual-memory-areas-limit"},[N.OUT_OF_MEMORY]:{title:"Out of memory",message:"Out of memory, please, analyze system metrics, and upgrade memory, if necessary",link:"https://questdb.io/docs/deployment/capacity-planning/#cpu-and-ram-configuration"},[N.UNSUPPORTED_FILE_SYSTEM]:{title:"Unsupported file system",message:"DB root is located on an unsupported file system, please, move the DB root to a volume with supported file system",link:"https://questdb.io/docs/operations/backup/#supported-filesystems"}},Xu=(0,s.ZP)(ho.V.Content).withConfig({displayName:"SuspensionDialog__StyledDialogContent"})(["\n  border-color: #723131;\n"]),Ju=(0,s.ZP)(ho.V.Description).withConfig({displayName:"SuspensionDialog__StyledDescription"})(["\n  display: grid;\n  gap: 2rem;\n"]),em=(0,s.ZP)(ke).attrs({align:"center",flexDirection:"column"}).withConfig({displayName:"SuspensionDialog__ContentBlockBox"})(["\n  width: 100%;\n"]),tm=s.ZP.div.withConfig({displayName:"SuspensionDialog__FormWrapper"})(["\n  width: 100%;\n  display: grid;\n  grid-template-columns: 100px auto;\n  gap: 1rem;\n"]),nm=(0,s.ZP)(gr.Input).withConfig({displayName:"SuspensionDialog__TransactionInput"})(["\n  width: 10rem;\n"]),rm=(0,s.ZP)(ke).withConfig({displayName:"SuspensionDialog__Icon"})(["\n  height: 4.8rem;\n"]),am=(0,s.ZP)(Jn.I).withConfig({displayName:"SuspensionDialog__StyledInput"})(["\n  width: 100%;\n  font-family: ",";\n  background: #313340;\n  border-color: ",";\n"],(({theme:e})=>e.fontMonospace),(({theme:e})=>e.color.selection)),om="Error restarting transaction",im=({walTableData:e,open:t,onOpenChange:n,kind:a})=>{const{quest:o}=(0,r.useContext)(Jr),[i,l]=(0,r.useState)(!1),[s,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(),m=parseFloat(e.sequencerTxn)-parseFloat(e.writerTxn);return(0,r.useEffect)((()=>{t&&(u(void 0),c(!1))}),[t]),r.createElement(ho.V.Root,{open:t,onOpenChange:e=>{e||O.publish(A.MSG_QUERY_SCHEMA),n(e)}},r.createElement(ho.V.Portal,null,r.createElement(Ce.A,null,r.createElement(ve.a,{primitive:ho.V.Overlay})),r.createElement(Xu,{"data-hook":"schema-suspension-dialog","data-table-name":e.name,onClick:e=>{e.stopPropagation()},onEscapeKeyDown:()=>n(!1),onPointerDownOutside:()=>n(!1)},r.createElement(ho.V.Title,null,r.createElement(ke,null,r.createElement(ys.i,{size:20,color:"#FF5555"}),"table"===a?"Table":"Materialized view"," is suspended: ",e.name)),r.createElement(Ju,null,r.createElement(ke,{gap:"3rem",flexDirection:"column",align:"center"},d&&r.createElement(Pe,{color:"red"},d),s&&r.createElement(Pe,{color:"green"},"WAL resumed successfully!"),e.errorTag&&Ku[e.errorTag]&&r.createElement(Pe,{color:"red","data-hook":"schema-suspension-dialog-error-message",size:"lg",align:"center"},Ku[e.errorTag].message),r.createElement(ke,{gap:"2rem",align:"flex-start"},r.createElement(ke,{gap:"1rem",flexDirection:"column",align:"center"},r.createElement(rm,null,r.createElement("img",{src:"assets/icon-copy.svg",alt:"Copy icon",width:"48",height:"48"})),r.createElement(Pe,{color:"foreground",size:"lg"},e.sequencerTxn)),r.createElement(rm,null,r.createElement("img",{src:"assets/line.svg",alt:"Broken transation illustration",width:"108",height:"18"})),r.createElement(ke,{gap:"1rem",flexDirection:"column",align:"center"},r.createElement(rm,null,r.createElement("img",{src:"assets/icon-database.svg",alt:"Database icon",width:"36",height:"38"})),r.createElement(Pe,{color:"foreground",size:"lg"},e.writerTxn))),r.createElement(Pe,{color:"foreground",size:"lg"},m," transaction",1===m?"":"s"," behind"),e.errorMessage&&r.createElement(ke,{flexDirection:"column",gap:"1rem",style:{width:"100%"}},r.createElement(Pe,{color:"foreground"},"Server message:"),r.createElement(ke,{gap:"0.5rem",style:{width:"100%"}},r.createElement(am,{name:"server_message",disabled:!0,value:e.errorMessage}),r.createElement(Vn.z,{skin:"secondary",onClick:()=>{p(e.errorMessage??"")}},r.createElement(ii.f,{size:"18px"})))),e.errorTag&&Ku[e.errorTag]&&r.createElement(em,{gap:"0.5rem"},r.createElement(Pe,{color:"foreground"},"Workarounds and documentation:"),r.createElement(ot,{color:"cyan",hoverColor:"cyan",href:Ku[e.errorTag].link,rel:"noreferrer",target:"_blank","data-hook":"schema-suspension-dialog-error-link"},r.createElement(ke,{align:"center",gap:"0.25rem"},r.createElement(Wa.d,{size:"16px"}),Ku[e.errorTag].title))),r.createElement(em,{gap:"2rem"},r.createElement(Pe,{color:"gray2"},"If you have addressed the issue, restart the process:"),r.createElement(gr,{name:"resume_transaction_form",onSubmit:async t=>{l(!0),u(void 0);const n="ALTER "+("matview"===a?"MATERIALIZED VIEW":"TABLE");try{const r=await o.query(`${n} '${e.name}' RESUME WAL${t.resume_transaction_id?` FROM TRANSACTION ${t.resume_transaction_id}`:""}`);r&&r.type===T.DDL?c(!0):u(om),l(!1)}catch(e){const t=e;l(!1),u(`${om}${t.error?`: ${t.error}`:""}`)}},defaultValues:{resume_transaction_id:void 0},validationSchema:hr().object({resume_transaction_id:hr().number().optional().allow("")})},r.createElement(tm,null,r.createElement(gr.Item,{name:"resume_transaction_id"},r.createElement(nm,{name:"resume_transaction_id",placeholder:(parseInt(e.writerTxn)+1).toString()})),r.createElement(gr.Submit,{disabled:i,prefixIcon:r.createElement(Sd.G,{size:"18px"}),variant:"secondary","data-hook":"schema-suspension-dialog-restart-transaction"},i?"Restarting...":"Resume WAL")))))),r.createElement(ho.V.ActionButtons,null,r.createElement(ho.V.Close,{asChild:!0},r.createElement(Vn.z,{prefixIcon:r.createElement(Yu.W,{size:18}),skin:"secondary","data-hook":"schema-suspension-dialog-dismiss",onClick:()=>n(!1)},"Dismiss"))))))},lm=(0,s.ZP)(Ou).withConfig({displayName:"VirtualTables__SectionHeader"})(["\n  cursor: ",";\n  pointer-events: ",";\n\n  ","\n"],(({$disabled:e})=>e?"not-allowed":"default"),(({$disabled:e})=>e?"none":"auto"),(({$disabled:e})=>e&&"\n    opacity: 0.5;\n  ")),sm=(0,s.ZP)(Ou).withConfig({displayName:"VirtualTables__TableRow"})(["\n  ","\n"],(({$contextMenuOpen:e,theme:t})=>e&&`\n    background: ${t.color.tableSelection};\n    border: 1px solid ${t.color.cyan};\n  `)),cm=s.ZP.div.withConfig({displayName:"VirtualTables__FlexSpacer"})(["\n  flex: 1;\n"]),dm=(0,s.ZP)(_d.G).withConfig({displayName:"VirtualTables__Loader"})(["\n  margin-left: 1rem;\n  align-self: center;\n  color: ",";\n  ",";\n"],D("foreground"),m),um=()=>{const[e,t]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{const e=setTimeout((()=>t(!0)),1e3);return()=>clearTimeout(e)}),[]),e?r.createElement(dm,{size:"22px"}):null},mm=({tables:e,walTables:t,materializedViews:n,filterSuspendedOnly:a,state:i,loadingError:l})=>{const{query:s,focusedIndex:c,setFocusedIndex:d}=fd(),{quest:u}=(0,r.useContext)(Jr),m=(0,o.v9)(Tn.query.getColumns),[g,f]=(0,r.useState)({}),[h,b]=(0,r.useState)(null),[y,E]=(0,r.useState)(null),w=(0,r.useRef)(new Map),C=(0,r.useRef)(new Set),v=(0,r.useRef)(g),x=(0,r.useRef)(null),_=(0,r.useRef)(null),S=(0,r.useRef)(null);(({virtuosoRef:e,focusedIndex:t,setFocusedIndex:n,wrapperRef:a})=>{(0,r.useEffect)((()=>{const n=n=>{null!==t&&a.current&&!a.current.contains(document.activeElement)&&("ArrowDown"!==n.key&&"ArrowUp"!==n.key&&"Home"!==n.key&&"End"!==n.key&&"PageUp"!==n.key&&"PageDown"!==n.key||(n.preventDefault(),n.stopPropagation(),e.current?.scrollIntoView({index:t})))};return window.addEventListener("keydown",n,!0),()=>window.removeEventListener("keydown",n,!0)}),[t,e,a]),(0,r.useEffect)((()=>{const e=e=>{a.current&&!a.current.contains(e.target)&&null!==t&&n(null)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[t,n])})({virtuosoRef:x,focusedIndex:c,setFocusedIndex:d,wrapperRef:S});const[k,N]=(0,r.useMemo)((()=>e.reduce(((e,n)=>{const r=n.table_name.toLowerCase(),o=s.toLowerCase(),i=r.includes(o),l=!!s&&!!m[n.table_name]?.some((e=>e.column_name.toLowerCase().includes(o)));return(!a||n.walEnabled&&t?.find((e=>e.name===n.table_name))?.suspended)&&(i||l)?(e[n.matView?1:0].push({...n,hasColumnMatches:l}),e):e}),[[],[]]).map((e=>e.sort(((e,t)=>e.table_name.toLowerCase().localeCompare(t.table_name.toLowerCase())))))),[e,s,a,t,m]),I=(0,r.useMemo)((()=>Object.values(g).reduce(((e,t)=>(e.push(...Hu(t)),e)),[])),[g]),R=(0,r.useCallback)((async(e,t)=>{try{const n=await u.showSymbolColumnDetails(e,t);if(n&&n.type===T.DQL&&n.data.length>0)return n.data[0]}catch(n){zt(`Cannot fetch column details from table '${e}' for column ${t}`)}return null}),[u]),O=(0,r.useCallback)((async(e,t,n)=>{C.current.add(e);const r=w.current.get(e);if(r)return Au(r,e);const a=await R(t,n);return a?(w.current.set(e,a),Au(a,e)):[]}),[R]),A=(0,r.useCallback)((async e=>{const t=!pu(e);let n={...g};mu(e,t).forEach((e=>{n=zu(n,e,(e=>({...e,isExpanded:t})))}));const r=e.split(":");if(r.length>2&&"columns"===r.slice(-2)[0]){let r;t?r=Mu(e):(C.current.delete(e),r=[]),n=zu(n,e,(e=>({...e,children:r})))}f(n)}),[g]),M=(0,r.useCallback)((e=>{if(!x.current)return;const{to:t}=e;switch(t){case"start":x.current.scrollIntoView({index:0,align:"start",done:()=>d(0)});break;case"end":x.current.scrollIntoView({index:I.length-1,align:"end",done:()=>d(I.length-1)});break;case"next":const{id:t}=e,n=Math.min(I.length-1,Fu(I,t)+1);x.current.scrollIntoView({index:n,done:()=>d(n)});break;case"previous":const{id:r}=e,a=Math.max(0,Fu(I,r)-1);x.current.scrollIntoView({index:a,done:()=>d(a)});break;case"parent":const{id:o}=e,i=o.split(":").slice(0,-1).join(":"),l=Fu(I,i);-1!==l&&x.current.scrollIntoView({index:l,done:()=>d(l)});break;case"pageUp":if(!_.current)return;const{startIndex:s,endIndex:u}=_.current,m=u-s,p=-1!==c&&c!==s?s:Math.max(0,s-m);x.current.scrollIntoView({index:p,align:"start",done:()=>d(p)});break;case"pageDown":if(!_.current)return;const{startIndex:g,endIndex:f}=_.current,h=f-g,b=-1!==c&&c!==f?f:Math.min(I.length-1,f+h);x.current.scrollIntoView({index:b,align:"end",done:()=>d(b)})}}),[I,x,_,c,d]),P=(0,r.useCallback)((e=>{const t=I[e];if("column"===t.kind&&t.isExpanded&&"SYMBOL"===t.type&&!C.current.has(t.id)){const e=Bu(v.current,t.id);if(e&&e.node.children.some((e=>e.isLoading))){const e=t.id.split(":"),n=e.slice(-1)[0],r=e.slice(-3)[0];O(t.id,r,n).then((e=>{f((n=>zu(n,t.id,(t=>({...t,children:e})))))}))}}if("detail"===t.kind)return r.createElement(Ou,{kind:"detail",index:e,name:t.value?`${t.name}:`:t.name,value:t.value,isLoading:t.isLoading,id:t.id,onExpandCollapse:()=>{},navigateInTree:M});if(t.id===du||t.id===uu){const n=t.id===du;return r.createElement(lm,{$disabled:n?0===k.length:0===N.length,name:t.name,kind:"folder",index:e,expanded:t.isExpanded,"data-hook":`${t.isExpanded?"collapse":"expand"}-${n?"tables":"materialized-views"}`,onExpandCollapse:()=>A(t.id),id:t.id,navigateInTree:M})}return"folder"===t.kind?r.createElement(Ou,{kind:"folder",index:e,name:t.name,expanded:t.isExpanded,onExpandCollapse:()=>A(t.id),id:t.id,navigateInTree:M}):"table"===t.kind||"matview"===t.kind?r.createElement(r.Fragment,null,r.createElement(ju,{onOpenChange:e=>b(e?t.id:null)},r.createElement(Gu,null,r.createElement(r.Fragment,null,r.createElement(sm,{$contextMenuOpen:h===t.id,kind:t.kind,name:t.name,index:e,expanded:t.isExpanded,onExpandCollapse:()=>A(t.id),navigateInTree:M,partitionBy:t.partitionBy,walEnabled:t.walEnabled,designatedTimestamp:t.designatedTimestamp,id:t.id,errors:[..."invalid"===t.matViewData?.view_status?[`Materialized view is invalid${t.matViewData?.invalidation_reason&&`: ${t.matViewData?.invalidation_reason}`}`]:[],...t.walTableData?.suspended?["Suspended"]:[]]}),t.walTableData?.suspended&&r.createElement(im,{walTableData:t.walTableData,kind:t.kind,open:y===t.id,onOpenChange:e=>{E(e?t.id:null)}}))),r.createElement(Wu,null,r.createElement(Qu,{"data-hook":"table-context-menu-copy-schema",onClick:async()=>await(async(e,t)=>{try{let n;n=t?await u.showMatViewDDL(e):await u.showTableDDL(e),n?.type===T.DQL&&n.data?.[0]?.ddl&&(p(n.data[0].ddl),Bt("Schema copied to clipboard"))}catch(n){zt(`Cannot copy schema for ${t?"materialized view":"table"} '${e}'`)}})(t.name,"matview"===t.kind),icon:r.createElement(ii.f,{size:16})},"Copy schema"),r.createElement(Qu,{"data-hook":"table-context-menu-resume-wal",onClick:()=>t.walTableData?.suspended&&setTimeout((()=>E(t.id))),icon:r.createElement(Sd.G,{size:16}),disabled:!t.walTableData?.suspended},"Resume WAL")))):"column"===t.kind?r.createElement(Ou,{kind:"column",name:t.name,index:e,expanded:t.isExpanded,onExpandCollapse:()=>A(t.id),designatedTimestamp:t.designatedTimestamp,type:t.type,isLoading:t.isLoading,id:t.id,navigateInTree:M}):null}),[I,k,N,A,h,y,M,O]);return(0,r.useEffect)((()=>{if(i.view===ym.ready){const e={[du]:{id:du,kind:"folder",name:`Tables (${k.length})`,isExpanded:0!==k.length&&pu(du),children:k.map((e=>{const r=Du(e,du,!1,n,t,m[e.table_name]??[]);if(e.hasColumnMatches){r.isExpanded=!0;const e=r.children.find((e=>e.id.endsWith(":columns")));e&&(e.isExpanded=!0)}return r}))},[uu]:{id:uu,kind:"folder",name:`Materialized views (${N.length})`,isExpanded:0!==N.length&&pu(uu),children:N.map((e=>{const r=Du(e,uu,!0,n,t,m[e.table_name]??[]);if(e.hasColumnMatches){r.isExpanded=!0;const e=r.children.find((e=>e.id.endsWith(":columns")));e&&(e.isExpanded=!0)}return r}))}};C.current.clear(),f(e)}}),[i.view,k,N,n,t,m]),(0,r.useEffect)((()=>{w.current.clear(),C.current.clear()}),[m]),(0,r.useEffect)((()=>{v.current=g}),[g]),i.view===ym.loading?r.createElement(um,null):i.view===ym.error?l?r.createElement(Rd,{error:l}):r.createElement(cm,null):r.createElement("div",{ref:S,style:{height:"100%"}},r.createElement(_t.OO,{totalCount:I.length,ref:x,"data-hook":"schema-tree",rangeChanged:e=>{_.current=e},data:I,itemContent:e=>P(e),style:{height:"100%"}}))};function pm(){return pm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pm.apply(this,arguments)}const gm=(0,s.iv)(["\n  display: flex;\n  justify-content: center;\n"]),fm=(0,s.ZP)(lt).withConfig({displayName:"Schema__Wrapper"})(["\n  overflow-x: auto;\n  height: 100%;\n  ","\n"],(({open:e})=>!e&&(0,s.iv)(["\n    display: none;\n  "]))),hm=(0,s.ZP)(it).withConfig({displayName:"Schema__Content"})(["\n  display: flex;\n  flex-direction: column;\n  overflow: auto;\n  ",";\n"],(({_loading:e})=>e&&gm)),bm=(0,s.ZP)(yt).withConfig({displayName:"Schema__ToolbarToggleButton"})(["\n  &&:not(:disabled) {\n    width: auto;\n    padding: 0 1rem;\n    height: 3rem;\n  }\n"]);let ym=function(e){return e[e.loading=0]="loading",e[e.error=1]="error",e[e.ready=2]="ready",e}({});const Em={view:ym.loading},wm=(e,t)=>({...e,...t}),Cm=({innerRef:e,...t})=>{const[n,a]=(0,r.useReducer)(wm,Em),{quest:i}=(0,r.useContext)(Jr),[l,s]=(0,r.useState)(null),c=(0,r.useRef)(null),[d,u]=(0,r.useState)(),[m,g]=(0,r.useState)(),[f,h]=(0,r.useState)(),b=(0,o.I0)(),[y,E]=(0,r.useState)(!1),{autoRefreshTables:w,updateSettings:C}=Za(),[v,x]=(0,r.useState)(!1),_=(0,r.useRef)(!1),S=(0,r.useRef)(0),{addBuffer:k}=Ma(),{selectOpen:N,setSelectOpen:I,selectedTables:R,setSelectedTables:M}=fd(),P=async()=>{try{const e=await i.showTables();if(e&&e.type===T.DQL){c.current=null,u(e.data),b(en(e.data));const t=await i.query("wal_tables()");t&&t.type===T.DQL&&g(t.data.filter((t=>e.data.map((e=>e.table_name)).includes(t.name)))),L(),a({view:ym.ready})}else a({view:ym.error})}catch(e){a({view:ym.error})}},L=async()=>{try{const e=await i.query("materialized_views()");e&&e.type===T.DQL&&h(e.data)}catch(e){}},D=async()=>{const e=["information_schema.questdb_columns()","information_schema.columns()"];for(const t of e)try{const e=await i.query(t);if(e?.type===T.DQL)return void b(tn(e.data))}catch{}a({view:ym.error})},B=(0,r.useCallback)((async()=>{const e=hl.find((e=>"now-1h"===e.dateFrom&&"now"===e.dateTo));await k({metricsViewState:{metrics:[],dateFrom:e.dateFrom,dateTo:e.dateTo,refreshRate:yl.AUTO,viewMode:bl.GRID}})}),[k]);(0,r.useEffect)((()=>{P(),D(),O.subscribe(A.MSG_CONNECTION_ERROR,(e=>{e&&(c.current=e,s(e))})),O.subscribe(A.MSG_CONNECTION_OK,(()=>{null!==c.current&&(P(),D())}))}),[]);const z=(0,r.useCallback)((()=>{const e=Date.now();_.current&&e-S.current>1e4&&(S.current=e,P(),D())}),[]);(0,r.useEffect)((()=>{w?(O.subscribe(A.MSG_QUERY_SCHEMA,(()=>{P(),D()})),window.addEventListener("focus",z),x(!0),_.current=!0):v&&(O.unsubscribe(A.MSG_QUERY_SCHEMA),window.removeEventListener("focus",z),x(!1),_.current=!1)}),[w]);const F=(0,r.useMemo)((()=>d?[...d.filter((e=>!f?.find((t=>t.view_name===e.table_name)))).map((e=>({name:e.table_name,type:"table"}))),...f?.map((e=>({name:e.view_name,type:"matview"})))??[]]:[]),[d,f]),H=(0,r.useMemo)((()=>m?.filter((e=>e.suspended)).length??0),[m]);return(0,r.useEffect)((()=>{0===H&&y&&E(!1)}),[H,y]),r.createElement(fm,pm({ref:e},t),r.createElement(Be.Header,{afterTitle:r.createElement("div",{style:{display:"flex",marginRight:"1rem",justifyContent:"space-between",flex:1}},r.createElement(xd,{suspendedTablesCount:H,filterSuspendedOnly:y,setFilterSuspendedOnly:E}),d&&r.createElement(ke,{align:"center",gap:"0"},N&&r.createElement(dt,{delay:350,placement:"bottom",trigger:r.createElement(Vn.z,{skin:"transparent","data-hook":"schema-copy-to-clipboard-button",disabled:0===R.length,onClick:async()=>{if(!d)return;let e=[];const t=await Promise.all(R.map((async t=>{try{const e="table"===t.type?await i.showTableDDL(t.name):await i.showMatViewDDL(t.name);if(e&&e.type===T.DQL)return e.data[0].ddl}catch(n){e.push(t)}})));0===e.length?(p(t.join("\n\n")),Bt("Schemas copied to clipboard")):zt("Cannot copy schemas from tables: "+e.sort().join(", ")),I(!1)}},r.createElement(ii.f,{size:"18px"}))},r.createElement(xt,null,"Copy schemas to clipboard")),N&&r.createElement(dt,{delay:350,placement:"bottom",trigger:r.createElement(Vn.z,{skin:"transparent","data-hook":"schema-select-all-button",onClick:()=>{R.length===F.length?M([]):M(F)}},r.createElement(Kd,{visible:!0,checked:R.length===F.length}))},r.createElement(xt,null,R.length===F.length?"Deselect":"Select"," ","all")),N&&r.createElement(dt,{delay:350,placement:"bottom",trigger:r.createElement(Vn.z,{"data-hook":"schema-cancel-select-button",skin:"transparent",onClick:()=>{M([]),I(!1)}},r.createElement(xe.x,{size:"18px"}))},r.createElement(xt,null,"Cancel")),!N&&r.createElement(dt,{delay:350,placement:"bottom",trigger:r.createElement(Vn.z,{"data-hook":"schema-add-metrics-button",skin:"transparent",onClick:B},r.createElement(Pl.J,{size:"20px"}))},r.createElement(xt,null,"Add metrics")),!N&&r.createElement(dt,{delay:350,placement:"right",trigger:r.createElement(bm,pm({"data-hook":"schema-select-button",onClick:()=>{N&&M([]),I(!N)}},N?{className:"selected"}:{},{selected:N,disabled:0===d?.length}),r.createElement(pd.e,{size:"18px"}))},r.createElement(xt,null,"Select")),!N&&r.createElement(dt,{delay:350,placement:"right",trigger:r.createElement(bm,{"data-hook":"schema-auto-refresh-button",onClick:()=>{C(yn.AUTO_REFRESH_TABLES,!w),P(),D()},selected:w},r.createElement(Or.h,{size:"18px"}))},r.createElement(xt,null,"Auto refresh"," ",w?"enabled":"disabled"))))}),r.createElement(hm,{_loading:n.view===ym.loading},r.createElement(mm,{tables:d??[],walTables:m,materializedViews:f,filterSuspendedOnly:y,state:n,loadingError:l})))},vm=(e,t)=>r.createElement(hd,null,r.createElement(Cm,pm({},e,{innerRef:t}))),xm=(0,r.forwardRef)(vm);var _m=n(83381);const Sm=s.ZP.div.withConfig({displayName:"start__Items"})(["\n  display: grid;\n  grid-auto-flow: row;\n  grid-auto-columns: max-content;\n  gap: 4rem;\n  text-align: center;\n  justify-items: center;\n"]),km=(0,s.ZP)(_m.X).withConfig({displayName:"start__StyledHeading"})(["\n  color: ",";\n"],(({theme:e})=>e.color.foreground)),Tm=s.ZP.div.withConfig({displayName:"start__Actions"})(["\n  display: grid;\n  gap: 2rem;\n  grid-template-columns: repeat(2, 1fr);\n"]),Nm=(0,s.ZP)(Zn.x).attrs({flexDirection:"column",gap:"2rem"}).withConfig({displayName:"start__Action"})(["\n  padding: 2rem;\n  border-radius: ",";\n  background: #2c2e3d;\n  cursor: pointer;\n\n  &,\n  &:hover {\n    ",";\n  }\n\n  > * {\n    opacity: 0.8;\n  }\n\n  &:hover {\n    background: #3f4252;\n\n    > * {\n      opacity: 1;\n    }\n  }\n"],(({theme:e})=>e.borderRadius),ee),Im=()=>{const e=(0,o.I0)();return r.createElement(Sm,null,r.createElement(km,{level:3},"Enter a query and press ",r.createElement(Pe,{color:"green"},"Run")," to view results."),r.createElement(Tm,null,r.createElement(Nm,{onClick:()=>e(jt.setActiveBottomPanel("import"))},r.createElement("img",{alt:"File upload icon",width:"60",height:"80",src:"assets/upload.svg"}),r.createElement(_m.X,{level:5},"Import CSV")),r.createElement(Nm,{onClick:()=>e(jt.setActiveSidebar("create"))},r.createElement("img",{alt:"Create table icon",width:"60",height:"80",src:"assets/create-table.svg"}),r.createElement(_m.X,{level:5},"Create table"))))},Rm=(0,s.ZP)(it).withConfig({displayName:"zero-state__StyledPaneContent"})(["\n  align-items: center;\n  justify-content: center;\n"]),Om=()=>{const{quest:e}=(0,r.useContext)(Jr),[t,n]=(0,r.useState)(!0),[a,o]=(0,r.useState)([]);return(0,r.useEffect)((()=>{(async()=>{try{const t=await e.showTables();t&&t.type===T.DQL&&o(t.data)}catch(e){return}finally{n(!1)}})()}),[]),r.createElement(lt,null,r.createElement(Rm,null,!t&&a.length<=2&&r.createElement(Im,null)))},Am=(0,s.ZP)(ke).attrs({flexDirection:"column"}).withConfig({displayName:"Sidebar"})(["\n  padding-top: ",";\n  width: 4.5rem;\n  height: 100%;\n  background: ",";\n  gap: 1rem;\n  flex-shrink: 0;\n  justify-content: ",";\n  align-items: center;\n"],(({align:e})=>"top"===e?"0.5rem":"0"),(({theme:e})=>e.color.backgroundDarker),(({align:e})=>"top"===e?"flex-start":"flex-end")),Mm=(0,s.ZP)(yt).withConfig({displayName:"navigation__Navigation"})(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n\n  & > span {\n    margin-left: 0 !important;\n  }\n\n  & > :not(:first-child) {\n    margin-top: 0.3rem;\n  }\n"]);var Pm=n(61520),Lm=n(29155),Dm=n(92973),Bm=n(95416),zm=n(16836);const Fm=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],Hm=(e,t=0,n=1e3)=>e<n?`${((e,t=2)=>Math.round((e+Number.EPSILON)*10**t)/10**t)(e)} ${Fm[t]}`:Hm(e/n,t+1);var Um=n(36607);const Zm=(0,s.ZP)(li.e).withConfig({displayName:"file-status__CheckboxCircleIcon"})(["\n  color: ",";\n"],(({theme:e})=>e.color.green)),Vm=(0,s.ZP)(ke).withConfig({displayName:"file-status__StyledBox"})(["\n  gap: 0.5rem;\n  white-space: nowrap;\n"]),qm=({file:e})=>{const t=(e=>{if(!e.isUploading&&e.uploaded&&e.uploadResult)return{label:`Imported ${e.uploadResult.rowsImported.toLocaleString()} row${e.uploadResult.rowsImported>1||0===e.uploadResult.rowsImported?"s":""}`,type:Nt.SUCCESS,icon:r.createElement(Zm,{size:"16px"})};if(e.error)return{label:"Upload error",type:Nt.ERROR};if(e.isUploading)return{label:`Uploading: ${e.uploadProgress.toFixed(2)}%`,type:Nt.WARNING};switch(e.status){case I.EXISTS:return{label:"Table already exists",type:Nt.WARNING};case I.RESERVED_NAME:return{label:"Reserved table name",type:Nt.ERROR};case I.DOES_NOT_EXIST:return{label:"Ready to upload",type:Nt.SUCCESS}}})(e);return t?r.createElement(ke,{gap:"1rem",align:"flex-start",flexDirection:"column","data-hook":"import-file-status"},r.createElement(Um.C,{type:t.type},r.createElement(Vm,null,t.icon," ",t.label))):r.createElement(r.Fragment,null)};var $m=n(90342),jm=n(54830),Gm=n(30942),Wm=n(7218);const Qm=(0,s.ZP)(Wm.O).withConfig({displayName:"upload-settings-dialog__SettingsIcon"})(["\n  color: ",";\n"],(({theme:e})=>e.color.foreground)),Ym=(0,s.ZP)(ke).attrs({justifyContent:"space-between",gap:"2rem"}).withConfig({displayName:"upload-settings-dialog__Row"})(["\n  width: 100%;\n"]),Km=(0,s.ZP)(ke).attrs({gap:"0",flexDirection:"column"}).withConfig({displayName:"upload-settings-dialog__Items"})(["\n  height: 100%;\n"]),Xm=(0,s.ZP)(ke).attrs({gap:"0",flexDirection:"column"}).withConfig({displayName:"upload-settings-dialog__Inputs"})(["\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n"]),Jm=(0,s.ZP)(Ve.GroupItem).withConfig({displayName:"upload-settings-dialog__Option"})(["\n  width: 100%;\n\n  &:nth-child(even) {\n    background: #242531;\n  }\n"]),ep=s.ZP.div.withConfig({displayName:"upload-settings-dialog__InputWrapper"})(["\n  flex-shrink: 0;\n  width: 30%;\n"]),tp=({file:e,open:t,onOpenChange:n,onSubmit:a})=>{const{delimiter:o,overwrite:i,forceHeader:l,skipLev:s,atomicity:c,maxUncommitedRows:d}=e.settings,u={delimiter:o,overwrite:i,forceHeader:l,skipLev:s,atomicity:c,maxUncommitedRows:d},[m,p]=r.useState(u),g=[{type:"input",name:"maxUncommitedRows",label:"Maximum number of uncommited rows",placeholder:Jd.toString(),description:r.createElement(r.Fragment,null,"Set this parameter to determine the size of the commit batch based on the RAM size of the machine to avoid running out of memory during an import."),defaultValue:m.maxUncommitedRows},{type:"input",name:"delimiter",label:"Delimiter",placeholder:"Automatic",description:r.createElement(r.Fragment,null,"Delimiter character. When not set, import will try to detect the delimiter automatically. You can define the parameter here to disable auto-detection and allow single-line file import."),defaultValue:m.delimiter},{type:"select",name:"atomicity",label:"Atomicity",description:r.createElement(r.Fragment,null,"Behavior when an error is detected in the data.",r.createElement("br",null),r.createElement("strong",null,"Abort"),": the entire file will be skipped.",r.createElement("br",null),r.createElement("strong",null,"Skip row"),": the row is skipped.",r.createElement("br",null),r.createElement("strong",null,"Skip column"),": the column is skipped."),defaultValue:m.atomicity,options:[{label:"Skip column",value:"skipCol"},{label:"Skip row",value:"skipRow"},{label:"Abort import",value:"abort"}]},{type:"switch",name:"forceHeader",label:"Force header",description:r.createElement(r.Fragment,null,"When set to ",r.createElement("strong",null,"false"),", QuestDB will try to infer if the first line of the file is the header line.",r.createElement("br",null),"When set to ",r.createElement("strong",null,"true"),", QuestDB will expect that line to be the header line."),defaultValue:m.forceHeader},{type:"switch",name:"skipLev",label:"Skip line extra values",description:r.createElement(r.Fragment,null,"When set to ",r.createElement("strong",null,"true"),", the parser will ignore extra values. When set to ",r.createElement("strong",null,"false"),", the parser will ignore the entire line. An extra value is something in addition to what is defined by the header."),defaultValue:m.skipLev}];return r.createElement(Ve,{open:t,title:r.createElement(ke,null,r.createElement(Qm,{size:"20px"}),r.createElement(Pe,{color:"foreground"},"Settings for ",e.fileObject.name)),trigger:r.createElement(Vn.z,{skin:"secondary",prefixIcon:r.createElement(Wm.O,{size:"18px"}),onClick:()=>n(!0)},"Settings"),onDismiss:()=>{p(u),n(!1)},afterTitle:r.createElement(ke,{gap:"1rem"},r.createElement(Vn.z,{prefixIcon:r.createElement(Yu.W,{size:18}),skin:"secondary",onClick:()=>{p(u),n(!1)},type:"button"},"Dismiss"),r.createElement(Vn.z,{prefixIcon:r.createElement(Wm.O,{size:18}),skin:"success",onClick:()=>{a(m),n(!1)}},"Submit"))},r.createElement(Ve.ContentWrapper,null,r.createElement(Km,null,r.createElement(Xm,null,g.map((e=>r.createElement(Jm,{key:e.name},r.createElement(Ym,{key:e.name},r.createElement(ke,{gap:"1rem",flexDirection:"column",align:"flex-start",justifyContent:"flex-start"},r.createElement(Pe,{color:"foreground",weight:600},e.label),e.description&&r.createElement(Pe,{color:"gray2",size:"sm"},e.description)),r.createElement(ep,null,"input"===e.type&&r.createElement(Jn.I,{name:e.name,defaultValue:e.defaultValue,placeholder:e.placeholder,onChange:t=>p({...m,[e.name]:t.target.value})}),"select"===e.type&&r.createElement(sr.P,{name:e.name,defaultValue:e.defaultValue,onChange:t=>p({...m,[e.name]:t.target.value}),options:e.options}),"switch"===e.type&&r.createElement(Gm.r,{checked:e.defaultValue,onChange:t=>p({...m,[e.name]:t})}))))))))))},np=({file:e,onUpload:t,onRemove:n,onSettingsChange:a})=>{const[o,i]=(0,r.useState)(!1);return r.createElement(ke,{gap:"1rem",align:"center"},r.createElement(tp,{open:o,onOpenChange:i,onSubmit:a,file:e}),r.createElement(Vn.z,{disabled:e.isUploading,"data-hook":"import-upload-button",skin:"primary",prefixIcon:r.createElement(jm.C,{size:"18px"}),onClick:()=>t(e.id)},e.isUploading?"Uploading...":"Upload"),r.createElement(dt,{placement:"top",trigger:r.createElement(Vn.z,{disabled:e.isUploading,skin:"secondary",onClick:()=>{n(e.id)}},r.createElement(xe.x,{size:"18px"}))},r.createElement(xt,null,"Remove file from queue")))};var rp=n(3512);const ap=e=>{const t=e.length;if(t>127)return!1;if(["telemetry","telemetry_config"].includes(e))return!1;for(let n=0;n<t;n++)switch(e.charAt(n)){case".":if(0==n||n==t-1||"."==e.charAt(n-1))return!1;break;case"?":case",":case"'":case'"':case"\\":case"/":case":":case")":case"(":case"+":case"*":case"%":case"~":case"\0":case"":case"":case"":case"":case"":case"":case"":case"\b":case"\t":case"\v":case"\f":case"\r":case"\n":case"":case"":case"":case"0xfeff":return!1}return e.length>0&&" "!=e.charAt(0)&&" "!=e.charAt(t-1)},op=s.ZP.ul.withConfig({displayName:"rename-table-dialog__List"})(["\n  list-style-position: inside;\n  padding-left: 0;\n\n  li {\n    margin-bottom: 1rem;\n  }\n"]),ip=(0,s.ZP)(ho.V.Description).withConfig({displayName:"rename-table-dialog__StyledDescription"})(["\n  display: grid;\n  gap: 2rem;\n"]),lp=hr().object({name:hr().string().required().custom(((e,t)=>ap(e)?e:t.error("string.validTableName"))).messages({"string.empty":"Please enter a name","string.validTableName":"Invalid table name"})}),sp=({open:e,onOpenChange:t,onNameChange:n,file:a})=>{const o=a.table_name??a.fileObject.name;return r.createElement(ho.V.Root,{open:e},r.createElement(ho.V.Trigger,{asChild:!0},r.createElement(Ce.A,null,r.createElement(Vn.z,{skin:"transparent",prefixIcon:r.createElement(rp.I,{size:"14px"}),onClick:()=>t(a)},L(o,20)))),r.createElement(ho.V.Portal,null,r.createElement(Ce.A,null,r.createElement(ve.a,{primitive:ho.V.Overlay})),r.createElement(ho.V.Content,{onEscapeKeyDown:()=>t(void 0),onInteractOutside:()=>t(void 0)},r.createElement(gr,{name:"rename-table",defaultValues:{name:o},onSubmit:e=>{n(e.name),t(void 0)},validationSchema:lp},r.createElement(ho.V.Title,null,r.createElement(ke,null,r.createElement(rp.I,{size:20}),"Change table name")),r.createElement(ip,null,r.createElement(gr.Item,{name:"name",label:"Table name"},r.createElement(gr.Input,{name:"name"})),r.createElement(Pe,{color:"foreground"},r.createElement(op,null,r.createElement("li",null,"Max 127 characters"),r.createElement("li",null,"Must not contain dot at the beginning"),r.createElement("li",null,"Must not contain the following characters:"," ",r.createElement("strong",null,"? , ' \" \\ / : ) ( + * & ~ \r \n")),r.createElement("li",null,"No control characters and UTF-8 BOM (Byte Order Mark)"),r.createElement("li",null,"Cannot be named ",r.createElement("strong",null,"telemetry")," or"," ",r.createElement("strong",null,"telemetry_config"))))),r.createElement(ho.V.ActionButtons,null,r.createElement(ho.V.Close,{asChild:!0},r.createElement(Vn.z,{prefixIcon:r.createElement(Yu.W,{size:18}),skin:"secondary",onClick:()=>t(void 0)},"Dismiss")),r.createElement(ho.V.Close,{asChild:!0},r.createElement(Ce.A,null,r.createElement(gr.Submit,{prefixIcon:r.createElement(rp.I,{size:18}),variant:"success"},"Change"))))))))},cp=s.ZP.div.withConfig({displayName:"controls__Controls"})(["\n  display: grid;\n  grid-template-columns: var(--columns);\n  gap: 1rem;\n  width: 100%;\n  align-items: flex-end;\n  justify-items: center;\n"]),dp=({url:e,text:t,tooltipText:n="Documentation"})=>r.createElement(dt,{placement:"bottom",trigger:r.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},r.createElement(Vn.z,{skin:"transparent",type:"button"},r.createElement(Ot.d,{size:"14"}),t&&r.createElement("span",null,t)))},r.createElement(xt,null,n));function up(){return up=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},up.apply(this,arguments)}const mp=[{label:"AUTO",value:""},{label:"BINARY",value:"BINARY"},{label:"BOOLEAN",value:"BOOLEAN"},{label:"BYTE",value:"BYTE"},{label:"CHAR",value:"CHAR"},{label:"DATE",value:"DATE"},{label:"DOUBLE",value:"DOUBLE"},{label:"FLOAT",value:"FLOAT"},{label:"GEOHASH",value:"GEOHASH"},{label:"INT",value:"INT"},{label:"IPV4",value:"IPV4"},{label:"LONG",value:"LONG"},{label:"LONG256",value:"LONG256"},{label:"SHORT",value:"SHORT"},{label:"STRING",value:"STRING"},{label:"VARCHAR",value:"VARCHAR"},{label:"SYMBOL",value:"SYMBOL"},{label:"TIMESTAMP",value:"TIMESTAMP"},{label:"TIMESTAMP_NS",value:"TIMESTAMP_NS"},{label:"UUID",value:"UUID"}],pp=(0,s.ZP)(Pe).attrs({color:"foreground"}).withConfig({displayName:"column__IndexNumber"})([""]),gp=s.ZP.div.withConfig({displayName:"column__Root"})(["\n  display: grid;\n  gap: 1rem;\n  grid-template-columns: 40px auto;\n  padding: 2rem;\n  ",";\n"],(({odd:e})=>e&&"background-color: #242531;")),fp=(0,s.ZP)(ke).attrs({gap:"0",align:"center",justifyContent:"center"}).withConfig({displayName:"column__Index"})(["\n  width: 4rem;\n  height: 3rem;\n"]),hp=(0,s.ZP)(cp).withConfig({displayName:"column__TimestampControls"})(["\n  justify-items: flex-start;\n"]),bp=({action:e,disabled:t,column:n,index:a,onSetTimestamp:o,onFocus:i,timestamp:l,lastFocusedIndex:s})=>{const[c,d]=(0,r.useState)(n.name);return n?r.createElement(gp,{key:n.name,odd:a%2!=0,disabled:t,"data-hook":`table-schema-dialog-column-${a}`,onFocus:()=>i(a)},r.createElement(fp,null,r.createElement(pp,{color:"foreground"},a+1)),r.createElement(ke,{flexDirection:"column",gap:"1rem",align:"stretch"},r.createElement(cp,null,r.createElement(gr.Item,{name:`schemaColumns.${a}.name`},r.createElement(gr.Input,up({placeholder:"Name",disabled:t,defaultValue:n.name,onChange:e=>d(e.target.value),name:`schemaColumns.${a}.name`,autoComplete:"off",required:!0},s===a&&{autoFocus:!0}))),r.createElement(gr.Item,{name:`schemaColumns.${a}.type`},r.createElement(gr.Select,{defaultValue:"import"===e?n.type:"VARCHAR",name:`schemaColumns.${a}.type`,options:mp.filter((t=>""!==t.value||"add"!==e))}))),nu(n.type)&&r.createElement(ke,{flexDirection:"column",gap:"1rem"},r.createElement(hp,null,"import"===e&&r.createElement(gr.Item,{name:`schemaColumns.${a}.pattern`},r.createElement(gr.Input,{name:`schemaColumns.${a}.pattern`,placeholder:"Dataset pattern",defaultValue:""!==n.pattern?n.pattern:ru(n.type),required:!0})),r.createElement(Xe,{icon:r.createElement(Vn.z,{disabled:""===c,"data-hook":`table-schema-dialog-column-${a}-designated-button`,skin:""!==l&&""!==n.name&&l===n.name?"success":"secondary",onClick:()=>o(n.name),type:"button",prefixIcon:r.createElement("input",{type:"checkbox",checked:""!==l&&""!==n.name&&l===n.name,onChange:()=>{}})},"Designated"),tooltip:"Mark this column as a designated timestamp",placement:"top"})),"import"===e&&r.createElement(Pe,{color:"gray2"},"Example: ",Xd,r.createElement("br",null),r.createElement(dp,{url:"https://questdb.io/docs/reference/function/date-time/#timestamp-format",text:"Timestamp format docs",tooltipText:"Timestamp format documentation"}))),"GEOHASH"===n.type&&r.createElement(cp,null,r.createElement(gr.Item,{name:`schemaColumns.${a}.precision`},r.createElement(gr.Input,{name:`schemaColumns.${a}.precision`,placeholder:"Precision",required:!0})),r.createElement(dp,{url:"https://questdb.io/docs/concept/geohashes/#specifying-geohash-precision",text:"Docs",tooltipText:"GEOHASH type documentation"})))):null},yp=(0,s.ZP)(ke).attrs({align:"center",gap:"1.5rem"}).withConfig({displayName:"columns__Disclaimer"})(["\n  width: 100%;\n  padding: 2rem;\n  color: ",";\n"],(({theme:e,isEditLocked:t})=>e.color[t?"orange":"foreground"])),Ep=s.ZP.div.withConfig({displayName:"columns__SchemaRoot"})(["\n  width: 100%;\n  height: 100%;\n"]),wp=(0,s.ZP)(Ve.GroupItem).attrs({direction:"column"}).withConfig({displayName:"columns__Error"})(["\n  align-items: center;\n"]),Cp=({action:e,isEditLocked:t,onColumnFocus:n,lastFocusedIndex:a})=>{const{formState:o,getValues:i,setValue:l,watch:s}=(0,jn.Gc)(),c=s("timestamp"),d=i().schemaColumns,u=(0,r.useCallback)((o=>{const i=s(`schemaColumns.${o}`);return r.createElement(r.Fragment,null,r.createElement(bp,{action:e,column:i,disabled:t,index:o,lastFocusedIndex:a,onFocus:n,onSetTimestamp:e=>{l("timestamp",c===e?"":e)},timestamp:c}))}),[c,d.length,d.map((e=>e.type)).join(",")]),m=o.errors.schemaColumns;return r.createElement(r.Fragment,null,"import"===e&&!t&&r.createElement(yp,{isEditLocked:!1},r.createElement(Ot.d,{size:"20px"}),r.createElement(Pe,{color:"foreground"},"Column names have to match the CSV header.",r.createElement("br",null),"Order is not important.")),m&&(Array.isArray(m)?m:[m]).map(((e,t)=>r.createElement(wp,{key:t},r.createElement(Pe,{color:"red"},e.message)))),r.createElement(Ep,null,d.length>0&&r.createElement(kt,{itemContent:u,totalCount:d.length,followOutput:!0})),r.createElement(gr.Input,{name:"timestamp",hidden:!0}))};var vp=n(98501),xp=n(72506),_p=n(69968);const Sp=({action:e,ctaText:t,lastFocusedIndex:n,onAdded:a,isEditLocked:o})=>{const i={name:"",type:"import"===e?"":"VARCHAR",pattern:"",precision:""},{insert:l}=(0,jn.Dq)({name:"schemaColumns"}),{getValues:s,setValue:c}=(0,jn.Gc)(),d=s().schemaColumns;return r.createElement(ke,{gap:"1rem"},!o&&r.createElement(r.Fragment,null,r.createElement(dt,{trigger:r.createElement(Vn.z,{disabled:0===d.length||void 0===n,skin:"secondary",type:"button",onClick:()=>{c("schemaColumns",d.filter(((e,t)=>t!==n))),a(void 0)}},r.createElement(vp.X,{size:"18px"})),placement:"bottom"},r.createElement(xt,null,void 0!==n&&`Remove column ${n+1}`)),r.createElement(dt,{trigger:r.createElement(Vn.z,{disabled:0===d.length||void 0===n,skin:"secondary",type:"button",onClick:()=>{const e=void 0!==n?n:d.length;l(e,i),a(e)}},r.createElement(xp.v,{size:"20px"})),placement:"bottom"},r.createElement(xt,null,void 0!==n?`Insert column above ${n+1}`:"Insert column")),r.createElement(dt,{trigger:r.createElement(Vn.z,{skin:"secondary",type:"button",onClick:()=>{const e=void 0!==n?n+1:d.length;l(e,i),a(e)}},r.createElement(_p.D,{size:"20px"})),placement:"bottom"},r.createElement(xt,null,void 0!==n?`Insert column below ${n+1}`:"Insert column"))),r.createElement(gr.Submit,{prefixIcon:r.createElement(ys.i,{size:18}),variant:"success"},t))},kp=(0,s.ZP)(Ve.ContentWrapper).withConfig({displayName:"dialog__StyledContentWrapper"})(["\n  --columns: auto 140px; /* magic numbers to fit input, type dropdown and remove button nicely */\n"]),Tp=(0,s.ZP)(ke).attrs({gap:"0",flexDirection:"column"}).withConfig({displayName:"dialog__Items"})(["\n  height: 100%;\n"]),Np=(0,s.ZP)(ke).attrs({gap:"0",flexDirection:"column"}).withConfig({displayName:"dialog__Inputs"})(["\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n"]),Ip=s.ZP.div.withConfig({displayName:"dialog__Controls"})(["\n  display: grid;\n  grid-template-columns: ",";\n  gap: 1rem;\n  align-items: flex-start;\n  width: 100%;\n"],(({action:e})=>"add"===e?"auto 120px 120px":"1fr")),Rp=["NONE","HOUR","DAY","MONTH","YEAR"],Op=({action:e,name:t,schema:n,partitionBy:a,timestamp:i,ttlValue:l,ttlUnit:s,open:c,isEditLocked:d,hasWalSetting:u,walEnabled:m,onOpenChange:p,onSchemaChange:g,trigger:f,tables:h,ctaText:b})=>{const y={name:t,schemaColumns:n,partitionBy:a,timestamp:i,ttlValue:l,ttlUnit:s,walEnabled:u?"false":void 0},[E,w]=(0,r.useState)(y),[C,v]=(0,r.useState)(y),[x,_]=(0,r.useState)(),S=(0,o.I0)(),k=()=>{w({name:t,schemaColumns:n,partitionBy:a,timestamp:i,ttlValue:l,ttlUnit:s,walEnabled:u&&void 0!==m?m.toString():void 0})},T=hr().object({name:hr().string().required().custom(((t,n)=>ap(t)?"add"===e&&h?.find((e=>e.table_name.toLowerCase()===t.toLowerCase()))?n.error("string.uniqueTableName"):t:n.error("string.validTableName"))).messages({"string.empty":"Please enter a name","string.validTableName":"Invalid table name","string.uniqueTableName":"Table name must be unique"}),partitionBy:hr().string().required().custom(((e,t)=>"NONE"!==e&&""===C.timestamp?t.error("string.timestampRequired"):e)).messages({"string.timestampRequired":"Designated timestamp is required when partitioning is set to anything other than NONE"}),ttlValue:hr().number(),ttlUnit:hr().string(),walEnabled:hr().any().allow("true","false").empty(),timestamp:hr().string().allow(""),schemaColumns:hr().array().custom(((t,n)=>"add"===e&&0===t.length?n.error("array.required"):t)).unique(((e,t)=>e.name.trim().toLowerCase()===t.name.trim().toLowerCase())).messages({"array.required":"Please add at least one column","array.unique":"Column names must be unique"})});(0,r.useEffect)((()=>{n&&k()}),[n]),(0,r.useEffect)((()=>{c&&_(void 0)}),[c]);const N=E.schemaColumns.length;return r.createElement(Ve,{mode:"add"===e?"side":"modal",open:c,trigger:f??r.createElement(Vn.z,{"data-hook":"table-schema-dialog-trigger",skin:N>0?"transparent":"secondary",prefixIcon:N>0?r.createElement(rp.I,{size:"18px"}):r.createElement(ys.i,{size:"18px"}),onClick:()=>p(t)},N>0?`${N} col${N>1?"s":""}`:"Add"),onDismiss:()=>{k(),p(void 0)},onOpenChange:t=>{t&&"add"===e&&S(jt.setActiveSidebar(t?"create":void 0))}},r.createElement(kp,{mode:"add"===e?"side":"modal","data-hook":"create-table-panel"},r.createElement(gr,{name:"table-schema",defaultValues:E,onSubmit:e=>{g(e),p(void 0)},onChange:e=>v(e),validationSchema:T},r.createElement(Be.Header,{title:""!==t?`Table schema for ${t}`:"Create table",afterTitle:r.createElement(Sp,{ctaText:b,action:e,isEditLocked:d,lastFocusedIndex:x,onAdded:_})}),r.createElement(Tp,null,r.createElement(Np,null,r.createElement(Ve.GroupItem,{direction:"column"},r.createElement(Ip,{action:e},"add"===e&&r.createElement(gr.Item,{name:"name",label:"Table name"},r.createElement(gr.Input,{name:"name",autoComplete:"off",autoFocus:!0})),r.createElement(ke,{align:"flex-end"},r.createElement(gr.Item,{name:"partitionBy",label:r.createElement(dt,{trigger:r.createElement(ke,{align:"center",justifyContent:"center",gap:"0.5rem"},r.createElement(Md.Z,{size:"14"}),r.createElement("span",null,"Partition by")),placement:"bottom"},r.createElement(xt,null,"Splits data into smaller chunks by intervals of time in order to improve the performance and scalability of the database system."))},r.createElement(gr.Select,{name:"partitionBy",options:Rp.map((e=>({label:e,value:e})))}))),u&&r.createElement(ke,{align:"flex-end"},r.createElement(gr.Item,{name:"walEnabled",label:r.createElement(dt,{trigger:r.createElement(ke,{align:"center",justifyContent:"center",gap:"0.5rem"},r.createElement(Md.Z,{size:"14"}),r.createElement("span",null,"WAL")),placement:"bottom"},r.createElement(xt,null,"WAL (Write-Ahead Log) allows concurrent data ingestion and modifications via multiple interfaces as well as table schema changes.","NONE"===C.partitionBy&&r.createElement(r.Fragment,null,r.createElement("br",null),r.createElement("br",null),"To enable WAL, set `Partition by` to a value other than NONE.")))},r.createElement(gr.Select,{name:"walEnabled",disabled:"NONE"===C.partitionBy,options:[{label:"Enabled",value:"true"},{label:"Disabled",value:"false"}]}))),"import"===e&&r.createElement(Pe,{color:"gray2"},"If you're changing the partitioning strategy, you'll need to set `Write mode` to `Overwrite` in Settings."))),r.createElement(Ve.GroupHeader,null,r.createElement(Pe,{color:"foreground"},"Columns")),r.createElement(Cp,{action:e,isEditLocked:d,onColumnFocus:_,lastFocusedIndex:x}))))))};var Ap=n(82589);const Mp=(0,s.ZP)(Ap.o).withConfig({displayName:"upload-result-dialog__SearchIcon"})(["\n  color: ",";\n"],(({theme:e})=>e.color.foreground)),Pp=(0,s.ZP)(zm.i).withConfig({displayName:"upload-result-dialog__StyledTable"})(["\n  width: 100%;\n  table-layout: fixed;\n  border-collapse: separate;\n  border-spacing: 0 2rem;\n  padding: 0 2rem;\n\n  th {\n    padding: 0 1.5rem;\n    color: ",";\n  }\n\n  td {\n    padding: 1.5rem;\n  }\n\n  tbody td {\n    background: #242531;\n\n    &:first-child {\n      border-top-left-radius: ",";\n      border-bottom-left-radius: ",";\n    }\n\n    &:last-child {\n      border-top-right-radius: ",";\n      border-bottom-right-radius: ",";\n    }\n  }\n"],(({theme:e})=>e.color.foreground),(({theme:e})=>e.borderRadius),(({theme:e})=>e.borderRadius),(({theme:e})=>e.borderRadius),(({theme:e})=>e.borderRadius)),Lp=(0,s.ZP)(ke).attrs({justifyContent:"space-between",gap:"2rem"}).withConfig({displayName:"upload-result-dialog__Stat"})(["\n  width: 100%;\n"]),Dp=(0,s.ZP)(Vn.z).withConfig({displayName:"upload-result-dialog__DetailsButton"})(["\n  position: relative;\n"]),Bp=s.ZP.span.withConfig({displayName:"upload-result-dialog__NotificationCircle"})(["\n  position: absolute;\n  right: -0.4rem;\n  top: -0.4rem;\n  width: 0.8rem;\n  height: 0.8rem;\n  border-radius: 50%;\n  background-color: ",";\n"],(({theme:e})=>e.color.red)),zp=({file:e})=>{const t=e.table_name??e.fileObject.name,n=[{label:"Header forced",value:e.uploadResult?.header.toString()},{label:"Table name",value:e.uploadResult?.location},{label:"Imported rows",value:e.uploadResult?.rowsImported.toLocaleString()},{label:"Rejected rows",value:e.uploadResult?.rowsRejected.toLocaleString()}],a=e.uploadResult?.columns.reduce(((e,t)=>e+t.errors),0)??0;return r.createElement(Ve,{title:r.createElement(ke,null,r.createElement(Mp,{size:20}),r.createElement(Pe,{color:"foreground"},"Import details for ",t)),trigger:r.createElement(Dp,{skin:"success",prefixIcon:r.createElement(Ap.o,{size:"14px"})},a>0&&r.createElement(Bp,null),"Details"),withCloseButton:!0},r.createElement(ke,{flexDirection:"column",gap:"0"},n.map((e=>r.createElement(Ve.GroupItem,{key:e.label,direction:"column"},r.createElement(Lp,null,r.createElement(Pe,{color:"gray2"},e.label),r.createElement(Pe,{color:"foreground"},e.value))))),r.createElement(Ve.GroupHeader,null,r.createElement(Pe,{color:"foreground"},"Table schema")),r.createElement(Pp,{columns:[{header:"Name",render:({data:e})=>r.createElement(Pe,{color:"foreground"},e.name)},{header:"Type",align:"flex-end",render:({data:e})=>r.createElement(Pe,{color:"foreground"},e.type)},{header:"Size",width:"100px",align:"flex-end",render:({data:e})=>r.createElement(Pe,{color:"foreground"},e.size.toLocaleString())},{header:"Errors",width:"100px",align:"flex-end",render:({data:e})=>r.createElement(Pe,{color:e.errors>0?"red":"foreground"},e.errors.toLocaleString())}],rows:e.uploadResult?.columns??[]})))},Fp=(0,s.ZP)(ke).attrs({flexDirection:"column"}).withConfig({displayName:"dropbox__Root"})(["\n  flex: 1;\n  width: 100%;\n  padding: 4rem 0 0;\n  gap: 2rem;\n  background: ",";\n  border: 3px dashed ",";\n  box-shadow: inset 0 0 10px 0 #1b1c23;\n  transition: all 0.15s ease-in-out;\n"],(({theme:e})=>e.color.backgroundLighter),(({isDragging:e})=>e?"#7f839b":"#333543")),Hp=({files:e,onFilesDropped:t,dialogOpen:n,render:a})=>{const[o,i]=(0,r.useState)(!1),[l,s]=(0,r.useState)([]),c=(0,r.useRef)(null),d=(0,r.useRef)(e.map((e=>e.table_name))),u=e=>{e.preventDefault(),e.stopPropagation(),i("dragenter"===e.type||"dragover"===e.type)},m=e=>{const n=((e,t)=>Array.from(e).filter((e=>t.includes(e.name))))(e,d.current);s(n),t(Array.from(e).filter((e=>!n.includes(e)))),c.current?.setAttribute("value","")},p=e=>{const t=e,n=t.clipboardData?.files;n&&m(n)};return(0,r.useEffect)((()=>()=>{window.removeEventListener("paste",p)}),[]),(0,r.useEffect)((()=>{n?window.removeEventListener("paste",p):window.addEventListener("paste",p)}),[n]),(0,r.useEffect)((()=>{d.current=e.map((e=>e.table_name))}),[e]),r.createElement(Fp,{onDragEnter:u,onDragOver:u,onDragLeave:u,onDrop:e=>{e.preventDefault(),e.stopPropagation(),i(!1),m(e.dataTransfer.files)},isDragging:o,"data-hook":"import-dropbox"},a({duplicates:l,addToQueue:m}))},Up=(0,s.ZP)(ke).attrs({flexDirection:"column",gap:"2rem"}).withConfig({displayName:"files-to-upload__Root"})(["\n  padding: 2rem;\n"]),Zp=(0,s.ZP)(zm.i).withConfig({displayName:"files-to-upload__StyledTable"})(["\n  width: 100%;\n  table-layout: fixed;\n  border-collapse: separate;\n  border-spacing: 0 2rem;\n\n  th {\n    padding: 0 1.5rem;\n  }\n\n  td {\n    padding: 1.5rem;\n  }\n\n  tbody td {\n    background: #242531;\n\n    &:first-child {\n      border-top-left-radius: ",";\n      border-bottom-left-radius: ",";\n    }\n\n    &:last-child {\n      border-top-right-radius: ",";\n      border-bottom-right-radius: ",";\n    }\n  }\n"],(({theme:e})=>e.borderRadius),(({theme:e})=>e.borderRadius),(({theme:e})=>e.borderRadius),(({theme:e})=>e.borderRadius)),Vp=(0,s.ZP)(ke).attrs({justifyContent:"center"}).withConfig({displayName:"files-to-upload__EmptyState"})(["\n  width: 100%;\n  background: #242531;\n  border-radius: ",";\n  padding: 1rem;\n"],(({theme:e})=>e.borderRadius)),qp=(0,s.ZP)(ke).withConfig({displayName:"files-to-upload__FileTextBox"})(["\n  padding: 0 1.1rem;\n"]),$p=s.ZP.span.withConfig({displayName:"files-to-upload__BrowseTextLink"})(["\n  text-decoration: underline;\n  cursor: pointer;\n\n  &:hover {\n    text-decoration: none;\n  }\n"]),jp=({files:e,onDialogToggle:t,onFileRemove:n,onFilePropertyChange:a,onFileUpload:o,onFilesDropped:i,onViewData:l,dialogOpen:s,ownedByList:c})=>{const d=(0,r.useRef)(null),[u,m]=r.useState(),[p,g]=r.useState();(0,r.useEffect)((()=>{t(void 0!==u||void 0!==p)}),[u,p]);const f=[];return f.push({header:"File",align:"flex-start",...e.length>0&&{width:"400px"},render:({data:e})=>{const t=r.createElement(qp,{align:"center",gap:"1rem"},r.createElement(Pe,{color:"foreground"},L(e.fileObject.name,20)),r.createElement(Pe,{color:"gray2",size:"sm"},Hm(e.fileObject.size)));return r.createElement(ke,{align:"center",gap:"1rem"},r.createElement($m.M,{size:"46px"}),r.createElement(ke,{gap:"1rem",align:"flex-4tart",flexDirection:"column"},e.fileObject.name.length>20&&r.createElement(dt,{placement:"top",trigger:t},r.createElement(xt,null,e.fileObject.name)),e.fileObject.name.length<=20&&t,r.createElement(ke,{gap:"1rem",align:"center"},r.createElement(qm,{file:e}),!e.isUploading&&void 0!==e.uploadResult&&r.createElement(r.Fragment,null,r.createElement(zp,{file:e}),r.createElement(Vn.z,{skin:"secondary",prefixIcon:r.createElement(Pm.r,{size:"18px"}),onClick:()=>l(e.uploadResult)},"Result"))),e.uploadResult&&e.uploadResult.rowsRejected>0||e.error&&r.createElement(qp,{flexDirection:"column",gap:"1rem",align:"flex-start"},e.uploadResult&&e.uploadResult.rowsRejected>0&&r.createElement(Pe,{color:"orange",size:"sm"},e.uploadResult.rowsRejected.toLocaleString()," ","row",e.uploadResult.rowsRejected>1?"s":""," ","rejected"),e.error&&r.createElement(Pe,{color:"red",size:"sm"},e.error))))}},{header:"Table name",align:"flex-end",width:"180px",render:({data:e})=>r.createElement(sp,{open:u===e.id,onOpenChange:e=>m(e?.id),onNameChange:t=>{a(e.id,{table_name:t})},file:e})}),c&&c.length>0&&f.push({header:r.createElement(dt,{placement:"top",trigger:r.createElement(ke,{align:"center",gap:"0.5rem","data-hook":"import-table-column-owner"},"Table owner",r.createElement(Ot.d,{size:"16px"}))},r.createElement(xt,null,"Required for external (non-database) users.")),align:"center",width:"150px",render:({data:e})=>r.createElement(sr.P,{name:"table_owner",defaultValue:c[0]??"",onChange:t=>a(e.id,{table_owner:t.target.value}),options:Object.values(c).map((e=>({label:e,value:e})))})}),f.push({header:r.createElement(dt,{placement:"top",trigger:r.createElement(ke,{align:"center",gap:"0.5rem","data-hook":"import-table-column-schema"},"Schema",r.createElement(Ot.d,{size:"16px"}))},r.createElement(xt,null,"Optional. By default, QuestDB will infer schema from the CSV file structure")),align:"center",width:"150px",render:({data:e})=>{const t=e.table_name??e.fileObject.name;return r.createElement(Op,{action:"import",open:p===e.id,onOpenChange:t=>g(t?e.id:void 0),onSchemaChange:t=>{a(e.id,{schema:t.schemaColumns,partitionBy:t.partitionBy,timestamp:t.timestamp})},name:t,schema:e.schema,partitionBy:e.partitionBy,ttlValue:e.ttlValue,ttlUnit:e.ttlUnit,timestamp:e.timestamp,isEditLocked:e.exists&&e.table_name===e.fileObject.name,hasWalSetting:!1,ctaText:"Save"})}},{header:r.createElement(dt,{placement:"top",trigger:r.createElement(ke,{align:"center",gap:"0.5rem"},"Write mode",r.createElement(Ot.d,{size:"16px"}))},r.createElement(xt,null,r.createElement("strong",null,"Append"),": data will be appended to the set.",r.createElement("br",null),r.createElement("strong",null,"Overwrite"),": any existing data or structure will be overwritten. Required for partitioning and timestamp related changes.")),align:"center",width:"150px",render:({data:e})=>r.createElement(sr.P,{name:"overwrite",defaultValue:e.settings.overwrite?"true":"false",onChange:t=>a(e.id,{settings:{...e.settings,overwrite:"true"===t.target.value}}),options:[{label:"Append",value:"false"},{label:"Overwrite",value:"true"}]})},{align:"flex-end",width:"300px",render:({data:e})=>r.createElement(np,{file:e,onUpload:o,onRemove:n,onSettingsChange:t=>{a(e.id,{settings:t})}})}),r.createElement(Hp,{files:e,onFilesDropped:i,dialogOpen:s,render:({duplicates:t,addToQueue:n})=>r.createElement(Up,null,r.createElement(_m.X,{level:3},"Upload queue"),r.createElement("input",{type:"file",id:"file",onChange:e=>{null!==e.target.files&&n(e.target.files)},multiple:!0,ref:d,style:{display:"none"},value:""}),r.createElement(Pe,{color:"foreground"},"You can drag and drop more files or"," ",r.createElement($p,{onClick:()=>{d.current?.click()}},"browse from disk")),t.length>0&&r.createElement(Pe,{color:"red"},"File",t.length>1?"s":""," already added to queue:"," ",t.map((e=>e.name)).join(", "),". Change target table name and try again."),r.createElement(Zp,{columns:f,rows:e}),0===e.length&&r.createElement(Vp,null,r.createElement(Pe,{color:"gray2",align:"center"},"No files in queue")))})};var Gp=n(23167);const Wp=(0,s.ZP)(ke).attrs({flexDirection:"column",gap:"2rem"}).withConfig({displayName:"upload__Actions"})(["\n  margin: auto;\n"]),Qp=s.ZP.div.withConfig({displayName:"upload__Info"})(["\n  margin-top: 1rem;\n  padding: 2rem;\n  background: ",";\n  border-radius: ",";\n  text-align: center;\n"],(({theme:e})=>e.color.backgroundDarker),(({theme:e})=>e.borderRadius)),Yp=(0,s.ZP)(Rr.x).withConfig({displayName:"upload__InfoText"})(["\n  line-height: 1.75;\n  color: #8b8fa7;\n\n  a {\n    color: ",";\n  }\n"],(({theme:e})=>e.color.foreground)),Kp=()=>r.createElement("a",{href:"https://questdb.io/docs/guides/import-csv/#import-csv-via-copy-sql",target:"_blank",rel:"noopener noreferrer"},"COPY"),Xp=({files:e,onFilesDropped:t,dialogOpen:n})=>{const{quest:a}=(0,r.useContext)(Jr),[o,i]=(0,r.useState)(!1),l=(0,r.useRef)(null);return(0,r.useEffect)((()=>{(async()=>{try{const e=await a.query("(show parameters) where property_path ilike 'cairo.sql.copy.root'");"dql"===e.type&&e.count>0&&i(null!==e.data[0].value&&"null"!==e.data[0].value)}catch(e){return}})()}),[]),r.createElement(Hp,{files:e,onFilesDropped:t,dialogOpen:n,render:({duplicates:e,addToQueue:t})=>r.createElement(r.Fragment,null,r.createElement(Wp,null,r.createElement("img",{alt:"File upload icon",width:"60",height:"80",src:"assets/upload.svg"}),r.createElement(_m.X,{level:3},"Drag CSV files here or paste from clipboard"),r.createElement("input",{type:"file",id:"file",onChange:e=>{null!==e.target.files&&t(e.target.files)},multiple:!0,ref:l,style:{display:"none"},value:""}),r.createElement(Vn.z,{onClick:()=>{l.current?.click()},prefixIcon:r.createElement(Gp.L,{size:"18px"}),skin:"secondary","data-hook":"import-browse-from-disk"},"Browse from disk"),e.length>0&&r.createElement(Rr.x,{color:"red"},"File",e.length>1?"s":""," already added to queue:"," ",e.map((e=>e.name)).join(", "),". Change target table name and try again."),r.createElement(Qp,null,o?r.createElement(Yp,null,"Suitable for small batches of CSV file upload.",r.createElement("br",null),"For database migrations, we recommend the ",r.createElement(Kp,null)," ","command."):r.createElement(Yp,null,"Note: COPY SQL is not available for CSV Import on this database. Refer ",r.createElement(Kp,null)," to enable it."))))})},Jp=(0,s.ZP)(ke).attrs({gap:"4rem",flexDirection:"column"}).withConfig({displayName:"ImportCSVFiles__Root"})(["\n  flex: 1;\n"]),eg=({onViewData:e,onUpload:t})=>{const{quest:n}=(0,r.useContext)(Jr),[a,i]=(0,r.useState)([]),[l,s]=(0,r.useState)(!1),c=(0,o.v9)(Tn.query.getTables),d=(0,r.useRef)(null),u=(e=>{const[t,n]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{const t=new IntersectionObserver((([e])=>n(e.isIntersecting)));return e.current&&t.observe(e.current),()=>{t.disconnect()}}),[e]),t})(d),[m,p]=(0,r.useState)("upload"),[g,f]=(0,r.useState)([]);(0,r.useEffect)((()=>{(async()=>{if("EE"===fn(yn.RELEASE_TYPE))try{let e=[];const t=await n.query("select current_user()");if("dql"===t.type&&t.count>0){const r=Object.values(t.data[0])[0];if(r){M.isSSOAuthenticated()||e.push(r);const t=await n.query(`show groups '${r}'`);if("dql"===t.type&&t.count>0){const n=t.data.map((e=>Object.values(e)[0]));e=e.concat(n)}}}f(e)}catch(e){return}})()}),[]);const h=(e,t)=>{i((n=>n.map((n=>n.id===e?{...n,...t}:n))))},b=(e,t)=>{h(e.id,{isUploading:t})},y=async e=>{const t=await(async e=>await Promise.all(e.map((async e=>{const t=await n.checkCSVFile(e.name),r=t.status===I.EXISTS?await(async()=>{const t=await n.showColumns(e.name);return t&&t.type===T.DQL?t.data.map((e=>({name:e.column,type:ou(e.type),pattern:ru(e.type),precision:eu(e.type)?au(e.type):""}))):[]})():[],a=t.status===I.EXISTS&&c?await(async()=>{const t=c.find((t=>t.table_name===e.name));return t?.partitionBy??"NONE"})():"NONE",o=t.status===I.EXISTS&&c?await(async()=>{const t=c.find((t=>t.table_name===e.name));return t?.ttlValue??0})():0,i=t.status===I.EXISTS&&c?await(async()=>{const t=c.find((t=>t.table_name===e.name));return t?.ttlUnit??"HOURS"})():"HOURS",l=t.status===I.EXISTS&&c?await(async()=>{const t=c.find((t=>t.table_name===e.name));return t?.designatedTimestamp??""})():"";return{id:su(),fileObject:e,table_name:e.name,table_owner:g[0],status:t.status,exists:t.status===I.EXISTS,schema:r,partitionBy:a,ttlValue:o,ttlUnit:i,timestamp:l,settings:{forceHeader:!1,overwrite:!1,skipLev:!1,delimiter:"",atomicity:"skipCol",maxUncommitedRows:Jd},isUploading:!1,uploaded:!1,uploadResult:void 0,uploadProgress:0}}))))(e);i((e=>[...e,...t])),p("list")};return(0,r.useEffect)((()=>{u&&(async()=>{const e=await Promise.all(a.map((async e=>{const t=await n.checkCSVFile(e.table_name);return{...e,status:t.status}})));i(e)})()}),[u]),r.createElement(Jp,{ref:d},"upload"===m&&r.createElement(Xp,{files:a,onFilesDropped:y,dialogOpen:l}),"list"===m&&r.createElement(jp,{dialogOpen:l,files:a,onViewData:e,onFilesDropped:y,onDialogToggle:s,ownedByList:g,onFileUpload:async e=>{const r=a.find((t=>t.id===e));if(!r.isUploading){b(r,!0);try{const e=await n.uploadCSVFile({file:r.fileObject,name:r.table_name,owner:r.table_owner,settings:r.settings,schema:r.schema.map(iu),partitionBy:r.partitionBy,timestamp:r.timestamp,onProgress:e=>{h(r.id,{uploadProgress:e})}});h(r.id,{uploaded:"OK"===e.status,uploadResult:"OK"===e.status?e:void 0,schema:"OK"===e.status?e.columns.map((e=>{const t=r.schema.find((t=>t.name===e.name));return{...(n=e,a=["name"],a.reduce(((e,t)=>(t in n&&(e[t]=n[t]),e)),{})),type:ou(e.type),pattern:nu(e.type)?t?.pattern?t?.pattern:ru(e.type):"",precision:eu(e.type)?au(e.type):void 0};var n,a})):r.schema,error:"OK"===e.status?void 0:e.status}),b(r,!1),t(e)}catch(e){b(r,!1),h(r.id,{uploaded:!1,uploadResult:void 0,uploadProgress:0,error:"Upload error"})}}},onFileRemove:e=>{const t=a.find((t=>t.id===e));i(a.filter((e=>e.fileObject.name!==t.fileObject.name)))},onFilePropertyChange:async(e,t)=>{const r=await Promise.all(a.map((async r=>{if(r.id===e){const e=t.table_name?await n.checkCSVFile(t.table_name):await Promise.resolve({status:r.status});return{...r,...t,status:e.status,error:t.table_name?void 0:r.error}}return r})));i(r)}}))},tg=()=>r.createElement(lt,null,r.createElement(it,null,r.createElement(eg,{onUpload:e=>{O.publish(A.MSG_QUERY_SCHEMA)},onViewData:e=>{"OK"===e.status&&(O.publish(A.MSG_QUERY_SCHEMA),O.publish(A.MSG_QUERY_FIND_N_EXEC,{query:`"${e.location}"`,options:{appendAt:"end"}}))}})));var ng=n(9077);const rg=({size:e})=>r.createElement("svg",{width:e,height:e,viewBox:"0 0 26 26",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M25 22.3704H1V24.1481H25V22.3704Z",fill:"currentColor"}),r.createElement("path",{d:"M1 19.2593V21.037H25V19.7037L21.8889 13.4815H16.1111V16.5926H9.88889V13.4815H4.11111L1 19.2593Z",fill:"currentColor"}),r.createElement("path",{d:"M13 1.92593L6.33337 8.59259H11.2223V14.8148H14.3334V8.59259H19.6667L13 1.92593Z",fill:"currentColor"}));class ag{static async searchInSingleBuffer(e,t,n={},r,a,o=1e4){const{caseSensitive:i=!1,wholeWord:l=!1,useRegex:s=!1}=n;if("number"!=typeof e.id)return[];const c=[];try{if(r?.aborted)throw new Do;const n=await this.findTitleMatches(e.label,t,{caseSensitive:i,wholeWord:l,useRegex:s},a);if(r?.aborted)throw new Do;for(const t of n){if(c.length>=o)break;c.push(this.createTitleMatch(e,t.start,t.end))}if(c.length<o&&e.value){const n=o-c.length,d=await this.searchInBuffer(e,t,{caseSensitive:i,wholeWord:l,useRegex:s},n,a);if(r?.aborted)throw new Do;c.push(...d)}return c}catch(e){if(e instanceof Do)throw e;throw e instanceof Lo&&(e.partialSearchMatches&&c.push(...e.partialSearchMatches),e.partialSearchMatches=c),e}}static async*searchInBuffers(e,t,n={},r,a){const{caseSensitive:o=!1,wholeWord:i=!1,useRegex:l=!1,includeDeleted:s=!0}=n,c=this.sortBuffersByPriority(e,s);let d=[],u=!1,m=!1;const p=[],g=Date.now();for(const e of c){if(r?.aborted)throw new Do;if(Date.now()-g>3e4){m=!0;break}if("number"!=typeof e.id)continue;const n=1e4-d.length;if(n<=0){u=!0;break}try{const s=Date.now(),c=await this.searchInSingleBuffer(e,t,{caseSensitive:o,wholeWord:i,useRegex:l},r,a,n),m=Date.now()-s;if(c.length>0?(d=[...d,...c],yield{bufferLabel:e.label,currentMatches:c,isComplete:!1,bufferId:e.id,searchDuration:m}):yield{bufferLabel:e.label,currentMatches:[],isComplete:!1,bufferId:e.id,searchDuration:m},d.length>=1e4){u=!0;break}}catch(t){if(t instanceof Do)throw t;if(!(t instanceof Lo))throw yield{bufferLabel:e.label,currentMatches:[],isComplete:!1,error:t},t;{m=!0,p.push(e.label);const n=t.partialSearchMatches||[];n.length>0&&(d=[...d,...n],yield{bufferLabel:e.label,currentMatches:n,isComplete:!1,error:t})}}}const f={query:t,matches:d,limitReached:u};if(m){const e=1===p.length?`1 tab (${p[0]})`:`${p.length} tabs`;throw new Lo(`Search timed out after processing ${e}.${d.length>0?" Showing partial results.":""}`,d)}return f}static sortBuffersByPriority(e,t=!0){return[...e.filter((e=>!e.archived)).sort(((e,t)=>void 0!==e.position&&void 0!==t.position?e.position-t.position:0)),...t?e.filter((e=>e.archived)).sort(((e,t)=>e.archivedAt&&t.archivedAt?t.archivedAt-e.archivedAt:0)):[]]}static async searchInBuffer(e,t,n,r,a){if(!e.value)return[];try{return(await Go(e.value,t,n,r,a)).map((t=>({bufferId:e.id,bufferLabel:e.label,range:{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:t.endLineNumber,endColumn:t.endColumn},text:t.text,previewText:t.previewText,matchStartInPreview:t.matchStartInPreview,matchEndInPreview:t.matchEndInPreview,isArchived:e.archived||!1,archivedAt:e.archivedAt,isMetricsMatch:!!e.metricsViewState})))}catch(t){if(t instanceof Lo){const n=t.partialMatches?.map((t=>({bufferId:e.id,bufferLabel:e.label,range:{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:t.endLineNumber,endColumn:t.endColumn},text:t.text,previewText:t.previewText,matchStartInPreview:t.matchStartInPreview,matchEndInPreview:t.matchEndInPreview,isArchived:e.archived||!1,archivedAt:e.archivedAt,isMetricsMatch:!!e.metricsViewState})))||[];throw new Lo(t.message,n)}throw t}}static groupMatchesByBuffer(e){const t=new Map;for(const n of e)t.has(n.bufferId)||t.set(n.bufferId,[]),t.get(n.bufferId).push(n);return t}static createTitleMatch(e,t,n){return{bufferId:e.id,bufferLabel:e.label,range:{startLineNumber:1,startColumn:t+1,endLineNumber:1,endColumn:n+1},text:e.label.substring(t,n),previewText:e.label,matchStartInPreview:t,matchEndInPreview:n,isArchived:e.archived||!1,archivedAt:e.archivedAt,isTitleMatch:!0,isMetricsMatch:!!e.metricsViewState}}static async findTitleMatches(e,t,n,r){return(await Go(e,t,n,1,r)).map((e=>({start:e.startOffset,end:e.endOffset})))}}var og=n(50820),ig=n(45906);const lg=s.ZP.div.withConfig({displayName:"VirtualizedTree__Wrapper"})(["\n  height: 100%;\n  width: 100%;\n  \n  &:focus {\n    outline: none;\n  }\n"]);function sg(e,t){const{items:n,renderItem:a,onItemClick:o,onItemDoubleClick:i,onItemKeyDown:l,onBlur:s,focusedIndex:c,setFocusedIndex:d,className:u,style:m}=e,p=(0,r.useRef)(null),g=(0,r.useRef)(null),f=(0,r.useRef)(null),h=(0,r.useCallback)((e=>n.findIndex((t=>t.id===e))),[n]),b=(0,r.useCallback)((e=>{if(!p.current)return;const{to:t}=e;switch(t){case"start":p.current.scrollIntoView({index:0,align:"start",done:()=>d(0)});break;case"end":p.current.scrollIntoView({index:n.length-1,align:"end",done:()=>d(n.length-1)});break;case"next":const{id:t}=e,r=Math.min(n.length-1,h(t)+1);p.current.scrollIntoView({index:r,done:()=>d(r)});break;case"previous":const{id:a}=e,o=Math.max(0,h(a)-1);p.current.scrollIntoView({index:o,done:()=>d(o)});break;case"parent":const{id:i}=e,l=Math.max(0,h(i)-1);p.current.scrollIntoView({index:l,done:()=>d(l)});break;case"pageUp":if(!g.current)return;const{startIndex:s,endIndex:u}=g.current,m=u-s,f=null!==c&&c!==s?s:Math.max(0,s-m);p.current.scrollIntoView({index:f,align:"start",done:()=>d(f)});break;case"pageDown":if(!g.current)return;const{startIndex:b,endIndex:y}=g.current,E=y-b,w=null!==c&&c!==y?y:Math.min(n.length-1,y+E);p.current.scrollIntoView({index:w,align:"end",done:()=>d(w)})}}),[n,c,d,h]),y=(0,r.useCallback)((e=>{p.current&&p.current.scrollIntoView({index:e,done:()=>d(e)})}),[d]);(0,r.useImperativeHandle)(t,(()=>({navigateInTree:b,scrollToIndex:y})),[b,y]);const E=(0,r.useCallback)((e=>{if(null===c&&n.length>0)return["ArrowDown","ArrowUp","Tab","Enter","Home","End","PageUp","PageDown"].includes(e.key)?(e.preventDefault(),void d(0)):void 0;if(null===c)return;const t=n[c];if(t&&(!l||(l(t,c,e),!e.defaultPrevented)))switch(e.key){case"ArrowDown":e.preventDefault(),b({to:"next",id:t.id});break;case"Tab":e.shiftKey?(e.preventDefault(),b({to:"previous",id:t.id})):(e.preventDefault(),b({to:"next",id:t.id}));break;case"ArrowUp":e.preventDefault(),b({to:"previous",id:t.id});break;case"Home":e.preventDefault(),b({to:"start"});break;case"End":e.preventDefault(),b({to:"end"});break;case"PageUp":e.preventDefault(),b({to:"pageUp"});break;case"PageDown":e.preventDefault(),b({to:"pageDown"})}}),[c,n,l,b]);return r.createElement(lg,{ref:f,className:u,style:m,tabIndex:0,onKeyDown:E,onBlur:e=>{s?.(),f.current?.contains(e.relatedTarget)||d(null)}},r.createElement(_t.OO,{totalCount:n.length,ref:p,rangeChanged:e=>{g.current=e},data:n,itemContent:e=>{const t=n[e],l=c===e;return r.createElement("div",{onClick:n=>{n.stopPropagation(),d(e),o?.(t,e)},onDoubleClick:()=>i?.(t,e),"data-index":e,"data-id":t.id},a(t,e,l))},style:{height:"100%"}}))}const cg=(0,r.forwardRef)(sg),dg=s.ZP.div.withConfig({displayName:"SearchResults__ResultsContainer"})(["\n  padding: 0;\n  width: 100%;\n  height: 100%;\n"]),ug=s.ZP.div.withConfig({displayName:"SearchResults__ItemWrapper"})(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  padding: 0.5rem 0;\n  padding-left: ","rem;\n  padding-right: 1rem;\n  user-select: none;\n  border: 1px solid transparent;\n  border-radius: 0.4rem;\n  width: 100%;\n  min-height: 3.2rem;\n  \n  ","\n"],(e=>1.5*(e.$level||0)+1),(({$focused:e,theme:t})=>e&&`\n    outline: none;\n    background: ${t.color.tableSelection};\n    border: 1px solid ${t.color.cyan};\n  `)),mg=s.ZP.div.withConfig({displayName:"SearchResults__ChevronIcon"})(["\n  position: absolute;\n  left: 0.5rem;\n  color: ",";\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  \n  svg {\n    width: 1.5rem;\n    height: 1.5rem;\n  }\n"],(({theme:e})=>e.color.gray2)),pg=s.ZP.div.withConfig({displayName:"SearchResults__FileIcon"})(["\n  margin-right: 0.8rem;\n  display: flex;\n  align-items: center;\n  \n  svg {\n    width: 1.4rem;\n    height: 1.4rem;\n  }\n"]),gg=(0,s.ZP)(Pe).withConfig({displayName:"SearchResults__ItemText"})(["\n  flex: 1;\n  font-weight: 500;\n  color: ",";\n  font-style: ",";\n  display: flex;\n  align-items: center;\n  gap: 0.8rem;\n  \n  .highlight {\n    background-color: #45475a;\n    color: ",";\n  }\n  \n  mark {\n    background-color: rgb(163,127,96);\n    border-radius: 0.2rem;\n    color: ",";\n    padding: 0.2rem;\n  }\n"],(({theme:e,$isArchived:t})=>t?e.color.gray2:e.color.foreground),(e=>e.$isArchived?"italic":"normal"),(({theme:e})=>e.color.foreground),(({theme:e})=>e.color.foreground)),fg=s.ZP.span.withConfig({displayName:"SearchResults__BufferStatus"})(["\n  color: ",";\n  font-size: 1rem;\n  margin-left: 0.4rem;\n  padding: 0.2rem 0.4rem;\n  background: ",";\n  border-radius: 0.2rem;\n"],(({theme:e})=>e.color.gray2),(({theme:e})=>e.color.selection)),hg=s.ZP.span.withConfig({displayName:"SearchResults__MatchCount"})(["\n  color: ",";\n  font-size: 1.1rem;\n  margin-left: 0.8rem;\n"],(({theme:e})=>e.color.gray2)),bg=s.ZP.span.withConfig({displayName:"SearchResults__LineNumber"})(["\n  color: ",';\n  margin-right: 0.5rem;\n  text-align: left;\n  font-family: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;\n  font-size: 1.1rem;\n  min-width: 3.4rem;\n'],(({theme:e})=>e.color.comment)),yg=s.ZP.span.withConfig({displayName:"SearchResults__MatchText"})(["\n  color: ",';\n  font-family: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;\n  white-space: pre;\n  font-size: 1.1rem;\n  \n  mark {\n    background-color: rgb(163,127,96);\n    border-radius: 0.2rem;\n    color: ',";\n    padding: 0.2rem;\n  }\n"],(({theme:e})=>e.color.foreground),(({theme:e})=>e.color.foreground)),Eg=s.ZP.div.withConfig({displayName:"SearchResults__NoResults"})(["\n  padding: 2rem 1.2rem;\n  color: ",";\n  font-size: 1.3rem;\n  text-align: center;\n"],(({theme:e})=>e.color.gray2)),wg=({groupedMatches:e,searchQuery:t,staleBuffers:n})=>{const{setActiveBuffer:a,buffers:o,setTemporaryBuffer:i,temporaryBufferId:l,editorRef:s,updateBuffer:c}=Ma(),[d,u]=(0,r.useState)(new Map(Array.from(e.keys()).map((e=>[e,!0])))),[m,p]=(0,r.useState)(null),g=(0,r.useRef)(null),f=(0,r.useRef)([]),h=(0,r.useRef)(null),b=(0,r.useRef)(null),y=(0,r.useMemo)((()=>o.filter((e=>!e.archived||e.isTemporary)).length),[o]),E=(0,r.useMemo)((()=>{const t=[];return Array.from(e.entries()).forEach((([e,r])=>{const a=r[0],o=r.every((e=>e.isTitleMatch)),i=r.find((e=>e.isTitleMatch));if(o)r.forEach(((n,r)=>{t.push({type:"title-match",match:n,id:`title-match-${e}-${r}`,isMetricsMatch:!!a.isMetricsMatch})}));else{const o=`header-${e}`;t.push({type:"header",bufferId:e,bufferLabel:a.bufferLabel,isArchived:a.isArchived||!1,matchCount:r.length-(i?1:0),id:o,titleMatch:i,isMetricsMatch:!!a.isMetricsMatch,isStale:n.includes(e)}),!0===d.get(e)&&r.forEach(((n,r)=>{n.isTitleMatch||t.push({type:"match",match:n,id:`match-${e}-${n.range.startLineNumber}-${n.range.startColumn}-${r}`,parentId:o,isMetricsMatch:!!n.isMetricsMatch})}))}})),t}),[e,d,n]),w=(0,r.useCallback)((async()=>{if(null!==l){const e=o.find((e=>e.id===l)),t={archived:!1,archivedAt:void 0,isTemporary:!1};if(e)return await c(l,t),await a({...e,...t},{focus:!0,fromSearch:!0}),e}return null}),[l,o,c,a]),C=(0,r.useCallback)((e=>{u((t=>{const n=new Map(t),r=n.get(e)??!0;return n.set(e,!r),n}))}),[]),v=(0,r.useCallback)((e=>"header"===e.type?e.bufferId:"match"===e.type||"title-match"===e.type?e.match.bufferId:void 0),[]),x=(0,r.useCallback)((async(e,t)=>{const n=v(e);if(!n)return null;const r=o?.find((e=>e.id===n));if(!r)return null;r.archived?t?null!==l&&l===n?await w():(await c(n,{archived:!1,archivedAt:void 0,position:y}),await a(r,{focus:!0,fromSearch:!0}),null!==l&&await c(l,{isTemporary:!1})):l!==n&&await i(r):(null!==l&&await c(l,{isTemporary:!1}),await a(r,{focus:t,fromSearch:!0}))}),[v,o,l,c,a,w,y,i]),_=(0,r.useCallback)((e=>{e.isMetricsMatch||("header"===e.type||"title-match"===e.type?(s.current?.revealPositionInCenter({lineNumber:1,column:1}),s.current?.setPosition({lineNumber:1,column:1}),f.current=s.current?.getModel()?.deltaDecorations(f.current,[])??[]):"match"===e.type&&(s.current?.revealPositionInCenter({lineNumber:e.match.range.startLineNumber,column:e.match.range.startColumn}),s.current?.setPosition({lineNumber:e.match.range.startLineNumber,column:e.match.range.startColumn}),f.current=s.current?.getModel()?.deltaDecorations(f.current,[{range:e.match.range,options:{isWholeLine:!1,className:"searchHighlight"}}])??[]))}),[s]),S=async e=>{if(null===e)return void(f.current=s.current?.getModel()?.deltaDecorations(f.current,[])??[]);const t=E.at(e);t&&(await x(t,!1),_(t))},k=async e=>{e&&(await x(e,!0),_(e),e.isMetricsMatch?p(null):s.current?.focus())},T=(0,r.useCallback)(((e,t,n)=>{const a=e.substring(0,t),o=e.substring(t,n),i=e.substring(n);return r.createElement("span",null,a,r.createElement("mark",null,o),i)}),[]),N=(0,r.useCallback)(((e,t,n)=>{if("header"===e.type){const t=!0===d.get(e.bufferId);return r.createElement(ug,{$focused:n,$isHeader:!0,$level:1,"data-hook":"search-result-buffer-group","data-active":n,role:"treeitem","aria-expanded":t,"aria-level":1,"aria-label":`${e.bufferLabel} ${e.isArchived?"closed":""} - ${e.matchCount} ${e.matchCount>1?"results":"result"}`},r.createElement(mg,{onClick:t=>{t.stopPropagation(),C(e.bufferId)},"aria-hidden":"true"},t?r.createElement(fi._,null):r.createElement(Pd._,null)),r.createElement(pg,{"aria-hidden":"true"},e.isMetricsMatch?r.createElement(og.H,null):r.createElement(ig.a,null)),r.createElement(gg,{$isArchived:e.isArchived},e.titleMatch?T(e.titleMatch.previewText,e.titleMatch.matchStartInPreview,e.titleMatch.matchEndInPreview):e.bufferLabel,e.isArchived&&r.createElement(fg,null,"closed"),e.isStale&&r.createElement(fg,null,"stale")),r.createElement(hg,null,e.matchCount>1?`${e.matchCount} results`:`${e.matchCount} result`))}return"title-match"===e.type?r.createElement(ug,{$focused:n,$level:1,"data-hook":"search-result-title-match","data-active":n,role:"treeitem","aria-level":1,"aria-label":`${e.match.bufferLabel} ${e.match.isArchived?"closed":""}`},r.createElement(pg,{"data-hook":"search-result-title-match-icon","aria-hidden":"true"},e.isMetricsMatch?r.createElement(og.H,null):r.createElement(ig.a,null)),r.createElement(gg,{$isArchived:e.match.isArchived,"data-hook":"search-result-title-match-text"},T(e.match.previewText,e.match.matchStartInPreview,e.match.matchEndInPreview),e.match.isArchived&&r.createElement(fg,{"data-hook":"search-result-title-match-closed-status"},"closed"))):r.createElement(ug,{$focused:n,$level:2,"data-hook":"search-result-match","data-active":n,role:"treeitem","aria-level":2,"aria-label":`Line ${e.match.range.startLineNumber}: ${e.match.previewText}`},r.createElement(bg,{"data-hook":"search-result-line-number","aria-hidden":"true"},e.match.range.startLineNumber),r.createElement(yg,null,T(e.match.previewText,e.match.matchStartInPreview,e.match.matchEndInPreview)))}),[d,C,T]);return(0,r.useEffect)((()=>{g.current!==m&&(S(m),g.current=m)}),[m,S]),(0,r.useEffect)((()=>{u((t=>{const n=new Map(t);return Array.from(e.keys()).forEach((e=>{n.has(e)||n.set(e,!0)})),Array.from(n.keys()).forEach((t=>{e.has(t)||n.delete(t)})),n}))}),[e]),(0,r.useEffect)((()=>{const e=async e=>{if(b.current&&!b.current.contains(e.target)&&null!==l){const t=e.target;t?.closest(".monaco-content")||t?.closest(".metrics-root")?await w():await c(l,{isTemporary:!1},!0)}};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[l,c,w]),0===e.size&&t.trim()?r.createElement(Eg,{"data-hook":"search-no-results",role:"status","aria-live":"polite"},"No results found"):r.createElement(dg,{ref:b,tabIndex:-1,role:"tree","aria-label":`Search results: ${e.size} buffers found`},r.createElement(cg,{ref:h,items:E,renderItem:N,onItemDoubleClick:k,onItemKeyDown:(e,t,n)=>{if("Enter"===n.key&&(n.preventDefault(),k(e)),"header"===e.type){const t=!0===d.get(e.bufferId);if("ArrowRight"===n.key)return n.preventDefault(),void(t?h.current?.navigateInTree({to:"next",id:e.id}):C(e.bufferId));if("ArrowLeft"===n.key&&t)return n.preventDefault(),void C(e.bufferId)}else if("match"===e.type){if("ArrowLeft"===n.key){n.preventDefault();const t=E.findIndex((t=>t.id===e.parentId));return void(-1!==t&&h.current&&h.current.scrollToIndex(t))}if("ArrowRight"===n.key)return n.preventDefault(),void h.current?.navigateInTree({to:"next",id:e.id})}},focusedIndex:m,setFocusedIndex:p}))},Cg=r.memo(wg,((e,t)=>e.groupedMatches===t.groupedMatches&&e.staleBuffers===t.staleBuffers)),vg=(e,t)=>{const n=(0,r.useRef)(!0);(0,r.useEffect)((()=>{if(!n.current)return e();n.current=!1}),t??[])},xg=(0,s.ZP)(lt).withConfig({displayName:"SearchPanel__Wrapper"})(["\n  overflow-x: auto;\n  height: 100%;\n  ","\n"],(({$open:e})=>!e&&(0,s.iv)(["\n    display: none;\n  "]))),_g=(0,s.ZP)(it).withConfig({displayName:"SearchPanel__Content"})(["\n  display: flex;\n  flex-direction: column;\n  overflow: auto;\n"]),Sg=s.ZP.div.withConfig({displayName:"SearchPanel__SearchInputContainer"})(["\n  padding: 0 1rem 0.5rem 1rem;\n  border-bottom: 1px solid ",";\n"],(({theme:e})=>e.color.selection)),kg=s.ZP.div.withConfig({displayName:"SearchPanel__InputWrapper"})(["\n  position: relative;\n  height: 4.5rem;\n  display: flex;\n  align-items: center;\n  width: 100%;\n"]),Tg=(0,s.ZP)(Jn.I).withConfig({displayName:"SearchPanel__StyledInput"})(["\n  padding-right: 8rem;\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n\n  &::placeholder {\n    color: ",";\n  }\n\n  &::selection {\n    background: rgba(255, 255, 255, 0.3);\n    color: inherit;\n  }\n"],(({theme:e})=>e.color.gray2)),Ng=s.ZP.div.withConfig({displayName:"SearchPanel__ToggleButtonsContainer"})(["\n  position: absolute;\n  right: 0.5rem;\n  top: 50%;\n  transform: translateY(-50%);\n  display: flex;\n  gap: 0.2rem;\n"]),Ig=s.ZP.button.withConfig({displayName:"SearchPanel__ToggleButton"})(["\n  background: transparent;\n  border: 1px solid transparent;\n  color: ",";\n  width: 2rem;\n  height: 2rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  border-radius: 0.2rem;\n  font-size: 1.2rem;\n\n  ","\n"],(({theme:e})=>e.color.foreground),(({active:e,theme:t})=>e&&`\n    background: ${t.color.background};\n    border: 1px solid ${t.color.pink};\n  `)),Rg=s.ZP.div.withConfig({displayName:"SearchPanel__SearchSummary"})(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 4rem;\n  padding: 1rem;\n  color: ",";\n  font-size: 1.1rem;\n"],(({theme:e})=>e.color.gray2)),Og=(0,s.ZP)(_d.G).withConfig({displayName:"SearchPanel__Loader"})(["\n  width: 2rem;\n  color: ",";\n  ",";\n"],D("pink"),m),Ag=s.ZP.div.withConfig({displayName:"SearchPanel__CheckboxWrapper"})(["\n  display: flex;\n  align-items: center;\n  padding: 0.4rem 0;\n  \n  input {\n    margin-left: 0;\n  }\n"]),Mg=s.ZP.label.withConfig({displayName:"SearchPanel__CheckboxLabel"})(["\n  color: ",";\n  font-size: 1.2rem;\n  margin-left: 0.6rem;\n  cursor: pointer;\n"],(({theme:e})=>e.color.foreground)),Pg=s.ZP.div.withConfig({displayName:"SearchPanel__SearchResultsContainer"})(["\n  flex: 1;\n  overflow-y: auto;\n"]),Lg=s.ZP.div.withConfig({displayName:"SearchPanel__SearchError"})(["\n  background: transparent;;\n\n  border-radius: 0.4rem;\n  margin: 0.5rem 0 1rem 0;\n  color: ",";\n  font-size: 1.2rem;\n  align-items: center;\n  gap: 0.8rem;\n  \n  svg {\n    display: inline;\n    color: ",";\n    align-self: flex-start;\n    width: 1.6rem;\n    height: 1.6rem;\n    margin-right: 0.3rem;\n    flex-shrink: 0;\n    transform: translateY(-0.1rem);\n  }\n"],(({theme:e})=>e.color.gray2),(({theme:e})=>e.color.red)),Dg=s.ZP.div.withConfig({displayName:"SearchPanel__LoaderContainer"})(["\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  margin-left: auto;\n  gap: 0.5rem;\n  color: ",";\n"],D("offWhite")),Bg=()=>{const[e,t]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{const e=setTimeout((()=>{t(!0)}),1500);return()=>clearTimeout(e)}),[]),e?r.createElement(Dg,null,r.createElement(Og,null),"Searching..."):null},zg=(e,t)=>JSON.stringify({query:e,options:t}),Fg=r.forwardRef((({open:e},t)=>{const{setSearchPanelOpen:n}=ja(),[a,o]=(0,r.useState)(""),[i,l]=(0,r.useState)({caseSensitive:!1,wholeWord:!1,useRegex:!1,includeDeleted:!0}),[s,c]=(0,r.useState)({query:"",matches:[]}),[d,u]=(0,r.useState)([]),[m,p]=(0,r.useState)(null),[g,f]=(0,r.useState)(!1),h=(0,r.useRef)(null),b=(0,r.useRef)(0),y=(0,r.useRef)(!1),E=(0,r.useRef)(null),w=(0,r.useRef)(null),C=(0,r.useRef)({}),v=(0,r.useRef)(s),x=(0,r.useRef)([]),_=(0,r.useRef)({}),S=(0,r.useRef)(new Map);(0,r.useEffect)((()=>{v.current=s}),[s]),(0,r.useEffect)((()=>{x.current=d}),[d]);const k=(0,r.useCallback)((async()=>{const e=++b.current;E.current&&E.current.abort();const t=new AbortController;if(E.current=t,zg(a,i)===w.current)return;if(!a.trim())return c({query:a,matches:[]}),f(!1),void p(null);const n=await Na.getAll();if(!n||0===n.length)return c({query:a,matches:[]}),void f(!1);f(!0),y.current=!0,a!==v.current.query&&(_.current={});try{p(null),u([]);let r=[];const o=ag.searchInBuffers(n,a,i,t.signal,e.toString());for(;;){const{value:n,done:i}=await o.next();if(t.signal.aborted)throw new Do;if(i){const t=n;e===b.current&&(c(t),w.current=null);break}const l=n;l&&e===b.current&&(l.bufferId&&void 0!==l.searchDuration&&(_.current[l.bufferId]={duration:l.searchDuration,query:a}),l.currentMatches.length>0&&(r=[...r,...l.currentMatches],c({query:a,matches:r})))}}catch(t){if(t instanceof Do)return;if(e===b.current){const e=t;if(t instanceof Lo){const n=t.partialSearchMatches||[];c({query:a,matches:n,limitReached:!0}),p({type:"timeout",message:e.message}),w.current=zg(a,i)}else c({query:a,matches:[]}),p({type:e.name,message:e.message}),w.current=zg(a,i)}}finally{if(e===b.current){f(!1),y.current=!1;const t=C.current[e];t&&Object.keys(t).length>0&&setTimeout((async()=>{const t=v.current,n=x.current,{result:r,staleBuffers:a,buffersToRefresh:o}=await I(e,t,n);e===b.current&&(c(r),u(a),o.length>0&&await N(o))}),100)}}}),[a,i]),T=(0,r.useCallback)((async(e,t,n)=>{try{const r=await Na.getById(e);return!r||t.aborted?[]:await ag.searchInSingleBuffer(r,a,i,t,`queue-${e}-${Date.now()}`,n)}catch(e){return[]}}),[a,i,Na]),N=async e=>{for(const t of e){const e=S.current.get(t);e&&e.abort();const n=new AbortController;S.current.set(t,n);try{const e=await T(t,n.signal,1e4);c((n=>{const r=n.matches.findIndex((e=>e.bufferId===t)),a=n.matches.filter((e=>e.bufferId!==t));if(-1===r||0===e.length)return{...n,matches:[...a,...e]};{const t=a.slice(0,r),o=a.slice(r);return{...n,matches:[...t,...e,...o]}}})),u((e=>e.filter((e=>e!==t))))}catch(e){if(e instanceof Do)continue;u((e=>[...e.filter((e=>e!==t)),t]))}finally{S.current.delete(t)}}},I=async(e,t,n)=>{const r=C.current[e];if(!r)return{result:t,staleBuffers:n,buffersToRefresh:[]};let o=[...t.matches],i=[...n];const l=[];for(const[e,t]of Object.entries(r)){const{delete:n,metaUpdate:r,contentUpdate:s}=t,c=Number(e);let d=s;if(n&&(o=o.filter((e=>e.bufferId!==c)),i=i.filter((e=>e!==c))),r){const e=await Na.getMetaById(c);e&&(o=o.map((t=>(t.isTitleMatch&&(d=!0),t.bufferId===c?{...t,bufferLabel:e.label,isArchived:e.archived,archivedAt:e.archivedAt}:t))))}if(d){const e=!_.current[c],t=_.current[c]?.query===a&&(_.current[c]?.duration||0)<5e3;e||t?l.push(c):i.includes(c)||i.push(c)}}return delete C.current[e],{result:{...t,matches:o},staleBuffers:i,buffersToRefresh:l}};(0,r.useEffect)((()=>{const e=async e=>{if(!e||""===a.trim())return;const{type:t}=e;"deleteAll"!==t&&(C.current[b.current]=C.current[b.current]||{});const n=C.current[b.current];switch(t){case"deleteAll":b.current++,E.current&&E.current.abort(),c({query:a,matches:[]}),C.current={},u([]);break;case"delete":const{bufferId:t}=e;n&&(n[t]={delete:!0,metaUpdate:!1,contentUpdate:!1});break;case"update":const{bufferId:r}=e;n&&(n[r]={delete:n[r]?.delete,metaUpdate:e?.metaUpdate||n[r]?.metaUpdate,contentUpdate:e?.contentUpdate||n[r]?.contentUpdate});break;case"archive":const{bufferId:o}=e;n&&(n[o]={delete:n[o]?.delete,metaUpdate:!0,contentUpdate:n[o]?.contentUpdate})}y.current||(async()=>{const t=v.current,n=x.current,r=b.current;if(!("bufferId"in e)||!e.bufferId)return;const{result:a,staleBuffers:o,buffersToRefresh:i}=await I(r,t,n);c(a),u(o),i.length>0&&await N(i)})()};return O.subscribe(A.BUFFERS_UPDATED,e),()=>{O.unsubscribe(A.BUFFERS_UPDATED,e),S.current.forEach((e=>{e.abort()})),S.current.clear()}}),[a]),vg((()=>{const e=setTimeout((()=>{xa.ready&&k()}),300);return()=>clearTimeout(e)}),[k]),vg((()=>{h.current&&e&&(h.current.focus(),h.current.select())}),[e]);const R=e=>{l((t=>({...t,[e]:!t[e]})))},M=(0,r.useMemo)((()=>ag.groupMatchesByBuffer(s.matches)),[s]),P=(0,r.useCallback)((()=>{if(!a.trim())return"";const e=M.size,t=s.matches.length,n=s.limitReached;return 0===t?null:`${n?`${t}+`:t} result${1!==t?"s":""} in ${e} tab${1!==e?"s":""}`}),[M]),L=(0,r.useCallback)((()=>{h.current&&(h.current.focus(),h.current.select())}),[]);return r.useImperativeHandle(t,(()=>({focusSearchInput:L})),[L]),(0,r.useEffect)((()=>()=>{E.current&&E.current.abort(),jo()}),[]),r.createElement(xg,{$open:e},r.createElement(_g,null,r.createElement(Sg,null,r.createElement(kg,null,r.createElement(Tg,{ref:h,placeholder:"Search in tabs...",value:a,onChange:e=>o(e.target.value),onKeyDown:e=>{"Enter"===e.key?k():"Escape"===e.key&&(a.length>0?o(""):n(!1))},"aria-label":"Search in tabs","aria-describedby":"search-summary","data-hook":"search-input"}),r.createElement(Ng,null,r.createElement(Ig,{active:i.caseSensitive||!1,onClick:()=>R("caseSensitive"),title:"Match Case (Alt+C)","aria-label":"Match Case","aria-pressed":i.caseSensitive||!1,"data-hook":"search-option-case-sensitive"},"Aa"),r.createElement(Ig,{active:i.wholeWord||!1,onClick:()=>R("wholeWord"),title:"Match Whole Word (Alt+W)","aria-label":"Match Whole Word","aria-pressed":i.wholeWord||!1,"data-hook":"search-option-whole-word"},"W"),r.createElement(Ig,{active:i.useRegex||!1,onClick:()=>R("useRegex"),title:"Use Regular Expression (Alt+R)","aria-label":"Use Regular Expression","aria-pressed":i.useRegex||!1,"data-hook":"search-option-regex"},".*"))),r.createElement(Ag,null,r.createElement(ir.X,{id:"search-include-closed",checked:i.includeDeleted||!1,onChange:()=>R("includeDeleted"),"aria-describedby":"search-include-closed-label","data-hook":"search-option-include-closed"}),r.createElement(Mg,{id:"search-include-closed-label",htmlFor:"search-include-closed","data-hook":"search-option-include-closed-label"},"Include closed tabs")),m&&r.createElement(Lg,{"data-hook":"search-error"},r.createElement(ts.j,null),m.message)),r.createElement(Rg,{"data-hook":"search-summary"},P(),g&&r.createElement(Bg,null)),r.createElement(Pg,null,!g||M.size>0?r.createElement(Cg,{groupedMatches:M,searchQuery:a,staleBuffers:d}):null)))}));function Hg(){return Hg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hg.apply(this,arguments)}const Ug=s.ZP.div.withConfig({displayName:"Console__Root"})(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  max-height: 100%;\n"]),Zg=s.ZP.div.withConfig({displayName:"Console__Top"})(["\n  display: flex;\n  height: 100%;\n  flex: 1;\n  position: relative;\n  overflow: hidden;\n"]),Vg=s.ZP.div.withConfig({displayName:"Console__Bottom"})(["\n  display: flex;\n  height: 100%;\n  flex: 1;\n  min-height: 0px;\n"]),qg=s.ZP.div.withConfig({displayName:"Console__Tab"})(["\n  display: flex;\n  width: calc(100% - 4.5rem);\n  height: 100%;\n  overflow: auto;\n"]),$g=[{icon:r.createElement(Pm.r,{size:w}),mode:"grid",tooltipText:"Grid"},{icon:r.createElement(Lm.u,{size:w}),mode:"chart",tooltipText:"Chart"}],jg=()=>{const e=(0,o.I0)(),{sm:t}=Ye(),{resultsSplitterBasis:n,updateSettings:a,leftPanelState:i,updateLeftPanelState:l}=Za(),s=(0,o.v9)(Tn.query.getResult),c=(0,o.v9)(Tn.console.getActiveBottomPanel),{consoleConfig:d}=Hr(),{isSearchPanelOpen:u,setSearchPanelOpen:m,searchPanelRef:p}=ja(),g=i.type===Ba.DATASOURCES,[f,h]=(0,r.useState)("grid"),b=r.useRef(null),y=r.useRef(null),E=r.useRef(null),C=r.useRef(null);return(0,r.useEffect)((()=>{b.current&&s?e(jt.setActiveBottomPanel("result")):y.current&&e(jt.setActiveBottomPanel("zeroState"))}),[s]),(0,r.useEffect)((()=>{var e;e=c,b.current&&(b.current.style.display="result"===e?"flex":"none"),y.current&&(y.current.style.display="zeroState"===e?"flex":"none"),E.current&&(E.current.style.display="import"===e?"flex":"none")}),[c]),r.createElement(Ug,null,r.createElement(ng.oL,{vertical:!0,onDragEnd:e=>{a(yn.RESULTS_SPLITTER_BASIS,e[0])}},r.createElement(ng.oL.Pane,{minSize:100,preferredSize:n},r.createElement(Zg,null,r.createElement(Am,{align:"top"},!t&&r.createElement(dt,{placement:"right",trigger:r.createElement(Mm,{"data-hook":"tables-panel-button",direction:"left",onClick:()=>{l(g?{type:null,width:i.width}:{type:Ba.DATASOURCES,width:i.width})},selected:g},r.createElement(Dm.L,{size:w}))},r.createElement(xt,null,g?"Hide":"Show"," data sources")),r.createElement(dt,{placement:"right",trigger:r.createElement(Mm,{"data-hook":"search-panel-button",direction:"left",onClick:()=>m(!u),selected:u},r.createElement(Bm.F,{size:w}))},r.createElement(xt,null,u?"Hide search in tabs":"Search in tabs"))),r.createElement(ng.oL,{ref:C,onDragEnd:e=>{0!==e[0]&&l({type:i.type,width:e[0]})},snap:!0},r.createElement(ng.oL.Pane,{preferredSize:i.width,visible:(g||u)&&!t,minSize:250},r.createElement(xm,{open:g}),r.createElement(Fg,{ref:p,open:u})),r.createElement(ng.oL.Pane,null,r.createElement(Fc,null))))),r.createElement(ng.oL.Pane,{minSize:100},r.createElement(Vg,null,r.createElement(Am,{align:"bottom"},s&&$g.map((({icon:t,mode:n,tooltipText:a})=>r.createElement(dt,{key:n,placement:"right",trigger:r.createElement(Mm,{"data-hook":`${n}-panel-button`,direction:"left",onClick:()=>{e(jt.setActiveBottomPanel("result")),h(n)},selected:"result"===c&&f===n},t)},r.createElement(xt,null,a)))),r.createElement(dt,{placement:"right",trigger:r.createElement(yt,Hg({readOnly:d.readOnly},!d.readOnly&&{onClick:()=>{e(jt.setActiveBottomPanel("import"))}},{selected:"import"===c,"data-hook":"import-panel-button"}),r.createElement(rg,{size:w}))},r.createElement(xt,null,d.readOnly?"To use this feature, turn off read-only mode in the configuration file":"Import files from CSV"))),r.createElement(qg,{ref:b},s&&r.createElement(md,{viewMode:f})),r.createElement(qg,{ref:y},r.createElement(Om,null)),r.createElement(qg,{ref:E},r.createElement(tg,null))))))},Gg=s.ZP.div.withConfig({displayName:"SideMenu__Backdrop"})(["\n  position: fixed;\n  top: 4rem;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background: rgba(0, 0, 0, 0.3);\n  z-index: 24;\n\n  &:hover {\n    cursor: pointer;\n  }\n"]),Wg=s.ZP.div.withConfig({displayName:"SideMenu__Wrapper"})(["\n  position: fixed;\n  top: 4rem;\n  right: 0;\n  bottom: 0;\n  width: ","px;\n  background: ",";\n  border-left: 1px solid ",";\n  z-index: 25;\n\n  &.side-menu-slide-enter {\n    width: 0;\n  }\n\n  &.side-menu-slide-enter-active {\n    width: ","px;\n    transition: width ","ms;\n  }\n\n  &.side-menu-slide-exit {\n    width: ","px;\n  }\n\n  &.side-menu-slide-exit-active {\n    width: 0;\n    transition: width ","ms;\n  }\n"],280,D("backgroundDarker"),D("black"),280,K.REG,280,K.REG),Qg=()=>{const e=(0,o.v9)(Tn.console.getSideMenuOpened),t=(0,o.I0)(),n=(0,r.useCallback)((()=>{t(jt.toggleSideMenu())}),[t]);return r.createElement(r.Fragment,null,r.createElement(ct.Z,{classNames:"fade-reg",in:e,timeout:K.REG,unmountOnExit:!0},r.createElement(Gg,{onClick:n})),r.createElement(ct.Z,{classNames:"side-menu-slide",in:e,timeout:K.REG,unmountOnExit:!0},r.createElement(Wg,null,r.createElement(xm,null))))};var Yg=n(70775),Kg=n(60782),Xg=n(44752),Jg=n(78613),ef=n(4888);const tf=(0,s.iv)(["\n  background: ",";\n"],D("selection")),nf=s.ZP.div.withConfig({displayName:"Row__Wrapper"})(["\n  display: flex;\n  height: 2.4rem;\n  padding: 0 0.6rem;\n  line-height: 2.4rem;\n  align-items: center;\n  transition: background ","ms;\n  cursor: pointer;\n  user-select: none;\n\n  ",";\n\n  > span:not(:last-child) {\n    margin-right: 0.6rem;\n  }\n"],K.FAST,(({active:e})=>e&&tf)),rf=(0,s.ZP)(Pe).withConfig({displayName:"Row__Value"})(["\n  flex: 1 1 auto;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  opacity: 0.7;\n"]),af=(0,s.ZP)(ef.E).withConfig({displayName:"Row__FileIcon"})(["\n  height: 2.2rem;\n  flex: 0 0 12px;\n  margin: 0 0.6rem;\n  color: ",";\n"],D("orange")),of=(0,s.ZP)(Pe).withConfig({displayName:"Row__Name"})(["\n  flex: 0 0 auto;\n"]),lf=({active:e,onMouseEnter:t,onMouseLeave:n,onClick:a,query:o})=>r.createElement(nf,{active:e,onClick:a,onMouseEnter:t,onMouseLeave:n},r.createElement(af,{size:"12px"}),o.name&&r.createElement(of,{color:"foreground",size:"sm"},o.name),r.createElement(rf,{color:"foreground",size:"sm"},o.value));function sf(){return sf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sf.apply(this,arguments)}const cf=s.ZP.div.withConfig({displayName:"QueryPicker__Wrapper"})(["\n  display: flex;\n  max-height: 650px;\n  width: 600px;\n  max-width: 100vw;\n  padding: 0.6rem 0;\n  flex-direction: column;\n  background: ",";\n  box-shadow: "," 0px 5px 8px;\n  border: 1px solid ",";\n  border-radius: 4px;\n  overflow: auto;\n"],D("backgroundDarker"),D("black"),D("black")),df=(0,s.ZP)(Pe).withConfig({displayName:"QueryPicker__Helper"})(["\n  padding: 1rem;\n  text-align: center;\n  opacity: 0.5;\n"]),uf=(0,s.ZP)(Pe).withConfig({displayName:"QueryPicker__Esc"})(["\n  padding: 0 2px;\n  background: ",";\n  border-radius: 2px;\n"],D("foreground")),mf=({type:e})=>"query"===e,pf=(0,s.ZP)(Pe).withConfig({displayName:"QueryPicker__Title"})(["\n  padding: 0.6rem 1.2rem 0.4rem;\n  margin-top: 0.6rem;\n  border-top: 1px solid ",";\n  background: ",";\n"],(({theme:e})=>e.color.selection),(({theme:e})=>e.color.black40)),gf=(0,s.ZP)(Pe).withConfig({displayName:"QueryPicker__Description"})(["\n  padding: 0 1.2rem 1rem;\n  color: ",";\n  opacity: 0.7;\n  background: ",";\n"],(({theme:e})=>e.color.foreground),(({theme:e})=>e.color.black40)),ff=({hidePicker:e,queries:t,ref:n})=>{const a=qe("ArrowDown"),o=qe("ArrowUp"),i=qe("Enter"),[l,s]=(0,r.useState)(-1),[c,d]=(0,r.useState)([]),{appendQuery:u}=Ma();(0,r.useEffect)((()=>{d((e=>{const t=[...e],n=[];let r=0;for(;t.length;){const e=t.shift();if(void 0===e.queries)n.push({type:"query",id:r,data:e});else{const a=e;n.push({type:"descriptor",id:r,data:a}),t.unshift(...a.queries)}r++}return n})(t))}),[t]);const m=(0,r.useCallback)((t=>{e(),u(t.value,{appendAt:"end"})}),[e]);return(0,r.useEffect)((()=>{if(c.length){if(a){const e=c.find(mf)?.id??0,t=c.slice(l+1).find(mf)?.id??e;s(t)}if(o){const e=[...c].reverse(),t=e.find(mf)?.id??c.length-1,n=[...c].slice(0,l).reverse().find(mf)?.id??t;s(n)}}}),[o,a,c]),(0,r.useEffect)((()=>{if(i){const e=c.find((({id:e,type:t})=>e===l&&"query"===t));e&&m(e.data)}}),[l,i,e,t,m]),r.createElement(cf,{ref:n},r.createElement(df,{_style:"italic",color:"foreground",size:"xs"},"Navigate the list with ",r.createElement(Xg.j,{size:"16px"}),r.createElement(Jg.o,{size:"16px"})," keys, exit with ",r.createElement(uf,{_style:"normal",size:"ms",weight:700},"Esc")),c.map((t=>{if("query"===t.type){const n=t.data;return r.createElement(lf,{active:t.id===l,hidePicker:e,key:t.id,onClick:()=>m(n),onMouseEnter:()=>s(t.id),onMouseLeave:()=>s(-1),query:n})}const{title:n,description:a}=t.data;return r.createElement(r.Fragment,{key:t.id},r.createElement(pf,{color:"foreground",size:"md"},n),r.createElement(gf,{color:"foreground"},a))})))},hf=(e,t)=>r.createElement(ff,sf({},e,{ref:t})),bf=(0,r.forwardRef)(hf);var yf=n(36636);const Ef=(0,s.ZP)(Ie).withConfig({displayName:"Menu__Wrapper"})(["\n  background: transparent;\n  z-index: 15;\n  padding-right: 1rem;\n  flex-shrink: 0;\n\n  .algolia-autocomplete {\n    display: "," !important;\n    flex: 0 1 168px;\n  }\n"],(({_display:e})=>e)),wf=s.ZP.div.withConfig({displayName:"Menu__Separator"})(["\n  flex: 1;\n"]),Cf=(0,s.ZP)(Vn.z).withConfig({displayName:"Menu__QueryPickerButton"})(["\n  position: relative;\n  flex: 0 0 auto;\n\n  @keyframes pulse {\n    0% {\n      box-shadow: 0 0 0 0px ",";\n    }\n    75% {\n      box-shadow: 0 0 0 5px transparent;\n    }\n  }\n\n  animation: ",";\n"],D("cyan"),(({$firstTimeVisitor:e})=>e?"pulse 2s infinite":"none")),vf=(0,s.ZP)(Kg.v).withConfig({displayName:"Menu__MenuIcon"})(["\n  color: ",";\n"],D("foreground")),xf=(0,s.ZP)(xe.x).withConfig({displayName:"Menu__CloseIcon"})(["\n  color: ",";\n"],D("foreground")),_f=(0,s.ZP)(be).withConfig({displayName:"Menu__SideMenuMenuButton"})(["\n  padding: 0;\n\n  .fade-enter {\n    opacity: 0;\n  }\n\n  .fade-enter-active {\n    opacity: 1;\n    transition: opacity ","ms;\n  }\n\n  .fade-exit {\n    opacity: 0;\n  }\n\n  .fade-exit-active {\n    opacity: 1;\n    transition: opacity ","ms;\n  }\n"],K.REG,K.REG),Sf=s.ZP.a.withConfig({displayName:"Menu__CTAButton"})(["\n  height: 3rem;\n  padding: 0 0.8rem;\n  border: 1px solid ",";\n  border-radius: 0.4rem;\n  color: ",";\n  text-decoration: none;\n  font-weight: 600;\n  line-height: 2.7rem;\n\n  &:hover {\n    background: ",";\n    color: ",";\n  }\n"],D("pinkPrimary"),D("white"),D("pinkPrimary"),D("white")),kf=s.ZP.div.withConfig({displayName:"Menu__MenuItems"})(["\n  display: grid;\n  grid-auto-flow: column;\n  align-items: center;\n  gap: 1.6rem;\n"]),Tf=()=>{const e=(0,o.I0)(),[t,n]=(0,r.useState)(),a=qe("Escape"),{consoleConfig:i}=Hr(),l=(0,o.v9)(Tn.console.getSideMenuOpened),{sm:s}=Ye(),{exampleQueriesVisited:c,updateSettings:d}=Za(),u=(0,r.useCallback)((e=>{!c&&e&&d(yn.EXAMPLE_QUERIES_VISITED,!0),n(e)}),[]),m=(0,r.useCallback)((()=>{n(!1)}),[]),p=(0,r.useCallback)((()=>{e(jt.toggleSideMenu())}),[e]);return(0,r.useEffect)((()=>{n(!1)}),[a]),(0,r.useEffect)((()=>{!s&&l&&e(jt.toggleSideMenu())}),[e,l,s]),r.createElement(Ef,{_display:s?"none":"inline"},r.createElement(wf,null),i.savedQueries&&i.savedQueries.length>0&&r.createElement(ut,{active:t,onToggle:u,trigger:r.createElement(Cf,{skin:"secondary",$firstTimeVisitor:!c},r.createElement(Yg.m,{size:"18px"}),r.createElement("span",null,"Example queries"))},r.createElement(bf,{hidePicker:m,queries:i.savedQueries??[]})),r.createElement(wf,null),r.createElement(kf,null,r.createElement(yf.F,{appId:"QL9L2YL7AQ",apiKey:"2f67aeacbe73ad08a49efb9214ea27f3",indexName:"questdb",placeholder:"Search docs",translations:{button:{buttonText:"Search docs"}},hitComponent:({hit:e,children:t})=>r.createElement("a",{href:e.url,target:"_blank",rel:"noreferrer"},t),navigator:{navigate:({itemUrl:e})=>window.open(e,"_blank")}}),i.ctaBanner&&r.createElement(Sf,{href:"https://questdb.com/enterprise/contact",target:"_blank"},"Book a demo")),s&&r.createElement(_f,{onClick:p},r.createElement(ct.Z,{classNames:"fade",in:l,timeout:K.REG},l?r.createElement(xf,{size:"26px"}):r.createElement(vf,{size:"26px"}))))};var Nf=n(26882),If=n(18008),Rf=n(1723),Of=n(62810);const Af=s.ZP.div.withConfig({displayName:"InstanceSettingsPopper__Wrapper"})(["\n  position: absolute;\n  margin-top: 0.5rem;\n  background: ",";\n  border: 1px solid ",";\n  border-radius: 0.4rem;\n  padding: 1.5rem;\n  width: 32rem;\n  z-index: 1000;\n"],(({theme:e})=>e.color.backgroundDarker),(({theme:e})=>e.color.gray1)),Mf=s.ZP.div.withConfig({displayName:"InstanceSettingsPopper__ColorSelector"})(["\n  display: flex;\n  gap: 1rem;\n  flex-wrap: wrap;\n  align-self: center;\n"]),Pf=s.ZP.button.withConfig({displayName:"InstanceSettingsPopper__ColorOption"})(["\n  width: 3rem;\n  height: 3rem;\n  border-radius: 0.4rem;\n  cursor: pointer;\n  border: 2px solid ",";\n  padding: 0;\n  background: ",";\n  \n  &:focus-visible {\n    outline: 1px solid ",";\n  }\n"],(({theme:e,selected:t})=>t?e.color.foreground:"transparent"),(({colorValue:e,theme:t,customColor:n})=>{if(n)return n;switch(e){case"r":return"#c7072d";case"g":return"#00aa3b";case"b":return"#007aff";case"default":return t.color.backgroundLighter;default:return"transparent"}}),(({theme:e})=>e.color.cyan)),Lf=s.ZP.button.withConfig({displayName:"InstanceSettingsPopper__ColorWheelOption"})(["\n  position: relative;\n  width: 3rem;\n  height: 3rem;\n  border-radius: 0.4rem;\n  cursor: pointer;\n  border: ",";\n  padding: 0;\n  overflow: hidden;\n\n  &:focus-visible {\n    outline: 1px solid ",';\n  }\n\n  &::before {\n    content: "";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: conic-gradient(\n    #ff0000,\n    #ffff00,\n    #00ff00,\n    #00ffff,\n    #0000ff,\n    #ff00ff,\n    #ff0000\n    );\n  }\n'],(({selected:e,theme:t})=>e?`2px solid ${t.color.foreground}`:"0"),(({theme:e})=>e.color.cyan)),Df=s.ZP.div.withConfig({displayName:"InstanceSettingsPopper__ColorPickerContainer"})(["\n  margin-top: 1rem;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  align-self: center;\n"]),Bf=s.ZP.div.withConfig({displayName:"InstanceSettingsPopper__ColorInputRow"})(["\n  display: flex;\n  gap: 1rem;\n  align-items: center;\n"]),zf=s.ZP.input.attrs({type:"range",min:0,max:255}).withConfig({displayName:"InstanceSettingsPopper__ColorSlider"})(["\n  flex: 1;\n  height: 1rem;\n  appearance: none;\n  background: linear-gradient(to right, rgb(0,0,0), rgb(255,0,0));\n  border-radius: 0.5rem;\n  \n  &::-webkit-slider-thumb {\n    appearance: none;\n    width: 1.8rem;\n    height: 1.8rem;\n    border-radius: 50%;\n    background: white;\n    cursor: pointer;\n    border: 1px solid ",";\n  }\n  \n  &.red {\n    background: linear-gradient(to right, rgb(0,0,0), rgb(255,0,0));\n  }\n  \n  &.green {\n    background: linear-gradient(to right, rgb(0,0,0), rgb(0,255,0));\n  }\n  \n  &.blue {\n    background: linear-gradient(to right, rgb(0,0,0), rgb(0,0,255));\n  }\n"],(({theme:e})=>e.color.gray1)),Ff=s.ZP.input.attrs({type:"number",min:0,max:255}).withConfig({displayName:"InstanceSettingsPopper__ColorValueInput"})(["\n  width: 6rem;\n  padding: 0.5rem;\n  background: ",";\n  border: 1px solid ",";\n  border-radius: 0.4rem;\n  color: ",";\n  \n  &:focus {\n    outline: none;\n    border-color: ",";\n  }\n"],(({theme:e})=>e.color.selection),(({theme:e})=>e.color.gray1),(({theme:e})=>e.color.foreground),(({theme:e})=>e.color.cyan)),Hf=s.ZP.form.withConfig({displayName:"InstanceSettingsPopper__StyledForm"})(["\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n"]),Uf=(0,s.ZP)(Vn.z).withConfig({displayName:"InstanceSettingsPopper__StyledButton"})(["\n  font-size: 1.6rem;\n  &:focus-visible {\n    outline: 2px solid ",";\n  }\n"],(({theme:e})=>e.color.cyan)),Zf=(0,s.ZP)(sr.P).withConfig({displayName:"InstanceSettingsPopper__StyledSelect"})(["\n  &:focus-visible {\n    border: 1px solid ",";\n  }\n"],(({theme:e})=>e.color.cyan)),Vf=(0,s.ZP)(Zn.x).withConfig({displayName:"InstanceSettingsPopper__Buttons"})(["\n  margin-top: 1.5rem;\n  gap: 1rem;\n  justify-content: flex-end;\n  flex-direction: row-reverse;\n"]),qf=(0,s.ZP)(Zn.x).attrs({flexDirection:"column",gap:"0.5rem"}).withConfig({displayName:"InstanceSettingsPopper__FormGroup"})(["\n  width: 100%;\n  align-items: flex-start;\n"]),$f=(0,s.ZP)(Jn.I).withConfig({displayName:"InstanceSettingsPopper__StyledInput"})(["\n  width: 100%;\n  background: ",";\n  border: 1px solid ",";\n  border-radius: 0.4rem;\n  color: ",";\n\n  &:focus {\n    outline: none;\n    border-color: ",";\n  }\n\n  &::placeholder {\n    color: ",";\n  }\n"],(({theme:e})=>e.color.selection),(({theme:e})=>e.color.gray1),(({theme:e})=>e.color.foreground),(({theme:e})=>e.color.cyan),(({theme:e})=>e.color.gray2)),jf=s.ZP.textarea.withConfig({displayName:"InstanceSettingsPopper__TextArea"})(["\n  width: 100%;\n  min-height: 8rem;\n  padding: 0.8rem;\n  background: ",";\n  border: 1px solid ",";\n  border-radius: 0.4rem;\n  color: ",";\n  font-family: inherit;\n  font-size: 1.4rem;\n  line-height: 1.5;\n  resize: vertical;\n\n  &:focus {\n    outline: none;\n    border-color: ",";\n  }\n\n  &::placeholder {\n    color: ",";\n  }\n"],(({theme:e})=>e.color.selection),(({theme:e})=>e.color.gray1),(({theme:e})=>e.color.foreground),(({theme:e})=>e.color.cyan),(({theme:e})=>e.color.gray2)),Gf=s.ZP.label.withConfig({displayName:"InstanceSettingsPopper__FormLabel"})(["\n  text-align: ",";\n  width: 100%;\n  font-size: 1.6rem;\n"],(e=>e.align||"left")),Wf=(0,s.ZP)(Pe).withConfig({displayName:"InstanceSettingsPopper__ErrorText"})(["\n  color: ",";\n  font-size: 1.2rem;\n  margin-top: 0.2rem;\n"],(({theme:e})=>e.color.red)),Qf=({active:e,onToggle:t,values:n,onSave:a,onValuesChange:o,trigger:i})=>{const[l,s]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null),[u,m]=(0,r.useState)(!1),[p,g]=(0,r.useState)({r:0,g:0,b:0}),f=(0,r.useRef)(null);(0,r.useEffect)((()=>{if(n.instance_rgb&&n.instance_rgb.startsWith("rgb")){m(!0);const e=n.instance_rgb.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);e&&g({r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)})}else m(!1)}),[n.instance_rgb]);const h=e=>{o({...n,instance_rgb:e}),"custom"!==e&&m(!1)},b=(e,t)=>{const r={...p,[e]:t};g(r);const a=`rgb(${r.r}, ${r.g}, ${r.b})`;o({...n,instance_rgb:a})};(0,r.useEffect)((()=>{n.instance_type||o({...n,instance_type:"development"}),e&&setTimeout((()=>{f.current?.focus()}),100)}),[e]);const y=`rgb(${p.r}, ${p.g}, ${p.b})`;return r.createElement(ut,{active:e,onToggle:t,trigger:i,placement:"bottom-start"},r.createElement(Af,null,r.createElement(Hf,{onSubmit:async e=>{e.preventDefault(),n?.instance_name?.trim()?(d(null),s(!0),await a(n),s(!1)):d("Instance name is required")}},r.createElement(qf,null,r.createElement(Gf,{htmlFor:"instance-name-input"},"Instance Name"),r.createElement($f,{id:"instance-name-input","data-hook":"topbar-instance-name-input",value:n.instance_name,onChange:e=>{const t={...n,instance_name:e.target.value};o(t)},placeholder:"Enter instance name",ref:f}),c&&r.createElement(Wf,null,c)),r.createElement(qf,null,r.createElement(Gf,{htmlFor:"instance-type-select"},"Instance Type"),r.createElement(Zf,{id:"instance-type-select","data-hook":"topbar-instance-type-select",name:"instance-type",options:[{label:"Development",value:"development"},{label:"Production",value:"production"},{label:"Testing",value:"testing"}],required:!0,value:n.instance_type,onChange:e=>o({...n,instance_type:e.target.value})})),r.createElement(qf,null,r.createElement(Gf,{htmlFor:"instance-description-input"},"Description"),r.createElement(jf,{id:"instance-description-input","data-hook":"topbar-instance-description-input",value:n.instance_description,onChange:e=>o({...n,instance_description:e.target.value}),placeholder:"Enter instance description"})),r.createElement(qf,null,r.createElement(Gf,{color:"foreground"},"Color"),r.createElement(Mf,null,r.createElement(Pf,{type:"button",colorValue:"default",selected:!n.instance_rgb||""===n.instance_rgb,onClick:()=>h(""),"data-hook":"topbar-instance-color-option-default"}),r.createElement(Pf,{type:"button",colorValue:"r",selected:"r"===n.instance_rgb,onClick:()=>h("r"),"data-hook":"topbar-instance-color-option-r"}),r.createElement(Pf,{type:"button",colorValue:"g",selected:"g"===n.instance_rgb,onClick:()=>h("g"),"data-hook":"topbar-instance-color-option-g"}),r.createElement(Pf,{type:"button",colorValue:"b",selected:"b"===n.instance_rgb,onClick:()=>h("b"),"data-hook":"topbar-instance-color-option-b"}),r.createElement(Lf,{type:"button",selected:Boolean(n.instance_rgb?.startsWith("rgb")),onClick:()=>{m(!0),o({...n,instance_rgb:y})},"data-hook":"topbar-instance-color-option-custom"})),u&&r.createElement(Df,null,r.createElement(Bf,null,r.createElement(Pe,{color:"foreground"},"R"),r.createElement(zf,{className:"red",value:p.r,onChange:e=>b("r",parseInt(e.target.value,10)),"data-hook":"topbar-instance-color-slider-r"}),r.createElement(Ff,{value:p.r,onChange:e=>b("r",parseInt(e.target.value,10)),"data-hook":"topbar-instance-color-input-r"})),r.createElement(Bf,null,r.createElement(Pe,{color:"foreground"},"G"),r.createElement(zf,{className:"green",value:p.g,onChange:e=>b("g",parseInt(e.target.value,10)),"data-hook":"topbar-instance-color-slider-g"}),r.createElement(Ff,{value:p.g,onChange:e=>b("g",parseInt(e.target.value,10)),"data-hook":"topbar-instance-color-input-g"})),r.createElement(Bf,null,r.createElement(Pe,{color:"foreground"},"B"),r.createElement(zf,{className:"blue",value:p.b,onChange:e=>b("b",parseInt(e.target.value,10)),"data-hook":"topbar-instance-color-slider-b"}),r.createElement(Ff,{value:p.b,onChange:e=>b("b",parseInt(e.target.value,10)),"data-hook":"topbar-instance-color-input-b"})))),r.createElement(Vf,null,r.createElement(Uf,{type:"submit",prefixIcon:l?r.createElement(es.a,null):void 0,"data-hook":"topbar-instance-save-button"},"Save"),r.createElement(Uf,{type:"button",onClick:()=>t(!1),skin:"secondary","data-hook":"topbar-instance-cancel-button"},"Cancel")))))},Yf=s.ZP.div.withConfig({displayName:"toolbar__EnvIconWrapper"})(["\n  display: flex;\n  align-items: center;\n  padding: 0.3rem;\n  background: ",";\n  border-radius: 0.4rem;\n"],(({$background:e})=>e??"inherit")),Kf=(0,s.ZP)(Zn.x).attrs({align:"center"}).withConfig({displayName:"toolbar__Root"})(["\n  gap: 1.5rem;\n  padding-left: 1.5rem;\n  white-space: nowrap;\n  display: flex;\n  overflow: hidden;\n"]),Xf=s.ZP.div.withConfig({displayName:"toolbar__CustomTooltipWrapper"})(["\n  display: flex;\n  flex-direction: column;\n  padding: 1.5rem 0;\n  background: ",";\n  font-size: 1.4rem;\n  border-radius: 0.8rem;\n  border: 1px solid ",";\n  box-shadow: "," 5px 5px 8px;\n"],(({theme:e})=>e.color.background),(({$badgeColors:e})=>e.primary),(({theme:e})=>e.color.background)),Jf=s.ZP.div.withConfig({displayName:"toolbar__FlexRow"})(["\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n"]),eh=s.ZP.h4.withConfig({displayName:"toolbar__Title"})(["\n  display: flex;\n  align-items: center;\n  border-bottom: 1px solid ",";\n  padding: 0 1.5rem 1.5rem;\n  gap: 0.8rem;\n  font-size: 1.4rem;\n  margin-bottom: 0;\n"],(({theme:e})=>e.color.gray1)),th=s.ZP.div.withConfig({displayName:"toolbar__FlexCol"})(["\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n"]),nh=s.ZP.div.withConfig({displayName:"toolbar__Info"})(["\n  display: flex;\n  flex-direction: column;\n  padding: 0 1.5rem;\n  gap: 1rem;\n"]),rh=(0,s.ZP)(Zn.x).withConfig({displayName:"toolbar__Badge"})(["\n  display: flex;\n  align-items: center;\n  padding: 0 1rem;\n  padding-left: 0.3rem;\n  height: 3rem;\n  border-radius: 0.4rem;\n  flex-shrink: 1;\n  min-width: 0;\n  gap: 0;\n  transition: opacity 0.1s ease;\n\n  ","\n\n  .instance-name {\n    font-size: 1.6rem;\n    display: inline-flex;\n    gap: 0;\n    align-items: center;\n    vertical-align: middle;\n    overflow: hidden;\n    flex-shrink: 1;\n    margin-left: 0.3rem;\n\n    &-text {\n      text-overflow: ellipsis;\n      overflow: hidden;\n      white-space: nowrap;\n      flex-shrink: 1;\n      min-width: 0;\n      color: inherit;\n    }\n\n    &-type {\n      text-overflow: ellipsis;\n      overflow: hidden;\n      white-space: nowrap;\n      flex-shrink: 0;\n      color: inherit;\n    }\n\n    &.placeholder {\n      color: ",";\n    }\n  }\n\n  .edit-icon {\n    cursor: pointer;\n    display: inline;\n    width: 2.2rem;\n    margin-left: 1rem;\n    padding: 0.1rem;\n    background: inherit;\n    border-radius: 0.4rem;\n    flex-shrink: 0;\n    user-select: none;\n\n    &.placeholder {\n      color: ",";\n\n      &:hover {\n        color: ",";\n        background: ",";\n      }\n    }\n  }\n"],(({$badgeColors:e})=>`\n    background: ${e.primary};\n\n    .instance-name {\n      color: ${e.secondary};\n    }\n\n    .edit-icon {\n      color: ${e.secondary};\n\n      &:hover {\n        color: ${e.primary};\n        background: ${e.secondary};\n      }\n    }\n  `),(({theme:e})=>e.color.orange),(({theme:e})=>e.color.orange),(({theme:e})=>e.color.backgroundLighter),(({theme:e})=>e.color.orange)),ah=(0,s.ZP)(Zn.x).attrs({gap:"0.5rem"}).withConfig({displayName:"toolbar__User"})(["\n  background: ",";\n  border-radius: 0.4rem;\n  height: 3rem;\n  padding: 0 1rem;\n  font-weight: 600;\n"],(({theme:e})=>e.color.backgroundLighter)),oh=s.ZP.span.withConfig({displayName:"toolbar__EnterpriseBadge"})(["\n  padding: 0 4px;\n  background: ",";\n  border-radius: 2px;\n  color: ",";\n\n  &:not(:last-child) {\n    margin-right: 0.25rem;\n  }\n"],(({theme:e})=>e.color.pinkDarker),(({theme:e})=>e.color.foreground)),ih=s.ZP.span.withConfig({displayName:"toolbar__Separator"})(["\n  display: inline-block;\n  flex-shrink: 0;\n  width: 0.15rem;\n  margin: 0 1rem;\n  height: 1.8rem;\n  background: ",";\n\n"],(({$color:e})=>e)),lh=(e,t)=>{if(!e||!e.startsWith("rgb"))return t?.color.foreground||"inherit";const n=e.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);if(n){const e=parseInt(n[1],10)/255,r=parseInt(n[2],10)/255,a=parseInt(n[3],10)/255,o=.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.0722*(a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4));return o<.25?t?.color.foreground:o<.5?t?.color.gray2:o<.75?t?.color.gray1:t?.color.background}return t?.color.foreground||"inherit"},sh=e=>{const t=(0,s.Fg)();return e?e.startsWith("rgb")?{primary:e,secondary:lh(e,t)}:"r"===e?{primary:"rgb(199, 7, 45)",secondary:t.color.foreground}:"g"===e?{primary:"rgb(0, 170, 59)",secondary:t.color.foreground}:"b"===e?{primary:"rgb(0, 122, 255)",secondary:t.color.foreground}:{primary:t.color.backgroundLighter,secondary:t.color.foreground}:{primary:t.color.backgroundLighter,secondary:t.color.foreground}},ch=({instanceType:e,color:t,style:n})=>{switch(e){case"development":return r.createElement(If.w,{size:"18px",color:t,style:{...n}});case"production":return r.createElement(Rf.d,{size:"18px",color:t,style:{...n}});case"testing":return r.createElement(Of.G,{size:"18px",color:t,style:{transform:"scale(1.2)",...n}});default:return r.createElement(Md.Z,{size:"18px",style:{transform:"translateY(-0.2rem)",...n},color:t})}},dh=({icon:e,placement:t,shownValues:n})=>{const a=sh(n?.instance_rgb??null);return r.createElement(dt,{placement:t,trigger:e},r.createElement(Xf,{$badgeColors:a},r.createElement(th,null,n?.instance_type&&r.createElement(eh,null,r.createElement(Yf,{$background:a.primary},r.createElement(ch,{color:a.secondary,instanceType:n?.instance_type})),r.createElement(Pe,{color:"foreground",weight:400},"You are connected to a QuestDB instance for ",n?.instance_type)),r.createElement(nh,null,r.createElement(Jf,null,r.createElement(Pe,{color:"foreground",weight:600},"Instance Name:"),r.createElement(Pe,{color:"foreground",size:"md"},n?.instance_name)),n?.instance_description&&r.createElement(Jf,null,r.createElement(Pe,{color:"foreground",weight:600},"Description:"),r.createElement(Pe,{color:"foreground",size:"md"},n?.instance_description))))))},uh=()=>{const{quest:e}=(0,r.useContext)(Jr),{settings:t,preferences:n,refreshSettingsAndPreferences:a}=Hr(),{logout:i}=Wr(),l=(0,o.v9)(Tn.query.getResult),[c,d]=(0,r.useState)(null),[u,m]=(0,r.useState)(!1),[p,g]=(0,r.useState)(null),[f,h]=(0,r.useState)(!1),{autoRefreshTables:b}=Za(),E=u?p:n,w=E?.instance_type?E.instance_type.charAt(0).toUpperCase()+E.instance_type.slice(1):"",C=sh(E?.instance_rgb??null),v=(0,s.Fg)(),x=async()=>{try{const a=await e.query("SELECT current_user",{limit:"0,1"});if(a.type===T.DQL&&1===a.count){const e=a.data[0].current_user;return d(e),M.isSSOAuthenticated()&&e&&t["acl.oidc.client.id"]&&(n=t["acl.oidc.client.id"],r=e,localStorage.setItem(`${yn.SSO_USERNAME}.${n}`,r)),e}return null}catch(e){return null}var n,r},_=async n=>{const r=!0===t["http.settings.readonly"];if("OSS"!==t["release.type"])if(n)try{const t=await e.showPermissions(n),r=t.type===T.DQL&&(0===t.count||t.data.some((e=>"SETTINGS"===e.permission)));h(r)}catch(e){h(!1)}else h(!1);else h(!r)};(0,r.useEffect)((()=>{x().then(_),a()}),[]),(0,r.useEffect)((()=>{l&&l.type===T.DDL&&(x(),a())}),[l]);const S=(0,r.useCallback)((async(e=!0)=>{const t=n?.version,{preferences:r}=await a();if(t!==r.version&&e){Dt("Instance information is updated with the latest changes from the server.",{autoClose:5e3});const e=document.querySelector('[data-hook="topbar-instance-badge"]');e&&(e=>{e.style.opacity="0",setTimeout((()=>{e.style.opacity="1"}),200),setTimeout((()=>{e.style.opacity="0"}),400),setTimeout((()=>{e.style.opacity="1"}),600),setTimeout((()=>{e.style.opacity="0"}),800),setTimeout((()=>{e.style.opacity="1"}),1e3)})(e)}return r}),[a,n]),k=(0,r.useCallback)((async()=>{const e=await S(!0);u&&p?.version!==e.version&&g(e)}),[S,u,p]),N=(0,r.useCallback)((async e=>{const t=await S(e);g(e?t:null),m(e)}),[S]);return(0,r.useEffect)((()=>(b&&window.addEventListener("focus",k),()=>{window.removeEventListener("focus",k)})),[k,b]),r.createElement(Kf,null,r.createElement(Zn.x,{gap:"0.5rem"},r.createElement(Pe,{color:"foreground"},"Web Console"),"EE"===t["release.type"]&&r.createElement(Xe,{icon:r.createElement(oh,null,"EE"),tooltip:"QuestDB Enterprise Edition",placement:"bottom"})),n&&r.createElement(rh,{$badgeColors:C,"data-hook":"topbar-instance-badge"},r.createElement(Zn.x,null,E?.instance_type?r.createElement(dh,{icon:r.createElement("div",{"data-hook":"topbar-instance-icon",style:{padding:"0.7rem"}},r.createElement(ch,{instanceType:E?.instance_type,color:C.secondary,style:"production"===E?.instance_type?{transform:"translateY(-0.1rem)"}:{}})),placement:"bottom",shownValues:E}):r.createElement("div",{style:{padding:"0.7rem"}},r.createElement(ts.j,{size:"18px",color:v.color.orange,style:{transform:"scale(1.3) translateY(-0.1rem)"}}))),E?.instance_name?r.createElement(Zn.x,{"data-hook":"topbar-instance-name",className:"instance-name"},r.createElement(Pe,{className:"instance-name-type"},w),r.createElement(ih,{$color:C.secondary}),r.createElement(Pe,{className:"instance-name-text"},E?.instance_name)):r.createElement(Pe,{"data-hook":"topbar-instance-name",className:"instance-name placeholder"},"Instance name is not set"),f&&r.createElement(Qf,{active:u,onToggle:N,values:p??n,onSave:async t=>{try{const n=await e.savePreferences(t);if(n.success){await N(!1),Bt("Instance information updated successfully.");const t=await e.query(`${y.CONFIG} limit -1`);if(t.type===T.DQL&&1===t.count){const e=t.data[0];En(e)}return}const{preferences:r}=await a();if(g(r),409===n.status)return void zt("Instance information is updated with the latest changes from the server. Please try updating it again.",{autoClose:5e3});throw new Error(n.message)}catch(e){zt("Failed to update instance information: "+e,{autoClose:5e3})}},onValuesChange:g,trigger:r.createElement(rp.I,{"data-hook":"topbar-instance-edit-icon",size:"18px",className:"edit-icon "+(E?.instance_name?"":"placeholder")})})),r.createElement(Zn.x,{gap:"0.5rem"},t["acl.enabled"]&&c&&r.createElement(ah,null,r.createElement(qn.n,{size:"18px"}),r.createElement(Pe,{color:"foreground"},c)),zn(t)&&r.createElement(Vn.z,{onClick:()=>i(),prefixIcon:r.createElement(Nf.R,{size:"18px"}),skin:"secondary","data-hook":"button-logout"},"Logout")))};var mh=n(6086);const ph=(0,s.ZP)(yt).withConfig({displayName:"back-button__Root"})(["\n  margin-left: 0.5rem;\n"]),gh=({onClick:e,label:t})=>r.createElement(dt,{placement:"right",modifiers:[{name:"offset",options:{offset:[5,15]}}],trigger:r.createElement(ph,{onClick:e},r.createElement(mh.X,{size:w}))},r.createElement(xt,null,t||"Back to the Cloud")),fh=(0,s.ZP)(Zn.x).attrs({align:"center",justifyContent:"space-between"}).withConfig({displayName:"TopBar__Root"})(["\n  width: 100%;\n  height: 4.5rem;\n  background: ",";\n"],(({theme:e})=>e.color.backgroundDarker)),hh=()=>{const e=(0,Ia.yR)((async()=>({returnTo:(await xa.editor_settings.where("key").equals("returnTo").first())?.value??"",returnToLabel:(await xa.editor_settings.where("key").equals("returnToLabel").first())?.value??""})),[]);return r.createElement(fh,null,e?.returnTo&&r.createElement(gh,{label:e?.returnToLabel,onClick:()=>{window.location.href=e.returnTo}}),r.createElement(uh,null),r.createElement(Tf,null))};var bh=n(44560);const yh=s.ZP.span.withConfig({displayName:"UnreadItemsIcon__Root"})(["\n  position: relative;\n"]),Eh=s.ZP.span.withConfig({displayName:"UnreadItemsIcon__Tick"})(["\n  position: absolute;\n  right: 0;\n  top: 0;\n  width: 1.3rem;\n  height: 1.3rem;\n  border-radius: 50%;\n  background-color: ",";\n"],(({theme:e})=>e.color.red)),wh=s.ZP.span.withConfig({displayName:"UnreadItemsIcon__Count"})(["\n  position: absolute;\n  left: 100%;\n  top: -50%;\n  font-size: ",";\n  border-radius: 6px;\n  background-color: #c64242;\n  color: ",";\n  padding: 0.2rem 0.4rem;\n"],(({theme:e})=>e.fontSize.ms),(({theme:e})=>e.color.white)),Ch=({icon:e,label:t,tick:n,count:a})=>r.createElement(yh,null,"number"==typeof a&&a>0&&r.createElement(wh,null,a),e,n&&r.createElement(Eh,null),t&&r.createElement("span",null,t)),vh=s.ZP.div.withConfig({displayName:"thumbnail__Root"})(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  max-width: 100%;\n  margin: 2rem 0;\n  border-radius: ",";\n  box-shadow: 0 7px 30px -10px ",";\n  overflow: hidden;\n  background: ",";\n\n  svg {\n    position: absolute;\n  }\n"],(({theme:e})=>e.borderRadius),(({theme:e})=>e.color.black),(({theme:e})=>e.color.backgroundLighter)),xh=s.ZP.img.withConfig({displayName:"thumbnail__ThumbImg"})(["\n  height: auto;\n\n  ","\n"],(({loaded:e,fadeIn:t})=>`\n    opacity: ${e?1:0};\n    ${t&&"transition: opacity 0.2s ease-in-out;"}\n  `)),_h=({src:e,alt:t,width:n,height:a,containerWidth:o,containerHeight:i,fadeIn:l,...s})=>{const[c,d]=(0,r.useState)(!1);let u=o,m=u/n*a;if(m>i){const e=i/m;m=i,u*=e}return(0,r.useEffect)((()=>{const t=new Image;t.src=e,t.onload=()=>{d(!0)}}),[e]),r.createElement(vh,s,!c&&r.createElement(es.a,null),r.createElement(xh,{src:e,alt:t,width:u,height:m,loaded:c,fadeIn:l}))};var Sh=n(84991);const kh="10deg",Th=(0,s.F4)(["\n  0%, 50%, 100% {\n    transform: rotate(0);\n  }\n\n  10%, 20%, 30% {\n    transform: rotate(-",");\n  }\n\n  15%, 25%, 40% {\n    transform: rotate(",");\n  }\n"],kh,kh),Nh=(0,s.iv)(["\n  animation: "," 2s infinite ease-in-out;\n  transform-origin: 50% 0;\n"],Th),Ih=(0,s.ZP)(Sh.d).withConfig({displayName:"bell__Bell"})(["\n  color: ",";\n\n  ","\n"],(({theme:e,$unread:t})=>e.color[t?"foreground":"inherit"]),(({$unread:e})=>e&&Nh));function Rh(){return Rh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rh.apply(this,arguments)}const Oh=s.ZP.div.withConfig({displayName:"News__Loading"})(["\n  display: grid;\n  grid-auto-flow: column;\n  gap: 1rem;\n  justify-self: center;\n  margin-top: 2rem;\n"]),Ah=s.ZP.div.withConfig({displayName:"News__Items"})(["\n  display: grid;\n  width: 100%;\n  overflow: auto;\n"]),Mh=s.ZP.div.withConfig({displayName:"News__Item"})(["\n  display: grid;\n  gap: 1rem;\n  padding: 2rem;\n\n  &:not(:last-child) {\n    border-bottom: 1px solid ",";\n  }\n"],(({theme:e})=>e.color.backgroundLighter)),Ph=s.ZP.h2.withConfig({displayName:"News__Title"})(["\n  margin: 0;\n  font-size: 2rem;\n"]),Lh=(0,s.ZP)(Pe).attrs({color:"foreground"}).withConfig({displayName:"News__NewsText"})(["\n  a {\n    color: ",";\n  }\n\n  h2 {\n    font-size: 1.8rem;\n  }\n\n  h3 {\n    font-size: 1.6rem;\n  }\n\n  p,\n  li {\n    font-size: ",";\n    line-height: 1.75;\n  }\n\n  code {\n    background-color: ",";\n    color: ",";\n    padding: 0.2rem 0.4rem;\n    border-radius: 0.2rem;\n  }\n\n  li:not(:last-child) {\n    margin-bottom: 0.5rem;\n  }\n"],(({theme:e})=>e.color.cyan),(({theme:e})=>e.fontSize.lg),(({theme:e})=>e.color.selection),(({theme:e})=>e.color.pink)),Dh=()=>{const e=(0,o.I0)(),{quest:t}=(0,r.useContext)(Jr),n=(0,o.v9)(Tn.telemetry.getConfig),[a,i]=(0,r.useState)(!1),[l,s]=(0,r.useState)(!1),[c,d]=(0,r.useState)(void 0),[u,m]=(0,r.useState)(!1),[p,g]=(0,r.useState)([]),[f,h]=(0,r.useState)(!1),b=(0,o.v9)(Tn.console.getActiveSidebar);let y;const E=async()=>{i(!0),s(!1);try{const e=await t.getNews({category:"enterprise",telemetryConfig:n});d(e)}catch(e){s(!0)}finally{i(!1)}};return(0,r.useEffect)((()=>(E(),window.addEventListener("focus",E),()=>window.removeEventListener("focus",E))),[]),(0,r.useEffect)((()=>{c&&(async()=>{if(c){const e=await xa.read_notifications.toArray(),t=c.map((e=>e.id)).filter((t=>!e.find((e=>e.newsId===t))));g(t),h(t?.length>0)}})()}),[c]),(0,r.useEffect)((()=>{c&&(u?(async()=>{if(c){const e=c.map((e=>e.id)),t=(await xa.read_notifications.toArray()).map((e=>e.newsId)),n=e.filter((e=>!t.includes(e)));await xa.read_notifications.bulkPut(n.map((e=>({newsId:e}))),{allKeys:!0}),h(!1)}})():g([]))}),[u,c]),(0,r.useEffect)((()=>{m("news"===b)}),[b]),r.createElement(Ve,{mode:"side",title:"QuestDB News",open:u,onOpenChange:async t=>{e(jt.setActiveSidebar(t?"news":void 0))},trigger:r.createElement(Xe,{icon:r.createElement(yt,{"data-hook":"news-panel-button",onClick:()=>m(!u),selected:u},r.createElement(Ch,{icon:r.createElement(Ih,{size:w,$unread:f}),tick:f})),placement:"left",tooltip:"QuestDB News"})},r.createElement(Ve.ContentWrapper,{mode:"side"},r.createElement(Ah,null,a&&!c&&r.createElement(Oh,null,r.createElement(Pe,{color:"foreground"},"Loading news..."),r.createElement(es.a,null)),l&&r.createElement(Oh,null,r.createElement(Pe,{color:"red"},"Error loading news. Please try again shortly.")),(!a||c)&&!l&&c&&c.map(((t,n)=>r.createElement(Mh,{key:`${n}-${t.title}`,unread:void 0!==p.find((e=>t.id===e))},r.createElement(Ph,null,t.title),r.createElement(Pe,{color:"gray2"},t.date),t.thumbnail&&t.thumbnail.length>0&&t.thumbnail[0].thumbnails.large&&r.createElement(_h,Rh({containerWidth:460,containerHeight:460,src:t.thumbnail[0].thumbnails.large.url,alt:`${t.title} thumbnail`,width:t.thumbnail[0].thumbnails.large.width,height:t.thumbnail[0].thumbnails.large.height,fadeIn:!0},t&&t.thumbnail?{onMouseOver:()=>{t.thumbnail&&(y=setTimeout((()=>{t&&t.thumbnail&&e(jt.setImageToZoom({src:t.thumbnail[0].thumbnails.large.url,width:t.thumbnail[0].thumbnails.large.width,height:t.thumbnail[0].thumbnails.large.height,alt:t.title}))}),500))},onMouseOut:()=>{clearTimeout(y),setTimeout((()=>{e(jt.setImageToZoom(void 0))}),250)}}:{})),r.createElement(Lh,null,r.createElement(bh.D,{components:{a:({node:e,children:t,...n})=>r.createElement("a",Rh({},n.href?.startsWith("http")?{target:"_blank",rel:"noopener noreferrer"}:{},n),t)}},t.body))))))))};var Bh=n(78882);const zh=(0,s.ZP)(ys.i).withConfig({displayName:"CreateTableDialog__DisabledTableIcon"})(["\n  opacity: 0.3;\n"]),Fh=()=>{const[e,t]=(0,r.useState)(void 0),n=(0,o.I0)(),a=(0,o.v9)(Tn.query.getTables),i=(0,o.v9)(Tn.console.getActiveSidebar),{consoleConfig:l}=Hr(),{appendQuery:s}=Ma();return(0,r.useEffect)((()=>{t("create"===i?"add":void 0)}),[i]),(0,r.useEffect)((()=>{void 0!==e&&n(jt.setActiveSidebar("create"))}),[e]),l.readOnly?r.createElement(Xe,{icon:r.createElement(zh,{size:w,"data-hook":"create-table-panel-button"}),tooltip:"To use this feature, turn off read-only mode in the configuration file",placement:"left"}):r.createElement(Op,{action:"add",isEditLocked:!1,hasWalSetting:!0,walEnabled:!1,name:"",partitionBy:"NONE",ttlValue:0,ttlUnit:"HOURS",schema:[],tables:a,timestamp:"",onOpenChange:e=>t(e),open:void 0!==e,onSchemaChange:e=>{const{name:t,partitionBy:r,timestamp:a,ttlValue:o,ttlUnit:i,schemaColumns:l,walEnabled:c}=e,d=(({name:e,partitionBy:t,timestamp:n,walEnabled:r,dedup:a,ttlValue:o,ttlUnit:i,schemaColumns:l})=>{const s=n&&l.find((e=>e.column===n&&nu(e.type)));let c=`CREATE TABLE '${e}' (`;for(let e=0;e<l.length;e++){const{column:t,type:n,indexed:r,indexBlockCapacity:a,symbolCached:o,symbolCapacity:i}=l[e];c+=`${t} ${n} `,"SYMBOL"===n&&(c+=i?`capacity ${i} `:"",o&&(c+="CACHE ")),r&&(c+="index ",a&&(c+=`capacity ${a} `)),c=(0,Bh.Z)(c),e!==l.length-1&&(c+=", ")}if(c+=")",s&&(c+=` timestamp (${n})`),"NONE"!==t&&(c+=` PARTITION BY ${t}`,0!==(o??0)&&(c+=` TTL ${o} ${i}`),c+=" "+(r?"WAL":"BYPASS WAL")),r&&a&&s){const e=l.filter((e=>e.upsertKey));e.length>0&&(c+=` DEDUP UPSERT KEYS(${(e.find((e=>e.column===n))?e:[...e,{column:n}]).map((e=>e.column)).join(",")})`)}return`${z(c)};`})({name:t,partitionBy:r,timestamp:a,walEnabled:"true"===c,ttlValue:o,ttlUnit:i,schemaColumns:l.map((e=>({column:e.name,type:e.type}))),dedup:!1});s(d,{appendAt:"end"}),n(Jt())},trigger:r.createElement(Xe,{icon:r.createElement(yt,{"data-hook":"create-table-panel-button",selected:void 0!==e,onClick:()=>{n(jt.setActiveSidebar(e?void 0:"create"))}},r.createElement(ys.i,{size:w})),placement:"left",tooltip:"Create table"}),ctaText:"Create"})};var Hh=n(85998),Uh=n(50364),Zh=n(52368),Vh=n(22709),qh=n(52067),$h=n(47910),jh=n(27545),Gh=n(43167);const Wh=s.ZP.div.withConfig({displayName:"Shortcuts__Wrapper"})(["\n  display: flex;\n  max-height: 650px;\n  width: 300px;\n  max-width: 100vw;\n  flex-direction: column;\n  background: ",";\n  box-shadow: "," 0px 5px 8px;\n  border: 1px solid ",";\n  border-radius: 4px;\n  overflow: auto;\n"],D("backgroundDarker"),D("black"),D("black")),Qh=s.ZP.div.withConfig({displayName:"Shortcuts__List"})(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n"]),Yh=(0,s.ZP)(Pe).withConfig({displayName:"Shortcuts__ListTitle"})(["\n  padding: 0.6rem 1.2rem;\n  margin-bottom: 0.6rem;\n  border-top: 1px solid ",";\n  background: ",";\n  width: 100%;\n"],(({theme:e})=>e.color.selection),(({theme:e})=>e.color.black40)),Kh=s.ZP.div.withConfig({displayName:"Shortcuts__Item"})(["\n  display: flex;\n  align-items: center;\n  padding: 0.6rem 1.2rem;\n\n  &:not(:last-child) {\n    border-bottom: 1px solid ",";\n  }\n"],D("background")),Xh=s.ZP.div.withConfig({displayName:"Shortcuts__ItemKeys"})(["\n  margin-left: auto;\n"]),Jh=s.ZP.span.withConfig({displayName:"Shortcuts__KeyGroup"})(["\n  color: ",';\n\n  &:not(:last-child):after {\n    content: "or";\n    padding: 0 0.5rem;\n  }\n'],D("gray2")),eb=s.ZP.span.withConfig({displayName:"Shortcuts__Key"})(["\n  padding: 0 4px;\n  background: ",";\n  border-radius: 2px;\n  color: ",";\n\n  &:not(:last-child) {\n    margin-right: 0.25rem;\n  }\n"],D("gray2"),D("black")),tb=F.isMacintosh||F.isIOS?"⌘":"Ctrl",nb=F.isMacintosh||F.isIOS?"⌥":"Alt",rb=[{keys:[["F9"],[tb,"Enter"]],title:"Run query"},{keys:[[tb,"⇧","Enter"]],title:"Run all queries in a tab"},{keys:[[nb,"T"]],title:"Add new tab"},{keys:[[nb,tb,"↑"]],title:"Add cursor above"},{keys:[[nb,tb,"↓"]],title:"Add cursor below"},{keys:[["⇧",nb,"↑"]],title:"Copy line up"},{keys:[["⇧",nb,"↓"]],title:"Copy line down"},{keys:[[nb,"↑"]],title:"Move line up"},{keys:[[nb,"↓"]],title:"Move line down"},{keys:[["⇧",nb,"F"]],title:"Format document"},{keys:[["F1"]],title:"Command palette"}],ab=[{keys:[[tb,"K"]],title:"Search docs"}],ob=({list:e,title:t})=>r.createElement(Qh,null,r.createElement(Yh,null,r.createElement(Pe,{color:"gray2"},t)),e.map(((e,t)=>r.createElement(Kh,{key:`shortcut-${t}`},r.createElement(Pe,{color:"white"},e.title),r.createElement(Xh,null,e.keys.map(((e,t)=>r.createElement(Jh,{key:`keyGroup-${t}`},e.map(((e,t)=>r.createElement(eb,{key:`shortcutItem-key-${e}-${t}`},r.createElement(Pe,{color:"black",size:"xs",weight:600},e)))))))))))),ib=()=>r.createElement(Wh,null,r.createElement(ob,{list:ab,title:"Global shortcuts"}),r.createElement(ob,{list:rb,title:"SQL editor shortcuts"}));function lb(){return lb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lb.apply(this,arguments)}const sb=(0,s.ZP)(yt).withConfig({displayName:"help__HelpButton"})(["\n  padding: 0;\n"]),cb=(0,s.ZP)(Ii.Content).withConfig({displayName:"help__DropdownMenuContent"})(["\n  background: ",";\n  z-index: 1000;\n"],(({theme:e})=>e.color.backgroundDarker)),db=(0,s.ZP)(Ii.Item).withConfig({displayName:"help__DropdownMenuItem"})(["\n  color: ",";\n  ","\n"],(({theme:e})=>e.color.foreground),(({withlink:e})=>e&&"padding: 0;")),ub=(0,s.ZP)(Zn.x).attrs({justifyContent:"center"}).withConfig({displayName:"help__TooltipWrapper"})(["\n  width: 100%;\n  height: 100%;\n"]),mb=s.ZP.div.withConfig({displayName:"help__ShortcutsWrapper"})(["\n  position: fixed;\n  right: 0;\n  margin-top: 4.5rem;\n"]),pb=(0,s.ZP)(ot).withConfig({displayName:"help__StyledLink"})(["\n  padding: 0.5rem 1rem;\n  width: 100%;\n"]),gb=({href:e,text:t,icon:n,...a})=>r.createElement(pb,lb({color:"foreground",hoverColor:"foreground",href:e,rel:"noreferrer",target:"_blank"},a),r.createElement(Zn.x,{align:"center",gap:"1.5rem"},n,r.createElement(Zn.x,{align:"center",gap:"0.75rem"},t,r.createElement(Wa.d,{size:"14px"})))),fb=()=>{const{quest:e}=(0,r.useContext)(Jr),t=(0,o.v9)(Tn.telemetry.getConfig),[n,a]=(0,r.useState)(!1),i=(0,r.useCallback)((e=>{a(e)}),[]),[l,s]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),u=qe("Escape");return(0,r.useEffect)((()=>{u&&n&&a(!1)}),[u]),r.createElement(r.Fragment,null,r.createElement(Gh.o,{open:c,onOpenChange:d,withEmailInput:!0,title:"Contact us",subtitle:"Let us know your thoughts",onSubmit:async({email:n,message:r})=>{try{await e.sendFeedback({email:n,message:r,telemetryConfig:t}),Bt("Thank you for your feedback! Our team will review it shortly.")}catch(e){throw zt("Something went wrong. Please try again later."),e}}}),r.createElement(Ii.Root,{modal:!1,onOpenChange:s},r.createElement(Ii.Trigger,{asChild:!0},r.createElement(sb,lb({},l&&{selected:!0},{"data-hook":"help-panel-button"}),r.createElement(Xe,{icon:r.createElement(ub,null,r.createElement(Hh.H,{size:w})),placement:"left",tooltip:"Help"}))),r.createElement(Ii.Portal,null,r.createElement(cb,null,r.createElement(db,{onSelect:e=>e.preventDefault(),onClick:()=>d(!0),"data-hook":"help-link-contact-us"},r.createElement(Uh.f,{size:"18px"}),r.createElement(Pe,{color:"foreground"},"Contact us")),r.createElement(db,{asChild:!0,withlink:"true"},r.createElement(Ce.A,null,r.createElement(gb,{"data-hook":"help-link-slack",href:"https://slack.questdb.io/",text:"Slack community",icon:r.createElement(Vh.j,{size:"18px"})}))),r.createElement(db,{asChild:!0,withlink:"true"},r.createElement(Ce.A,null,r.createElement(gb,{"data-hook":"help-link-community",href:"https://community.questdb.io/",text:"Public forum",icon:r.createElement(qh.o,{size:"18px"})}))),r.createElement(db,{asChild:!0,withlink:"true"},r.createElement(Ce.A,null,r.createElement(gb,{"data-hook":"help-link-stackoverflow",href:"https://stackoverflow.com/tags/questdb",text:"Stack Overflow",icon:r.createElement($h.r,{size:"18px"})}))),r.createElement(db,{asChild:!0,withlink:"true"},r.createElement(Ce.A,null,r.createElement(gb,{"data-hook":"help-link-web-console-docs",href:"https://questdb.io/docs/develop/web-console/",text:"Web Console Docs",icon:r.createElement(Hh.H,{size:"18px"})}))),r.createElement(db,{onClick:()=>i(!0)},r.createElement(Zh.m,{size:"18px"}),r.createElement(Pe,{color:"foreground"},"Shortcuts")),r.createElement(db,{asChild:!0,withlink:"true"},r.createElement(Ce.A,null,r.createElement(gb,{href:"https://github.com/questdb/ui/commit/a058bc1",text:"Commit id: a058bc1",icon:r.createElement(jh.E,{size:"18px"})})))))),r.createElement(ut,{active:n,onToggle:i,trigger:r.createElement(r.Fragment,null)},r.createElement(mb,null,r.createElement(ib,null))))},hb=(0,s.ZP)(Zn.x).attrs({align:"center",justifyContent:"space-between"}).withConfig({displayName:"warning__WarningRoot"})(["\n  width: 100%;\n  height: 4rem;\n  background: #f8a24d;\n  color: #000;\n"]),bb=(0,s.ZP)(Zn.x).attrs({gap:"0.5rem"}).withConfig({displayName:"warning__Content"})(["\n  padding: 0 1.5rem;\n"]),yb=(0,s.ZP)(Zn.x).attrs({align:"center",justifyContent:"center"}).withConfig({displayName:"warning__CloseButton"})(["\n  border: 0;\n  cursor: pointer;\n  width: 4.5rem;\n  height: 4.5rem;\n"]),Eb=s.ZP.span.withConfig({displayName:"warning__WarningText"})(["\n  font-weight: 600;\n"]),wb=s.ZP.a.withConfig({displayName:"warning__WorkaroundLink"})(["\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n  margin-left: 0.5rem;\n  color: #000;\n\n  &:hover {\n    text-decoration: none;\n  }\n"]),Cb=(0,s.ZP)(xe.x).withConfig({displayName:"warning__CloseIcon"})(["\n  color: #000;\n"]),vb=()=>{const{warnings:e}=Hr(),[t,n]=(0,r.useState)([]);return(0,r.useEffect)((()=>{e&&e.length>0&&n(e.map((e=>e.tag)))}),[e]),0===t.length?null:r.createElement(Zn.x,{flexDirection:"column",gap:"0.1rem",style:{width:"100%"},"data-hook":"warnings"},e.filter((e=>t.includes(e.tag))).map(((e,a)=>r.createElement(hb,{key:a,"data-hook":"warning"},r.createElement(bb,null,r.createElement(It.u,{size:"20px"}),"Warning:"," ",r.createElement(Eb,{"data-hook":"warning-text"},e.warning),Ku[e.tag]&&r.createElement(wb,{href:Ku[e.tag].link,rel:"noreferrer noopener",target:"_blank","data-hook":"warning-workaround-link"},r.createElement(Wa.d,{size:"16px"}),Ku[e.tag].title)),r.createElement(yb,{"data-hook":"warning-close-button",onClick:()=>n(t.filter((t=>t!==e.tag)))},r.createElement(Cb,{size:"20px"}))))))};function xb(){return xb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xb.apply(this,arguments)}const _b=(0,s.ZP)(Zn.x).attrs({align:"center",justifyContent:"center"}).withConfig({displayName:"image-zoom__Root"})(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  z-index: 1000;\n  opacity: ",";\n  pointer-events: ",";\n"],(({visible:e})=>e?1:0),(({visible:e})=>e?"auto":"none")),Sb=s.ZP.div.withConfig({displayName:"image-zoom__Overlay"})(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(33, 34, 44, 0.9);\n  opacity: ",";\n  pointer-events: ",";\n  transition: opacity 0.2s ease-in-out;\n"],(({visible:e})=>e?1:0),(({visible:e})=>e?"auto":"none")),kb=s.ZP.div.withConfig({displayName:"image-zoom__Wrapper"})(["\n  z-index: 1001;\n\n  img {\n    border: 1px solid ",";\n    border-radius: ",";\n  }\n"],(({theme:e})=>e.color.offWhite),(({theme:e})=>e.borderRadius)),Tb=()=>{const e=(0,o.v9)(Tn.console.getImageToZoom),t=(0,o.I0)(),n=(0,r.useRef)(null),[a,i]=(0,r.useState)(0),[l,s]=(0,r.useState)(0),c=(0,o.v9)(Tn.console.getActiveSidebar),d=e=>{"Escape"===e.key&&t(jt.setImageToZoom(void 0))};return(0,r.useEffect)((()=>{n.current&&(i(n.current.offsetWidth),s(n.current.offsetHeight))}),[e]),(0,r.useEffect)((()=>{"news"===c?document.addEventListener("keydown",d):document.removeEventListener("keydown",d)}),[c]),"news"!==c?null:r.createElement(_b,{ref:n,visible:void 0!==e},r.createElement(Sb,{visible:void 0!==e}),e&&r.createElement(kb,null,r.createElement(_h,xb({},e,{containerWidth:a?.9*a:460,containerHeight:l?.75*l:460}))))},Nb=s.ZP.div.withConfig({displayName:"Layout__Page"})(["\n  display: flex;\n  width: 100%;\n  height: 100%;\n  flex-direction: column;\n  flex: 1;\n  overflow: hidden;\n  font-size: 1.4rem;\n  background: #21222c;\n\n  ::selection {\n    background: #44475a;\n  }\n"]),Ib=s.ZP.div.withConfig({displayName:"Layout__Root"})(["\n  display: flex;\n  width: 100%;\n  flex: 1;\n  overflow-y: auto;\n"]),Rb=s.ZP.div.withConfig({displayName:"Layout__Main"})(["\n  position: relative;\n  flex: 1;\n  display: flex;\n  width: ",";\n"],(({sideOpened:e})=>e?"calc(100% - 50rem - 4.5rem)":"calc(100% - 4.5rem)")),Ob=s.ZP.div.withConfig({displayName:"Layout__Drawer"})(["\n  background: ",";\n"],(({theme:e})=>e.color.backgroundDarker)),Ab=()=>{const e=(0,o.v9)(Tn.console.getActiveSidebar),t=(0,r.useCallback)((()=>{O.publish(A.TAB_FOCUS)}),[]),n=(0,r.useCallback)((()=>{O.publish(A.TAB_BLUR)}),[]);return(0,r.useEffect)((()=>(window.addEventListener("focus",t),window.addEventListener("blur",n),()=>{window.removeEventListener("focus",t),window.removeEventListener("blur",n)})),[]),r.createElement($a,null,r.createElement(Aa,null,r.createElement(hh,null),r.createElement(vb,null),r.createElement(Ib,null,r.createElement(Rb,{sideOpened:void 0!==e},r.createElement(Tb,null),r.createElement(Nb,null,r.createElement(jg,null))),r.createElement(Ob,{id:"side-panel-right"}),r.createElement(Am,{align:"top"},r.createElement(fb,null),r.createElement(Dh,null),r.createElement(Fh,null))),r.createElement(Qg,null),r.createElement(go,null)))},Mb=(0,l.k)(),Pb=(0,i.MT)(kn,(0,i.qC)((0,i.md)(Mb)));Mb.run(vn);const Lb=X("fade-reg",K.REG),Db=X("fade-slow",K.SLOW);a.render(r.createElement(s.f6,{theme:Mt},r.createElement(Qe,null,r.createElement(o.zt,{store:Pb},r.createElement(Fr,null,r.createElement(La,null,r.createElement(Gr,null,r.createElement(ea,null,r.createElement(d,null),a.createPortal(r.createElement(Ft,null),document.body),r.createElement(Ua,null,r.createElement(Db,null),r.createElement(Lb,null),r.createElement(Ab,null))))))))),document.getElementById("root"))},94349:e=>{e.exports={arrayEquals:function(e,t){if(!e||!t)return!1;if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]instanceof Array&&t[n]instanceof Array){if(!e[n].equals(t[n]))return!1}else if(e[n]!==t[n])return!1;return!0}}},88344:()=>{},32019:()=>{}},a={};function o(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={id:e,loaded:!1,exports:{}};return r[e].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}o.m=r,o.amdO={},e=[],o.O=(t,n,r,a)=>{if(!n){var i=1/0;for(d=0;d<e.length;d++){for(var[n,r,a]=e[d],l=!0,s=0;s<n.length;s++)(!1&a||i>=a)&&Object.keys(o.O).every((e=>o.O[e](n[s])))?n.splice(s--,1):(l=!1,a<i&&(i=a));if(l){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,r,a]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var a=Object.create(null);o.r(a);var i={};t=t||[null,n({}),n([]),n(n)];for(var l=2&r&&e;"object"==typeof l&&!~t.indexOf(l);l=n(l))Object.getOwnPropertyNames(l).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,o.d(a,i),a},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={87:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[i,l,s]=n,c=0;if(i.some((t=>0!==e[t]))){for(r in l)o.o(l,r)&&(o.m[r]=l[r]);if(s)var d=s(o)}for(t&&t(n);c<i.length;c++)a=i[c],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(d)},n=self.webpackChunk_questdb_web_console=self.webpackChunk_questdb_web_console||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),o.nc=void 0;var i=o.O(void 0,[736],(()=>o(74451)));i=o.O(i)})();